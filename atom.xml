<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¯ä¹åŠ å†°</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-01-06T01:29:52.988Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>HJY</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JavaScript å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼</title>
    <link href="http://example.com/2022/01/05/JavaScript%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
    <id>http://example.com/2022/01/05/JavaScript%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</id>
    <published>2022-01-05T14:56:59.000Z</published>
    <updated>2022-01-06T01:29:52.988Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å•ä¾‹æ¨¡å¼ï¼Œä¹Ÿå«å•å­æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå±äº<code>åˆ›å»ºå‹æ¨¡å¼</code>çš„ä¸€ç§ã€‚</p><p>ä¿è¯ä¸€ä¸ªç±»<code>ä»…æœ‰ä¸€ä¸ªå®ä¾‹</code>ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„<code>å…¨å±€è®¿é—®ç‚¹</code>ã€‚</p><h2 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h2><p><strong>å…¨å±€å˜é‡ç¬¦åˆå•ä¾‹æ¨¡å¼å—ï¼Ÿ</strong></p><p>ä¸æ˜¯ã€‚ä½†æˆ‘ä»¬ç»å¸¸ä¼šæŠŠå˜é‡å½“æˆå•ä¾‹æ¥ä½¿ç”¨ï¼Œçœ‹ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br></pre></td></tr></table></figure><p>é€šè¿‡å­—é¢é‡åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯¹è±¡<code>person</code>ç¡®å®æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå¦‚æœè¯¥å˜é‡åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜ï¼Œå°±å¯ä»¥åœ¨ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒã€‚</p><p>ä½†æ˜¯å…¨å±€å˜é‡å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š</p><ul><li>æ±¡æŸ“å‘½åç©ºé—´ï¼ˆå˜é‡åå†²çªï¼‰</li><li>ä¸æ˜“ç»´æŠ¤ (è¢«è¦†ç›–)</li></ul><p>å¹¶ä¸”éšç€é¡¹ç›®çš„ä½“ç§¯å’ŒåŠŸèƒ½å¢å¤§ï¼Œå‡ºç°é—®é¢˜çš„æ¦‚ç‡ä¹Ÿä¼šå¢å¤§ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>é¦–å…ˆæˆ‘ä»¬è¦æ¸…æ¥š JS æ˜¯ä¸€é—¨<code>æ²¡æœ‰ç±»</code>çš„è¯­è¨€ï¼ŒES6 å‡ºç°ç±»ä¹Ÿæ˜¯åŸå‹çš„è¯­æ³•ç³–ã€‚ä¹Ÿæ­£å› ä¸ºæ²¡æœ‰ç±»ï¼Œåœ¨ JS ä¸­å®ç°å•ä¾‹æ¨¡å¼ä¹Ÿåªéœ€è¦ä¸€ä¸ª<code>å”¯ä¸€</code>çš„å¯¹è±¡ï¼Œè¿™æ˜¯å¾ˆè‡ªç„¶çš„åšæ³•ã€‚</p><p>è¿™é‡Œä»¥ä¸€ä¸ªç™»å½•å¼¹çª—ä¸ºä¾‹ï¼Œå®è·µä¸€ä¸‹å•ä¾‹æ¨¡å¼ã€‚</p><p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªç™»å½•æŒ‰é’®ï¼Œç‚¹å‡»åèƒ½å¤Ÿå‡ºç°ç™»å½•å¼¹çª—ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;loginBtn&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…ˆæ¥å†™åˆ›å»ºç™»å½•å¼¹çª—çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> doCreateLoginModal = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> modal = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  modal.style.display = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">  modal.textContent = <span class="string">&quot;ç™»å½•å¼¹çª—&quot;</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(modal);</span><br><span class="line">  <span class="keyword">return</span> modal;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±æ˜¯å•ä¾‹æ¨¡å¼çš„é‡ç‚¹äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getInstance = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> result;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> result || (result = fn.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> createLoginModal = getInstance(doCreateLoginModal);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¯ä»¥å‘ç°è¿”å›çš„ç»“æœè¢«å°è£…åœ¨é—­åŒ…ï¼ˆå†…éƒ¨çš„å‡½æ•°è¢«ä¿å­˜åˆ°äº†å¤–éƒ¨ï¼‰äº§ç”Ÿçš„ä½œç”¨åŸŸä¸­ï¼Œå¤–éƒ¨æ˜¯è®¿é—®ä¸åˆ°è¿™ä¸¤ä¸ªå˜é‡çš„ï¼Œè¿™å°±é¿å…äº†å¯¹å…¨å±€çš„å‘½åæ±¡æŸ“ã€‚</p><p>å…ˆçœ‹è¿™æ®µä»£ç ä¸­äº§ç”Ÿçš„é—­åŒ…ï¼š</p><p>æœ€åä¸€è¡Œå¤–éƒ¨çš„<code>createLoginModal</code>å˜é‡ä¿å­˜äº†<code>getInstance</code>ä¸­çš„åŒ¿åå‡½æ•°ï¼Œè¯¥æ‹¥æœ‰<code>getInstance</code>ä½œç”¨åŸŸçš„è®¿é—®æƒé™ã€‚</p><p>å†ä»”ç»†çœ‹<code>return result || (result = fn.apply(this, arguments));</code>è¿™æ¡è¯­å¥ï¼š</p><p>ç¬¬ä¸€æ¬¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œ<code>result</code>ä¸º<code>undefined</code>,ä¼šæ‰§è¡Œ<code>result = fn.apply(this, arguments)</code>,è¿™é‡Œåˆ©ç”¨ä¼ å…¥çš„<code>fn</code>è°ƒç”¨ç”Ÿæˆç™»å½•å¼¹çª—çš„æ–¹æ³•ç”Ÿæˆç™»å½•å¼¹çª—ï¼Œå¹¶è¢«èµ‹å€¼ç»™<code>result</code>ï¼Œä½¿å¾—ä¹‹å<code>createLoginModal</code>å†è¢«è°ƒç”¨æ—¶ï¼Œè¿”å›ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ç™»å½•å¼¹çª—ã€‚</p><p>æœ€åç»™æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loginBtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;loginBtn&quot;</span>);</span><br><span class="line"></span><br><span class="line">loginBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> loginModal = createLoginModal();</span><br><span class="line">  loginModal.style.display = <span class="string">&quot;block&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/HJY-xh/plantTrees/blob/master/Demos/%5BJavaScript%5D%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%BD%95%E5%BC%B9%E7%AA%97/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html">å®Œæ•´ä»£ç </a></p><h2 id="æƒ°æ€§å•ä¾‹"><a href="#æƒ°æ€§å•ä¾‹" class="headerlink" title="æƒ°æ€§å•ä¾‹"></a>æƒ°æ€§å•ä¾‹</h2><p>æƒ°æ€§å•ä¾‹æŒ‡çš„æ˜¯åœ¨éœ€è¦çš„æ—¶å€™èœåˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://zh.wikipedia.org/wiki/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F">å•ä¾‹æ¨¡å¼-ç»´åŸºç™¾ç§‘</a></p><p>ä¹¦ç›®</p><ul><li><p>JavaScript è®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ</p></li><li><p>JavaScript è®¾è®¡æ¨¡å¼</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å®šä¹‰&quot;&gt;&lt;a href=&quot;#å®šä¹‰&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>React Hookè§£æ</title>
    <link href="http://example.com/2021/12/28/React%20Hook%E8%A7%A3%E6%9E%90/"/>
    <id>http://example.com/2021/12/28/React%20Hook%E8%A7%A3%E6%9E%90/</id>
    <published>2021-12-28T12:23:54.000Z</published>
    <updated>2022-01-06T03:29:01.059Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜åˆ—è¡¨"><a href="#é—®é¢˜åˆ—è¡¨" class="headerlink" title="é—®é¢˜åˆ—è¡¨"></a>é—®é¢˜åˆ—è¡¨</h2><p>å¸¦ç€ä»¥ä¸‹é—®é¢˜å­¦ä¹ ï¼š</p><ul><li>Hookè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li><li>Hookæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆæœ‰Hookï¼Ÿ</li><li>useStateæ–¹æ‹¬å·æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆæ¯æ¬¡æ›´æ–°çš„æ—¶å€™éƒ½è¦è¿è¡Œ Effect?</li><li>useMemo å’Œ shouldComponentUpdate æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li></ul><h2 id="Hookæ¦‚è¿°"><a href="#Hookæ¦‚è¿°" class="headerlink" title="Hookæ¦‚è¿°"></a>Hookæ¦‚è¿°</h2><ul><li><p>React 16.8çš„æ–°å¢ç‰¹æ€§</p></li><li><p>å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ï¼ˆæ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ï¼‰</p></li></ul><h2 id="Hookçš„åŠ¨æœº"><a href="#Hookçš„åŠ¨æœº" class="headerlink" title="Hookçš„åŠ¨æœº"></a>Hookçš„åŠ¨æœº</h2><ul><li>åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘</li></ul><p>åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾</p><p>Hookå‡ºç°ä¹‹å‰ï¼Œå°†å¯å¤ç”¨æ€§è¡Œä¸ºâ€é™„åŠ â€œåˆ°ç»„ä»¶çš„è§£å†³æ–¹æ¡ˆæœ‰<code>render props</code>å’Œ<code>é«˜é˜¶ç»„ä»¶</code>ï¼Œä½†æ˜¯è¿™ç±»æ–¹æ¡ˆéœ€è¦é‡æ–°ç»„ç»‡ç»„ä»¶ç»“æ„ï¼Œå¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œè¿›è€Œè®©ä»£ç éš¾ä»¥ç†è§£ã€‚</p><ul><li>Hookå°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚ç›‘å¬äº‹ä»¶ã€è¯·æ±‚æ•°æ®ï¼‰ï¼Œè€Œå¹¶éå¼ºåˆ¶æŒ‰ç…§ç”Ÿå‘½å‘¨æœŸåˆ’åˆ†</li></ul><p>ç»„ä»¶æœŸåˆå¾ˆç®€å•ï¼Œä½†æ˜¯é€æ¸ä¼šè¢«çŠ¶æ€é€»è¾‘å’Œå‰¯ä½œç”¨å……æ–¥ï¼Œç›¸å…³å…³è”ä¸”éœ€è¦å¯¹ç…§ä¿®æ”¹çš„ä»£ç è¢«æ‹†åˆ†ï¼ˆç›‘å¬äº‹ä»¶ï¼‰ï¼Œä¸ç›¸å…³çš„ä»£ç åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ï¼ˆ<code>componentDidMount</code>ã€<code>componentWillUnmount</code>)ç»„åˆåœ¨ä¸€èµ·ï¼Œå®¹æ˜“äº§ç”Ÿbugã€‚</p><ul><li>é™ä½å­¦ä¹ é—¨æ§›</li></ul><p>å¯¹classçš„å­¦ä¹ ï¼ˆéœ€è¦ç†è§£JSä¸­çš„thiså·¥ä½œæ–¹å¼ï¼‰</p><h2 id="Hookä½¿ç”¨è§„åˆ™"><a href="#Hookä½¿ç”¨è§„åˆ™" class="headerlink" title="Hookä½¿ç”¨è§„åˆ™"></a>Hookä½¿ç”¨è§„åˆ™</h2><ul><li><p>åªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨Hookã€‚ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨</p><p>  è¿™æ ·èƒ½å¤Ÿç¡®ä¿Hookåœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨</p></li><li><p>åªèƒ½åœ¨Reactçš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨Hookï¼ˆåŒ…æ‹¬è‡ªå®šä¹‰çš„Hookï¼‰</p></li></ul><h2 id="å¸¸è§çš„Hook"><a href="#å¸¸è§çš„Hook" class="headerlink" title="å¸¸è§çš„Hook"></a>å¸¸è§çš„Hook</h2><ul><li><p>åŸºç¡€ Hook</p><ul><li>useState</li><li>useEffect<ul><li>è¯´æ˜<pre><code>  - å¯ä»¥æŠŠè¯¥Hookçœ‹åšæ˜¯`componentDidMount`ã€`componentDidUpdate`ã€`componentWillUnmout`ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ  - Reactä¿è¯äº†æ¯æ¬¡è¿è¡Œeffectçš„åŒæ—¶ï¼ŒDOMéƒ½å·²ç»æ›´æ–°å®Œæ¯•  - ä¸`componentDidMount`æˆ–`componentDidUpdate`ä¸åŒï¼Œä½¿ç”¨useEffectè°ƒåº¦çš„effectä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«  - effectä¸­å¯é€‰çš„æ¸…é™¤æœºåˆ¶åœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™è§¦å‘</code></pre></li><li>ä½¿ç”¨æŠ€å·§<pre><code>  - ä½¿ç”¨å¤šä¸ª Effect å®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆæŒ‰ç…§ä»£ç çš„ç”¨é€”åˆ†ç¦»å®ƒä»¬ï¼‰ï¼ŒReactå°†æŒ‰ç…§effectå£°æ˜çš„é¡ºåºä¸€æ¬¡è°ƒç”¨ç»„å»ºçš„æ¯ä¸€ä¸ªeffect  - è·³è¿‡ Effect è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼ˆç¬¬äºŒä¸ªå‚æ•°ï¼‰</code></pre></li></ul></li><li>useContext<pre><code>æ¥æ”¶ä¸€ä¸ª context å¯¹è±¡ï¼ˆ`React.createContext` çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ context çš„å½“å‰å€¼</code></pre></li></ul></li><li><p>é¢å¤–çš„ Hook</p><ul><li>useReducer<br>useState çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå½¢å¦‚ <code>(state, action) =&gt; newState</code> çš„ reducerï¼Œå¹¶è¿”å›å½“å‰çš„ state ä»¥åŠä¸å…¶é…å¥—çš„ dispatch æ–¹æ³•</li><li>useCallback<br>useCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps)</li><li>useMemo<br>å¯ä»¥æŠŠ useMemo ä½œä¸ºæ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œä½†ä¸è¦æŠŠå®ƒå½“æˆè¯­ä¹‰ä¸Šçš„ä¿è¯<br>å¯ä»¥ä½¿ç”¨å®ƒç¼“å­˜ä¸€äº›ç›¸å¯¹è€—æ—¶çš„è®¡ç®—ï¼Œä¹Ÿéå¸¸é€‚åˆç”¨äºå­˜å‚¨å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥ä¼ å…¥å¯¹è±¡å­—é¢é‡ï¼ŒåŒ¿åå‡½æ•°ç­‰ï¼Œç”šè‡³æ˜¯ React Element</li><li>useRef<br>useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰</li><li>useImperativeHandle<ul><li>useImperativeHandle å¯ä»¥åœ¨ä½¿ç”¨ ref æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼</li><li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç </li><li>useImperativeHandle åº”å½“ä¸ <code>forwardRef</code> ä¸€èµ·ä½¿ç”¨</li></ul></li><li>useLayoutEffect<br>å…¶å‡½æ•°ç­¾åä¸ useEffect ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“</li><li>useDebugValue<br>useDebugValue å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾,å®ƒæ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å‡½æ•°ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°åªæœ‰åœ¨ Hook è¢«æ£€æŸ¥æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å®ƒæ¥å— debug å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ˜¾ç¤ºå€¼</li></ul></li></ul><h2 id="è‡ªå®šä¹‰Hook"><a href="#è‡ªå®šä¹‰Hook" class="headerlink" title="è‡ªå®šä¹‰Hook"></a>è‡ªå®šä¹‰Hook</h2><p>é€šè¿‡è‡ªå®šä¹‰ Hookï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­</p><p>å­—åº”è¯¥å§‹ç»ˆä»¥ use å¼€å¤´ï¼Œè¿™æ ·å¯ä»¥ä¸€çœ¼çœ‹å‡ºå…¶ç¬¦åˆ Hook çš„è§„åˆ™</p><p>è‡ªå®šä¹‰ Hook æ˜¯ä¸€ç§è‡ªç„¶éµå¾ª Hook è®¾è®¡çš„çº¦å®šï¼Œè€Œå¹¶ä¸æ˜¯ React çš„ç‰¹æ€§</p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><ul><li><p>å‡½æ•°ç»„ä»¶æ‰§è¡Œå‡½æ•°<code>renderWithHooks</code></p><ul><li>ä½œç”¨<br>å®ƒæ˜¯è°ƒç”¨<code>functionç»„ä»¶</code>å‡½æ•°çš„ä¸»è¦å‡½æ•°ï¼Œä»æºç ä¸­çœ‹ï¼Œå®ƒé¦–å…ˆä¼šç½®ç©ºå³å°†è°ƒå’Œæ¸²æŸ“çš„<code>workInProgressæ ‘</code>çš„<code>memoizedState</code>å’Œ<code>updateQueue</code>ï¼ŒæŠŠæ–°çš„hooksä¿¡æ¯æŒ‚è½½åˆ°è¿™ä¸¤ä¸ªå±æ€§ä¸Šï¼Œç„¶ååœ¨ç»„ä»¶<code>commité˜¶æ®µ</code>ï¼Œå°†<code>workInProgressæ ‘</code>æ›¿æ¢æˆ<code>currentæ ‘</code>ï¼Œæ›¿æ¢çœŸå®çš„DOMå…ƒç´ èŠ‚ç‚¹ã€‚å¹¶åœ¨currentæ ‘ä¿å­˜hooksä¿¡æ¯ã€‚</li><li>æ­¥éª¤<ul><li>æ‰§è¡Œå‡½æ•°ç»„ä»¶</li><li>æ”¹å˜<code>ReactCurrentDispatcher</code>å¯¹è±¡</li></ul></li></ul></li><li><p>åˆå§‹åŒ–hooks</p><p>  ç›¸å…³hookå®é™…æ‰§è¡Œçš„å‡½æ•°:</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useState: mountState, <span class="comment">// åˆå§‹åŒ–useState</span></span><br><span class="line"><span class="attr">useEffect</span>: mountEffect, <span class="comment">// åˆå§‹åŒ–useEffect</span></span><br><span class="line"><span class="attr">useLayoutEffect</span>: mountLayoutEffect, <span class="comment">// åˆå§‹åŒ–useLayoutEffect</span></span><br><span class="line"><span class="attr">useMemo</span>: mountMemo, <span class="comment">// åˆå§‹åŒ–useMemo</span></span><br><span class="line"><span class="attr">useReducer</span>: mountReducer, <span class="comment">// åˆå§‹åŒ–useReducer</span></span><br><span class="line"><span class="attr">useRef</span>: mountRef, <span class="comment">// åˆå§‹åŒ–useRef</span></span><br><span class="line"><span class="attr">useCallback</span>: mountCallback, <span class="comment">// åˆå§‹åŒ–useCallback</span></span><br></pre></td></tr></table></figure><p>  <code>mountWorkInProgressHook</code>ç”Ÿæˆhooké“¾è¡¨</p><ul><li>åœ¨ä¸€ä¸ªå‡½æ•°ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œæ¯ä¸ªhookæ‰§è¡Œï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªhookå¯¹è±¡ï¼Œå¹¶å½¢æˆé“¾è¡¨ç»“æ„ï¼Œç»‘å®šåœ¨<code>workInProgress</code>çš„<code>memoizedState</code>å±æ€§ä¸Š</li><li>hookä¸Šçš„çŠ¶æ€ï¼Œç»‘å®šåœ¨å½“å‰hookå¯¹è±¡çš„<code>memoizedState</code>å±æ€§ä¸Š</li><li>å¯¹äºeffectå‰¯ä½œç”¨é’©å­ï¼Œä¼šç»‘å®šåœ¨<code>workInProgress.updateQueue</code>ä¸Šï¼Œç­‰åˆ°<code>commité˜¶æ®µ</code>ï¼Œdomæ ‘æ„å»ºå®Œæˆï¼Œå†æ‰§è¡Œæ¯ä¸ª effect å‰¯ä½œç”¨é’©å­ã€‚</li></ul></li><li><p>æ›´æ–°hooks</p><p>  ç›¸å…³hookå®é™…æ‰§è¡Œçš„å‡½æ•°:</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useState: updateState, <span class="comment">// å¾—åˆ°æœ€æ–°çš„state</span></span><br><span class="line"><span class="attr">useEffect</span>: updateEffect, <span class="comment">// æ›´æ–°updateQueue</span></span><br><span class="line"><span class="attr">useLayoutEffect</span>: updateLayoutEffect,</span><br><span class="line"><span class="attr">useMemo</span>: updateMemo,</span><br><span class="line"><span class="attr">useReducer</span>: updateReducer,</span><br><span class="line"><span class="attr">useRef</span>: updateRef, <span class="comment">// è·å–refå¯¹è±¡</span></span><br><span class="line"><span class="attr">useCallback</span>: updateCallback</span><br></pre></td></tr></table></figure><p>  <code>updateWorkInProgressHook</code>æ›´æ–°hooké“¾è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”çš„hooks</p></li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://juejin.cn/post/6844904165500518414">React Hooks æœ€ä½³å®è·µ</a></p><p><a href="https://juejin.cn/post/6864438643727433741">react-hookså¦‚ä½•ä½¿ç”¨ï¼Ÿ</a></p><p><a href="https://juejin.cn/post/6944863057000529933#heading-0">ä¸€æ–‡åƒé€react-hooksåŸç†</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é—®é¢˜åˆ—è¡¨&quot;&gt;&lt;a href=&quot;#é—®é¢˜åˆ—è¡¨&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜åˆ—è¡¨&quot;&gt;&lt;/a&gt;é—®é¢˜åˆ—è¡¨&lt;/h2&gt;&lt;p&gt;å¸¦ç€ä»¥ä¸‹é—®é¢˜å­¦ä¹ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Hookè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/li&gt;
&lt;li&gt;Hookæœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="React" scheme="http://example.com/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸è§çš„æ’åºç®—æ³•</title>
    <link href="http://example.com/2021/12/19/%E5%B8%B8%E8%A7%81%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/"/>
    <id>http://example.com/2021/12/19/%E5%B8%B8%E8%A7%81%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/</id>
    <published>2021-12-19T02:41:09.000Z</published>
    <updated>2021-12-23T07:18:00.697Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="å¸¸è§çš„æ’åº"><a href="#å¸¸è§çš„æ’åº" class="headerlink" title="å¸¸è§çš„æ’åº"></a>å¸¸è§çš„æ’åº</h2><p><img src="https://s2.loli.net/2021/12/13/JeNhZmiWYlv85Ot.png"></p><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><p>è¯´æ˜ï¼šé‡å¤éå†è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼ŒæŒ‰æ’åºé¡ºåºäº¤æ¢å…ƒç´ å€¼ï¼Œä¸æ–­éå†ç›´åˆ°æ²¡æœ‰å†éœ€è¦äº¤æ¢</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bubbleSort = <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> output = [...input];</span><br><span class="line">    <span class="keyword">const</span> length = output.length;</span><br><span class="line">    <span class="keyword">let</span> hasSwap = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; length - <span class="number">1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (output[j] &gt; output[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="keyword">let</span> temp = output[j];</span><br><span class="line">                output[j] = output[j + <span class="number">1</span>];</span><br><span class="line">                output[j + <span class="number">1</span>] = temp;</span><br><span class="line">                hasSwap = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!hasSwap) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><p>è¯´æ˜ï¼šéå†æ•°ç»„ï¼Œæ‰¾åˆ°æ•°æ®åº”è¯¥æ’å…¥çš„ä½ç½®å°†å…¶æ’å…¥å³å¯</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> insertSort = <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> output = [...input];</span><br><span class="line">    <span class="keyword">const</span> length = output.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = output[i];</span><br><span class="line">        <span class="keyword">let</span> j = i - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; output[j] &gt; temp) &#123;</span><br><span class="line">            output[j + <span class="number">1</span>] = output[j];</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        output[j + <span class="number">1</span>] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><p>è¯´æ˜: æ¯ä¸€æ¬¡ä»å¾…æ’åºçš„æ•°æ®å…ƒç´ ä¸­é€‰å‡ºæœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œæ”¾åˆ°å·²æ’åºæ•°ç»„çš„æœ«å°¾</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> selectSort = <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> output = [...input];</span><br><span class="line">    <span class="keyword">const</span> length = output.length;</span><br><span class="line">    <span class="keyword">let</span> minIndex = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        minIndex = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (output[j] &lt; output[minIndex]) &#123;</span><br><span class="line">                minIndex = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        temp = output[i];</span><br><span class="line">        output[i] = input[minIndex];</span><br><span class="line">        output[minIndex] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> output;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><p>è¯´æ˜ï¼šå½’å¹¶çš„çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ†æ²»ã€‚å®ƒæŠŠæ•°ç»„ä»ä¸­é—´åˆ’åˆ†æˆä¸¤ä¸ªæ•°ç»„ï¼Œä¸€ç›´é€’å½’æŠŠå­æ•°ç»„åˆ’åˆ†æˆæ›´å°çš„æ•°ç»„ï¼ŒçŸ¥é“æ•°ç»„ä¸­å…ƒç´ ä¸ªæ•°ä¸º1æ—¶è¿›è¡Œæ’åºã€‚æŒ‰å¤§å°é¡ºåºåˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼Œæ¥ç€æŒ‰ç…§é€’å½’çš„é¡ºåºè¿”å›ï¼Œä¸æ–­åˆå¹¶æ’å¥½åºçš„æ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mergeSort = <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> length = input.length;</span><br><span class="line">    <span class="keyword">if</span> (length &lt; <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> input;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> middle = <span class="built_in">Math</span>.floor(length / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">const</span> left = input.slice(<span class="number">0</span>, middle);</span><br><span class="line">    <span class="keyword">const</span> right = input.slice(middle);</span><br><span class="line">    <span class="keyword">return</span> merge(mergeSort(left), mergeSort(right));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> merge = <span class="function">(<span class="params">left, right</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = [];</span><br><span class="line">    <span class="keyword">while</span> (left.length &amp;&amp; right.length) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left[<span class="number">0</span>] &lt; right[<span class="number">0</span>]) &#123;</span><br><span class="line">            result.push(left.shift());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.push(right.shift());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (left.length) &#123;</span><br><span class="line">        result.push(left.shift());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (right.length) &#123;</span><br><span class="line">        result.push(right.shift());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><p>è¯´æ˜ï¼šå®ƒæ˜¯å†’æ³¡æ’åºçš„ä¸€ç§æ”¹è¿›ï¼Œé€šè¿‡å…ƒç´ ä¹‹é—´çš„æ¯”è¾ƒå’Œäº¤æ¢ä½ç½®æ¥è¾¾åˆ°æ’åºçš„ç›®çš„ã€‚å¿«æ’åœ¨æ¯ä¸€è½®æŒ‘é€‰ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼ŒæŠŠå‰©ä¸‹çš„å…ƒç´ åŒå®ƒè¿›è¡Œæ¯”è¾ƒï¼Œå¤§äºå®ƒçš„æ”¾åˆ°æ•°åˆ—çš„ä¸€è¾¹ï¼Œå°äºå®ƒçš„æ”¾åˆ°æ•°åˆ—çš„å¦ä¸€è¾¹ï¼Œä¸€è½®æ¯”è¾ƒå®Œæˆåï¼Œæ•´ä¸ªåºåˆ—ä»¥é€‰å–çš„åŸºå‡†å…ƒç´ ä½ä¸ºç•Œï¼Œå·¦ä¾§å‡å°äºåŸºå‡†å…ƒç´ ï¼Œå³ä¾§å‡å¤§äºåŸºå‡†å…ƒç´ ã€‚ä½†å·¦å³ä¸¤ä¾§å†…éƒ¨å¹¶ä¸æ˜¯æœ‰åºçš„(å·¦å³ä¸¤ä¾§å…³é”®å­—ä¸ªæ•°ä¹Ÿä¸ä¸€å®šç›¸åŒ)ã€‚è¿›è€Œç»§ç»­å°†å·¦å³ä¸¤ä¾§åˆ†åˆ«å†ä»¥è¿™ç§æ–¹å¼è¿›è¡Œæ’åºï¼Œç›´åˆ°å°†åºåˆ—æ‹†åˆ†çš„å‰©ä½™ä¸€ä¸ªå…³é”®å­—ä¸ºæ­¢ï¼Œæ•´ä¸ªåºåˆ—å³å˜æˆæœ‰åºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> quickSort = <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (input.length &lt;= <span class="number">1</span>) &#123; <span class="keyword">return</span> input; &#125;</span><br><span class="line">    <span class="keyword">const</span> left = [];</span><br><span class="line">    <span class="keyword">const</span> right = [];</span><br><span class="line">    <span class="keyword">const</span> middle = input.splice(<span class="built_in">Math</span>.round(input.length / <span class="number">2</span>), <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; input.length; i++) &#123;</span><br><span class="line">        (middle &gt; input[i] ? left : right).push(input[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [...quickSort(left), middle, ...quickSort(right)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¸¸è§çš„æ’åº&quot;&gt;&lt;a href=&quot;#å¸¸è§çš„æ’åº&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
    <category term="ç®—æ³•" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>TypeScriptæ€ç»´å¯¼å›¾</title>
    <link href="http://example.com/2021/12/09/TypeScript%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/"/>
    <id>http://example.com/2021/12/09/TypeScript%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</id>
    <published>2021-12-09T13:34:11.000Z</published>
    <updated>2022-01-06T01:31:21.439Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="æ€ç»´å¯¼å›¾"><a href="#æ€ç»´å¯¼å›¾" class="headerlink" title="æ€ç»´å¯¼å›¾"></a>æ€ç»´å¯¼å›¾</h2><p><img src="https://s2.loli.net/2021/12/10/GpcItLvliHzMWRA.png"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>æ·±å…¥ç†è§£ TypeScript</p><p><a href="https://www.typescriptlang.org/">https://www.typescriptlang.org/</a></p><p><a href="https://www.tslang.cn/index.html">https://www.tslang.cn/index.html</a></p><p><a href="https://stackoverflow.com/questions/28818849/how-do-the-different-enum-variants-work-in-typescript">https://stackoverflow.com/questions/28818849/how-do-the-different-enum-variants-work-in-typescript</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;æ€ç»´å¯¼å›¾&quot;&gt;&lt;a href=&quot;#æ€ç»´å¯¼å›¾&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
    <category term="æ€ç»´å¯¼å›¾" scheme="http://example.com/tags/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>DOMåŸºæœ¬æ“ä½œæ€ç»´å¯¼å›¾</title>
    <link href="http://example.com/2021/11/16/DOM%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <id>http://example.com/2021/11/16/DOM%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</id>
    <published>2021-11-16T13:01:11.000Z</published>
    <updated>2022-01-06T01:33:50.961Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><p><img src="https://i.loli.net/2021/11/25/pkRSm7J3saNxV2z.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2021/11/25/pkRS</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
    <category term="æ€ç»´å¯¼å›¾" scheme="http://example.com/tags/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥äº†è§£eval</title>
    <link href="http://example.com/2021/10/26/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3eval/"/>
    <id>http://example.com/2021/10/26/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3eval/</id>
    <published>2021-10-26T11:29:04.000Z</published>
    <updated>2021-10-26T09:04:30.263Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h1 id="æ·±å…¥äº†è§£eval"><a href="#æ·±å…¥äº†è§£eval" class="headerlink" title="æ·±å…¥äº†è§£eval"></a>æ·±å…¥äº†è§£eval</h1><h2 id="ç›¸å…³å®šä¹‰å’Œæè¿°"><a href="#ç›¸å…³å®šä¹‰å’Œæè¿°" class="headerlink" title="ç›¸å…³å®šä¹‰å’Œæè¿°"></a>ç›¸å…³å®šä¹‰å’Œæè¿°</h2><p>eval æ˜¯å…¨å±€å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå‡½æ•°ï¼Œä¼šæŠŠä¼ å…¥çš„å­—ç¬¦ä¸²å½“åš JavaScript ä»£ç æ‰§è¡Œï¼Œå®ƒé€šå¸¸è¢«ç”¨æ¥æ‰§è¡ŒåŠ¨æ€åˆ›å»ºçš„ä»£ç ã€‚</p><p>è¯­æ³•å¾ˆç®€å•ï¼š</p><blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="built_in">eval</span>(string) <span class="comment">// ä¸€ä¸ªè¡¨ç¤º JavaScript è¡¨è¾¾å¼ã€è¯­å¥æˆ–ä¸€ç³»åˆ—è¯­å¥çš„å­—ç¬¦ä¸²ã€‚è¡¨è¾¾å¼å¯ä»¥åŒ…å«å˜é‡ä¸å·²å­˜åœ¨å¯¹è±¡çš„å±æ€§ã€‚</span></span><br></pre></td></tr></table></figure></blockquote><p>ä¸¾ä¸ªğŸŒ°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> string = <span class="string">&quot;console.log(&#x27;hello, eval&#x27;)&quot;</span>;</span><br><span class="line"><span class="built_in">window</span>.eval(string);</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/10/25/3jKtcFlqQmuZE2G.png"></p><p>å…ˆæå‡ºé—®é¢˜ï¼ševalè¿™ä¸ªæ–¹æ³•å¾ˆå¼ºå¤§ï¼Œä¸”å…¼å®¹æ€§å¾ˆå¥½ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå¾ˆå°‘ä½¿ç”¨ï¼Ÿ</p><p><img src="https://i.loli.net/2021/10/25/vr74wlehWzH6k8u.png"></p><h2 id="ä¸€äº›ç‰¹æ€§"><a href="#ä¸€äº›ç‰¹æ€§" class="headerlink" title="ä¸€äº›ç‰¹æ€§"></a>ä¸€äº›ç‰¹æ€§</h2><h3 id="è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼"><a href="#è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼" class="headerlink" title="è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼"></a>è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">&#x27;1+1+1&#x27;</span>)); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string1 = <span class="string">&#x27;let x; x = 1;&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> string2 = <span class="string">&#x27;let x, y; x = 1; y = 2;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="built_in">eval</span>(str);</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test(string1); <span class="comment">// 1</span></span><br><span class="line">test(string2); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°ä½œä¸ºå­—ç¬¦ä¸²è¢«å®šä¹‰æ—¶éœ€è¦â€-â€œå’Œâ€-â€œä½œä¸ºå‰ç¼€å’Œåç¼€"><a href="#å‡½æ•°ä½œä¸ºå­—ç¬¦ä¸²è¢«å®šä¹‰æ—¶éœ€è¦â€-â€œå’Œâ€-â€œä½œä¸ºå‰ç¼€å’Œåç¼€" class="headerlink" title="å‡½æ•°ä½œä¸ºå­—ç¬¦ä¸²è¢«å®šä¹‰æ—¶éœ€è¦â€(â€œå’Œâ€)â€œä½œä¸ºå‰ç¼€å’Œåç¼€"></a>å‡½æ•°ä½œä¸ºå­—ç¬¦ä¸²è¢«å®šä¹‰æ—¶éœ€è¦â€(â€œå’Œâ€)â€œä½œä¸ºå‰ç¼€å’Œåç¼€</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> funcStr1 = <span class="string">&#x27;function test() &#123;&#125;&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> funcStr2 = <span class="string">&#x27;(function test() &#123;&#125;)&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(funcStr1)); <span class="comment">// undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>(funcStr2)); <span class="comment">// [Function: test]</span></span><br></pre></td></tr></table></figure><h3 id="ç›´æ¥è°ƒç”¨å’Œé—´æ¥è°ƒç”¨"><a href="#ç›´æ¥è°ƒç”¨å’Œé—´æ¥è°ƒç”¨" class="headerlink" title="ç›´æ¥è°ƒç”¨å’Œé—´æ¥è°ƒç”¨"></a>ç›´æ¥è°ƒç”¨å’Œé—´æ¥è°ƒç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">1</span>, y = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">2</span>, y = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">eval</span>(<span class="string">&#x27;x + y&#x27;</span>));  <span class="comment">// ç›´æ¥è°ƒç”¨ï¼Œä½¿ç”¨æœ¬åœ°ä½œç”¨åŸŸï¼Œç»“æœæ˜¯ 4</span></span><br><span class="line">    <span class="keyword">const</span> geval = <span class="built_in">eval</span>; <span class="comment">// ç­‰ä»·äºåœ¨å…¨å±€ä½œç”¨åŸŸè°ƒç”¨</span></span><br><span class="line">    <span class="built_in">console</span>.log(geval(<span class="string">&#x27;x + y&#x27;</span>)); <span class="comment">// é—´æ¥è°ƒç”¨ï¼Œä½¿ç”¨å…¨å±€ä½œç”¨åŸŸï¼Œç»“æœæ˜¯ 2</span></span><br><span class="line">    <span class="built_in">console</span>.log((<span class="number">0</span>, <span class="built_in">eval</span>)(<span class="string">&#x27;this&#x27;</span>)); <span class="comment">// å¦ä¸€ä¸ªé—´æ¥è°ƒç”¨çš„ä¾‹å­</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0</span>, <span class="built_in">eval</span>)(<span class="string">&#x27;this&#x27;</span>)</span><br></pre></td></tr></table></figure><blockquote><p>é€—å·æ“ä½œç¬¦ï¼šå¯¹å®ƒçš„æ¯ä¸ªæ“ä½œæ•°æ±‚å€¼ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼Œå¹¶è¿”å›æœ€åä¸€ä¸ªæ“ä½œæ•°çš„å€¼</p></blockquote><p>è¿™é‡Œä½¿ç”¨é€—å·æ“ä½œç¬¦ï¼Œäºæ˜¯è¿”å›è¡¨è¾¾å¼ä¸­çš„æœ€åä¸€é¡¹ï¼Œç„¶åä¸ºevalä¼ å…¥â€™thisâ€™å­—ç¬¦ä¸²ï¼Œæ¥ç«‹å³æ‰§è¡Œè¿™ä¸ªè¡¨è¾¾å¼ï¼Œè¿™é‡Œå…¶å®å°±æ˜¯æŠŠå…¨å±€å¯¹è±¡ç»™æ‰“å°å‡ºæ¥</p><h2 id="é»‘é­”æ³•"><a href="#é»‘é­”æ³•" class="headerlink" title="é»‘é­”æ³•"></a>é»‘é­”æ³•</h2><h3 id="æ¬ºéª—è¯æ³•ä½œç”¨åŸŸ"><a href="#æ¬ºéª—è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="æ¬ºéª—è¯æ³•ä½œç”¨åŸŸ"></a>æ¬ºéª—è¯æ³•ä½œç”¨åŸŸ</h3><p><strong>åŸç†ï¼šJavaScriptä¸­çš„eval(str)å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºå‚æ•°ï¼Œå¹¶å°†å­—ç¬¦ä¸²å†…å®¹è§†ä¸ºå¥½åƒåœ¨ä¹¦å†™æ—¶å°±å­˜åœ¨äºeval()å‡½æ•°æ‰€åœ¨ä½ç½®çš„ä»£ç ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">str, a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">eval</span>(str); <span class="comment">// æ¬ºéª—</span></span><br><span class="line">    <span class="built_in">console</span>.log(a, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">foo(<span class="string">&quot;var b = 3;&quot;</span>, <span class="number">1</span>); <span class="comment">// 1, 3</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­<code>var b = 3;</code>è¿™æ¡è¯­å¥ä¼šè¢«å½“åšæœ¬æ¥å°±åœ¨é‚£é‡Œï¼Œå› æ­¤fooå‡½æ•°å†…éƒ¨çš„å˜é‡bé®è”½äº†å¤–éƒ¨çš„å˜é‡b</p><h4 id="ä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡¨ç°"><a href="#ä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡¨ç°" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡¨ç°"></a>ä¸¥æ ¼æ¨¡å¼ä¸‹çš„è¡¨ç°</h4><p>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œevalåœ¨è¿è¡Œæ—¶ä¼šæœ‰è‡ªå·±çš„è¯æ³•ä½œç”¨åŸŸï¼Œæ„å‘³ç€å…¶ä¸­çš„å£°æ˜æ— æ³•ä¿®æ”¹æ‰€åœ¨çš„ä½œç”¨åŸŸ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">str, a</span>) </span>&#123;</span><br><span class="line"><span class="meta">    &quot;use strict&quot;</span></span><br><span class="line">    <span class="built_in">eval</span>(str);</span><br><span class="line">    <span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(<span class="string">&quot;var a = 2;&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ—¶æœ‰å“ªäº›å‘"><a href="#ä½¿ç”¨æ—¶æœ‰å“ªäº›å‘" class="headerlink" title="ä½¿ç”¨æ—¶æœ‰å“ªäº›å‘"></a>ä½¿ç”¨æ—¶æœ‰å“ªäº›å‘</h2><h3 id="evalä¸å®¹æ˜“è°ƒè¯•"><a href="#evalä¸å®¹æ˜“è°ƒè¯•" class="headerlink" title="evalä¸å®¹æ˜“è°ƒè¯•"></a>evalä¸å®¹æ˜“è°ƒè¯•</h3><p>è°ƒè¯•å›°éš¾ï¼Œä¸”å¯è¯»æ€§éå¸¸å·®ï¼ˆæ²¡æœ‰è¡Œå·ï¼‰</p><p>ç”¨chromeDevã€VSCodeç­‰å·¥å…·æ— æ³•æ‰“æ–­ç‚¹è°ƒè¯•</p><h3 id="æ€§èƒ½é—®é¢˜"><a href="#æ€§èƒ½é—®é¢˜" class="headerlink" title="æ€§èƒ½é—®é¢˜"></a>æ€§èƒ½é—®é¢˜</h3><p>JavaScript é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€é—¨è§£é‡Šå‹çš„è¯­è¨€ï¼Œä½†æ˜¯ç°ä»£çš„ JavaScript å¼•æ“ä¸å†åªæ˜¯è§£é‡Š JavaScriptï¼Œä¹Ÿä¼šå¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚</p><p>V8 ä¸ºäº†æé«˜ JSçš„è¿è¡Œæ€§èƒ½ï¼Œåœ¨è¿è¡Œä¹‹å‰ä¼šå…ˆå°†JSç¼–è¯‘ä¸ºæœ¬åœ°çš„æœºå™¨ç ï¼Œç„¶åå†å»æ‰§è¡Œæœºå™¨ç ï¼ˆJITï¼‰ã€‚</p><blockquote><p>ç°ä»£JavaScriptè§£é‡Šå™¨å°†javascriptè½¬æ¢ä¸ºæœºå™¨ä»£ç ã€‚ è¿™æ„å‘³ç€ä»»ä½•å˜é‡å‘½åçš„æ¦‚å¿µéƒ½ä¼šè¢«åˆ é™¤ã€‚ å› æ­¤ï¼Œä»»æ„ä¸€ä¸ªevalçš„ä½¿ç”¨éƒ½ä¼šå¼ºåˆ¶æµè§ˆå™¨è¿›è¡Œå†—é•¿çš„å˜é‡åç§°æŸ¥æ‰¾ï¼Œä»¥ç¡®å®šå˜é‡åœ¨æœºå™¨ä»£ç ä¸­çš„ä½ç½®å¹¶è®¾ç½®å…¶å€¼ã€‚ å¦å¤–ï¼Œæ–°å†…å®¹å°†ä¼šé€šè¿‡ eval() å¼•è¿›ç»™å˜é‡ï¼Œ æ¯”å¦‚æ›´æ”¹è¯¥å˜é‡çš„ç±»å‹ï¼Œå› æ­¤ä¼šå¼ºåˆ¶æµè§ˆå™¨é‡æ–°æ‰§è¡Œæ‰€æœ‰å·²ç»ç”Ÿæˆçš„æœºå™¨ä»£ç ä»¥è¿›è¡Œè¡¥å¿ã€‚</p></blockquote><p><strong>evalç ´åäº†JSå¼•æ“ä¼˜åŒ–</strong></p><h3 id="å®‰å…¨é—®é¢˜"><a href="#å®‰å…¨é—®é¢˜" class="headerlink" title="å®‰å…¨é—®é¢˜"></a>å®‰å…¨é—®é¢˜</h3><p>å½“ä½¿ç”¨æ¥æºä¸å¯é çš„ç¬¬ä¸‰æ–¹ä»£ç æ—¶ï¼Œæ— æ³•ä¿è¯ä¸ç¢°åˆ°æ¶æ„ä»£ç </p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval">MDN</a></p><p><a href="https://github.com/mqyqingfeng/blog/issues/3">JavaScriptæ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</a></p><p><a href="http://nodejs.cn/learn/the-v8-javascript-engine">V8 JavaScript å¼•æ“</a></p><p>ã€Šä½ ä¸çŸ¥é“çš„JavaScriptã€‹ ä¸Šå·</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;æ·±å…¥äº†è§£eval&quot;&gt;&lt;a href=&quot;#æ·±å…¥äº†è§£eval&quot; class=&quot;he</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
    <category term="ç½‘ç»œæ”»å‡»" scheme="http://example.com/tags/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯æ¨¡å—åŒ–çš„å‰ä¸–ä»Šç”Ÿ</title>
    <link href="http://example.com/2021/08/19/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/"/>
    <id>http://example.com/2021/08/19/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/</id>
    <published>2021-08-19T12:23:54.000Z</published>
    <updated>2022-01-06T01:28:03.543Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><p>è¿‘å¹´æ¥ Web åº”ç”¨å˜å¾—æ›´åŠ å¤æ‚ä¸åºå¤§ï¼ŒWeb å‰ç«¯æŠ€æœ¯çš„åº”ç”¨èŒƒå›´ä¹Ÿæ›´åŠ å¹¿æ³›ã€‚é€šè¿‡ç›´æ¥ç¼–å†™ JavaScriptã€CSSã€HTML å¼€å‘ Web åº”ç”¨çš„æ–¹å¼å·²ç»æ— æ³•åº”å¯¹å½“å‰ Web åº”ç”¨çš„å‘å±•ã€‚</p><p>ç«™åœ¨å·¨äººçš„è‚©è†€å¾€å›çœ‹ï¼Œå¥½åœ¨ JavaScript æ¨¡å—åŒ–å‡ºç°ï¼Œè§£å†³äº†å‰ç«¯ç—›ç‚¹ï¼Œå¹¶ä¸”æ¨åŠ¨å‰ç«¯å·¥ç¨‹åŒ–ã€‚</p><h2 id="é‚£ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–å‘¢ï¼Ÿ-ä¸ºä»€ä¹ˆéœ€è¦å®ƒå‘¢ï¼Ÿ"><a href="#é‚£ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–å‘¢ï¼Ÿ-ä¸ºä»€ä¹ˆéœ€è¦å®ƒå‘¢ï¼Ÿ" class="headerlink" title="é‚£ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–å‘¢ï¼Ÿ ä¸ºä»€ä¹ˆéœ€è¦å®ƒå‘¢ï¼Ÿ"></a>é‚£ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–å‘¢ï¼Ÿ ä¸ºä»€ä¹ˆéœ€è¦å®ƒå‘¢ï¼Ÿ</h2><p>æ¨¡å—åŒ–å¯ä»¥ç†è§£æˆæ˜¯å°†ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿåˆ†è§£ä¸ºå¤šä¸ªæ¨¡å—ä»¥æ–¹ä¾¿ç»„ç»‡å’Œç¼–ç ã€‚</p><p>å¾ˆä¹…ä»¥å‰ï¼Œç½‘é¡µå¼€å‘è¦é€šè¿‡å‘½åç©ºé—´çš„æ–¹å¼æ¥ç»„ç»‡ä»£ç ã€‚åƒ jQuery å°±æ˜¯å°†ä»–çš„ API éƒ½æ”¾åœ¨ <code>window.$</code> ä¸‹ï¼Œåœ¨åŠ è½½å®Œ jQuery åï¼Œå…¶å®ƒæ¨¡å—å†é€šè¿‡ <code>window.$</code> å»ä½¿ç”¨ã€‚</p><p>é‚£è¿™ä¹ˆåšä¼šæœ‰ä¸€äº›é—®é¢˜ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š</p><ul><li>å‘½åç©ºé—´å†²çª</li><li>æ— æ³•åˆç†åœ°ç®¡ç†é¡¹ç›®åœ°ä¾èµ–å’Œç‰ˆæœ¬</li><li>æ— æ³•æ–¹ä¾¿åœ°æ§åˆ¶ä¾èµ–çš„åŠ è½½é¡ºåº</li></ul><p>å¯ä»¥é¢„è§ï¼Œå½“é¡¹ç›®è¶Šå¤§ï¼Œç»´æŠ¤æˆæœ¬ä¹Ÿè¶Šé«˜ï¼Œå› æ­¤ç”¨æ¨¡å—åŒ–çš„æ€æƒ³æ¥ç»„ç»‡ä»£ç ã€‚</p><p>å›é¡¾å‰ç«¯æ¨¡å—åŒ–çš„å‰ä¸–ä»Šç”Ÿï¼ŒæŒ‰æ—¶é—´å…ˆåå¯ä»¥æ€»ç»“ä¸ºä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹</p><ul><li>åˆ€è€•ç«ç§æ—¶ä»£</li><li>CommonJS æ¨¡å—è§„èŒƒåŠåœ¨ Node.js é‡Œçš„å®ç°</li><li>AMD å¼‚æ­¥æ¨¡å—å®šä¹‰</li><li>ESM ECMAScript æ¨¡å—ç³»ç»Ÿ</li></ul><h2 id="åˆ€è€•ç«ç§æ—¶ä»£"><a href="#åˆ€è€•ç«ç§æ—¶ä»£" class="headerlink" title="åˆ€è€•ç«ç§æ—¶ä»£"></a>åˆ€è€•ç«ç§æ—¶ä»£</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ HTML çš„ <code>&lt;script&gt;</code> å…ƒç´ ç”¨äºåµŒå…¥æˆ–å¼•ç”¨å¯æ‰§è¡Œè„šæœ¬ã€‚</p><p>åœ¨äº’è”ç½‘æ—©æœŸï¼ŒWeb1.0 æ—¶ä»£ï¼Œé¡µé¢æ¯”è¾ƒç®€å•ï¼Œå¤§å¤šæ—¶å€™åªæ˜¯å±•ç¤ºå†…å®¹ï¼Œä½¿ç”¨å†…åµŒçš„æ–¹å¼æˆ–è€…å¼•ç”¨å•ä¸ª JavaScript æ–‡ä»¶å°±å¯ä»¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</p><p>å½“åŠŸèƒ½å˜å¾—å¤æ‚æ—¶ï¼Œå•ä¸ª JavaScript æ–‡ä»¶ä»£ç é‡ä¹Ÿå˜å¤šï¼Œæ­¤æ—¶å¯ä»¥å°† JavaScript åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ï¼Œä½†éœ€è¦å¤„ç†å¥½å„ä¸ª <code>&lt;script&gt;</code> æ ‡ç­¾çš„ä¹¦å†™é¡ºåºã€‚</p><p>è¿™ä¸ªæ—¶æœŸé’ˆå¯¹ JavaScript æºç çš„ç»„ç»‡ï¼Œè°ˆä¸ä¸Šæ¨¡å—åŒ–ã€‚å³ä¾¿é‡‡ç”¨äº†æ–‡ä»¶æ‹¼æ¥ï¼ˆconcatï¼‰è¿™æ ·çš„å¤„ç†æŠ€æœ¯ï¼Œå…¶å…ˆåé¡ºåºä¹Ÿéœ€è¦äººå·¥ç»´æŠ¤ã€‚</p><h2 id="CommonJS-æ¨¡å—è§„èŒƒåŠåœ¨-Node-js-é‡Œçš„å®ç°"><a href="#CommonJS-æ¨¡å—è§„èŒƒåŠåœ¨-Node-js-é‡Œçš„å®ç°" class="headerlink" title="CommonJS æ¨¡å—è§„èŒƒåŠåœ¨ Node.js é‡Œçš„å®ç°"></a>CommonJS æ¨¡å—è§„èŒƒåŠåœ¨ Node.js é‡Œçš„å®ç°</h2><p>è¿™æ˜¯ä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„ JavaScript æ¨¡å—åŒ–è§„èŒƒï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡<code>require</code>æ–¹æ³•æ¥<strong>åŒæ­¥åŠ è½½</strong>ä¾èµ–çš„å…¶ä»–æ¨¡å—ï¼Œé€šè¿‡<code>module.export</code>å¯¼å‡ºéœ€è¦æš´éœ²çš„æ¥å£ã€‚</p><p>å®ƒçš„æµè¡Œå¾—ç›Šäº Node.js é‡‡ç”¨äº†è¿™ç§æ–¹æ³•ã€‚</p><p>å®ƒçš„ä¼˜ç‚¹åœ¨äºï¼š</p><ul><li>ä»£ç å¯å¤ç”¨äº Node.js ç¯å¢ƒä¸‹å¹¶è¿è¡Œ</li><li>æœ‰å¾ˆå¤šéµå¾ªæ­¤è§„èŒƒçš„ Npm åŒ…</li></ul><p>å®ƒçš„ç¼ºç‚¹åœ¨äºï¼š</p><ul><li>ä»£ç æ— æ³•ç›´æ¥è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œéœ€è¦é€šè¿‡å·¥å…·è½¬æ¢æˆæ ‡å‡†çš„ ES5</li></ul><p>CommonJS è¿˜å¯ä»¥ç»†åˆ†ä¸º CommonJS1 å’Œ CommonJS2ï¼ŒåŒºåˆ«åœ¨äº CommonJS1 åªèƒ½é€šè¿‡<code>export.xx = xx</code>çš„æ–¹å¼å¯¼å‡ºï¼Œè€Œ CommonJS2 åœ¨ CommonJS1 çš„åŸºç¡€ä¸ŠåŠ å…¥äº†<code>module.export = xx</code>çš„å¯¼å‡ºæ–¹å¼ã€‚CommonJS é€šå¸¸æŒ‡ CommonJS2ã€‚</p><p>Node åº”ç”¨ç”±æ¨¡å—ç»„æˆï¼Œé‡‡ç”¨ CommonJS æ¨¡å—è§„èŒƒã€‚æ¯ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å®šä¹‰çš„å˜é‡ã€å‡½æ•°ã€ç±»ï¼Œéƒ½æ˜¯ç§æœ‰çš„ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚</p><p>Node.js åœ¨è§£æä¸æ‰§è¡Œæ¯ä¸ªæ¨¡å—ä¹‹å‰ï¼Œä¼šå…ˆåŠ ä¸Šä¸€å±‚åŒ…è£…ï¼Œç±»ä¼¼äºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">exports</span>, <span class="built_in">require</span>, <span class="built_in">module</span>, __filename, __dirname</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¨¡å—ä»£ç ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œæ¨¡å—ä½œç”¨åŸŸå®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼›è€Œ <code>__dirname</code>ã€<code>__filename</code>ã€<code>require</code>ã€<code>module</code> ç­‰æ¨¡å—å¸¸é‡/å˜é‡éƒ½æ˜¯å¤–éƒ¨ä¼ å…¥çš„å‚æ•°ã€‚</p><h2 id="AMD-å¼‚æ­¥æ¨¡å—å®šä¹‰"><a href="#AMD-å¼‚æ­¥æ¨¡å—å®šä¹‰" class="headerlink" title="AMD å¼‚æ­¥æ¨¡å—å®šä¹‰"></a>AMD å¼‚æ­¥æ¨¡å—å®šä¹‰</h2><p>AMDï¼ˆAsynchronous Module Definitionï¼‰å³å¼‚æ­¥æ¨¡å—å®šä¹‰ã€‚AMD è§„èŒƒä¸­ï¼Œå„ä¸ªä¾èµ–å¯ä»¥å¼‚æ­¥åŠ è½½è€Œä¸å½±å“æ­£å¸¸é€»è¾‘ï¼Œéå¸¸é€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒã€‚AMD è§„èŒƒçš„æ ¸å¿ƒ API åªæœ‰ä¸€ä¸ªç®€å•çš„ <code>define()</code>å‡½æ•°ã€‚</p><p>AMD æ¨¡å—ç³»ç»Ÿçš„ç»å…¸å®ç°åº“æ˜¯ require.jsã€‚</p><p>ä¾‹å­:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define(id?: <span class="built_in">String</span>, dependencies?: <span class="built_in">String</span>[], <span class="attr">factory</span>: <span class="built_in">Function</span>|<span class="built_in">Object</span>);</span><br><span class="line"></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;&#125;)</span><br></pre></td></tr></table></figure><p><code>id</code> æ˜¯æ¨¡å—çš„åå­—ï¼Œå®ƒæ˜¯å¯é€‰çš„å‚æ•°ã€‚</p><p><code>dependencies</code> æŒ‡å®šäº†æ‰€è¦ä¾èµ–çš„æ¨¡å—åˆ—è¡¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¹Ÿæ˜¯å¯é€‰çš„å‚æ•°ï¼Œæ¯ä¸ªä¾èµ–çš„æ¨¡å—çš„è¾“å‡ºå°†ä½œä¸ºå‚æ•°ä¸€æ¬¡ä¼ å…¥ <code>factory</code> ä¸­ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š <code>dependencies</code>ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤å€¼æ˜¯ <code>[&quot;require&quot;, &quot;exports&quot;, &quot;module&quot;]</code>ã€‚</p><p><code>factory</code> æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œå®ƒåŒ…è£¹äº†æ¨¡å—çš„å…·ä½“å®ç°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°æˆ–è€…å¯¹è±¡ã€‚å¦‚æœæ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒçš„è¿”å›å€¼å°±æ˜¯æ¨¡å—çš„è¾“å‡ºæ¥å£æˆ–å€¼ã€‚</p><p>AMD è§„èŒƒå¹³æ—¶ç”¨å¾—å¾ˆå°‘ï¼Œè¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="string">&quot;myModule&quot;</span>, [<span class="string">&quot;jquery&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">$</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// $ æ˜¯ jquery æ¨¡å—çš„è¾“å‡º</span></span><br><span class="line">  $(<span class="string">&quot;body&quot;</span>).text(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ä½¿ç”¨</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">&quot;myModule&quot;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">myModule</span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒçš„ä¼˜ç‚¹ï¼š</p><ul><li>å¯åœ¨ä¸è½¬æ¢ä»£ç çš„æƒ…å†µä¸‹ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</li><li>å¯å¼‚æ­¥åŠ è½½ä¾èµ–</li><li>å¯å¹¶è¡ŒåŠ è½½å¤šä¸ªä¾èµ–</li><li>ä»£ç å¯è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒå’Œ Node.js ç¯å¢ƒä¸‹</li></ul><p>AMD çš„ç¼ºç‚¹åœ¨äº JavaScript è¿è¡Œç¯å¢ƒæ²¡æœ‰åŸç”Ÿæ”¯æŒ AMDï¼Œéœ€è¦å…ˆå¯¼å…¥å®ç°äº† AMD çš„åº“åæ‰èƒ½æ­£å¸¸ä½¿ç”¨ã€‚</p><h2 id="ESM-ECMAScript-æ¨¡å—ç³»ç»Ÿ"><a href="#ESM-ECMAScript-æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="ESM ECMAScript æ¨¡å—ç³»ç»Ÿ"></a>ESM ECMAScript æ¨¡å—ç³»ç»Ÿ</h2><p>å‰é¢æ‰€æåˆ°çš„æ‰€æœ‰æ¨¡å—åŒ–è§£å†³æ–¹æ¡ˆï¼Œéƒ½æ˜¯åˆ©ç”¨ JavaScript è¯­è¨€æœ¬èº«çš„ç‰¹æ€§ï¼Œå®ç°çš„å°è£…ã€‚è€Œé‰´äºæ¨¡å—ç³»ç»Ÿçš„é‡è¦æ€§ã€å¿…è¦æ€§ï¼ŒTC39 å§”å‘˜ä¼šä¹Ÿå¯¹å…¶æ ‡å‡†åŒ–æä¸ºä¸Šå¿ƒã€‚2015 å¹´æ¨å‡ºçš„ ECMAScript 6 æ ‡å‡†æ­£å¼å®šä¹‰äº† JavaScript çš„æ¨¡å—ç³»ç»Ÿã€‚</p><p>éœ€è¦è®°ä½çš„æ˜¯ï¼š</p><ul><li>å®ƒåœ¨è¯­è¨€å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŒ–ã€‚</li><li>æµè§ˆå™¨å‚å•†å’Œ Node.js éƒ½å®£å¸ƒè¦åŸç”Ÿæ”¯æŒè¯¥è§„èŒƒã€‚å®ƒå°†é€æ¸å–ä»£ CommonJSã€AMD è§„èŒƒï¼Œæˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ³•</li></ul><p>å®ƒçš„å·¥ä½œåŸç†æ˜¯æ¨¡å—æ–‡ä»¶åªåŠ è½½ã€æ‰§è¡Œä¸€æ¬¡ã€‚</p><p>è™½ç„¶ ES6 æ¨¡å—æ˜¯ç»ˆææ¨¡å—åŒ–æ–¹æ¡ˆï¼Œä½†å®ƒç›®å‰æ— æ³•ç›´æ¥è¿è¡Œåœ¨å¤§éƒ¨åˆ† JavaScript è¿è¡Œç¯å¢ƒä¸‹ï¼Œå¿…é¡»é€šè¿‡å·¥å…·è½¬æ¢æˆæ ‡å‡†çš„ ES5 åæ‰èƒ½æ­£å¸¸è¿è¡Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿‘å¹´æ¥ Web åº”ç”¨å˜å¾—æ›´åŠ å¤æ‚ä¸åºå¤§ï¼ŒWeb å‰ç«¯æŠ€æœ¯çš„åº”ç”¨èŒƒå›´ä¹Ÿæ›´åŠ å¹¿æ³›ã€‚é€šè¿‡ç›´æ¥ç¼–</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>webpackç¬”è®°</title>
    <link href="http://example.com/2021/08/05/webpack%E7%AC%94%E8%AE%B0/"/>
    <id>http://example.com/2021/08/05/webpack%E7%AC%94%E8%AE%B0/</id>
    <published>2021-08-05T13:09:33.000Z</published>
    <updated>2022-01-10T07:59:19.154Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é—®é¢˜åˆ—è¡¨"><a href="#é—®é¢˜åˆ—è¡¨" class="headerlink" title="é—®é¢˜åˆ—è¡¨"></a>é—®é¢˜åˆ—è¡¨</h2><ul><li>webpackæ˜¯ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜çš„ ï¼Ÿ</li><li>å®ƒæœ‰ä»€ä¹ˆäº®ç‚¹ ï¼Ÿ</li><li>loader å’Œ plugin æœ‰ä»€ä¹ˆåŒºåˆ« ï¼Ÿ</li><li>è¿è¡ŒåŸç† ï¼Ÿ</li><li>å¦‚ä½•ç¼–å†™ Loader?</li><li>Webpack å’Œ Rollup æœ‰ä»€ä¹ˆç›¸åŒç‚¹ä¸ä¸åŒç‚¹ï¼Ÿ</li></ul><h2 id="webpack-ä½œç”¨"><a href="#webpack-ä½œç”¨" class="headerlink" title="webpack ä½œç”¨"></a>webpack ä½œç”¨</h2><blockquote><p>æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚</p></blockquote><p>æ ¹æ®å®˜ç½‘çš„é«˜åº¦æ¦‚è¿°ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£<code>webpack</code>æ˜¯ä¸€ä¸ªé’ˆå¯¹<code>JavaScript</code>é¡¹ç›®çš„æ‰“åŒ…å·¥å…·ã€‚</p><p><img src="https://s2.loli.net/2022/01/06/M17foghaR2QwBbv.png"></p><p>ç®€å•æµè§ˆä¸€éå®˜æ–¹æ–‡æ¡£ï¼Œå†çœ‹çœ‹ä¸Šé¢è¿™å¼ å›¾ï¼Œå°±ä¼šå‘ç°<code>webpack</code>çš„å…³é”®ç‚¹åœ¨äº<code>æ¨¡å—å¤„ç†</code>å’Œ<code>æ‰“åŒ…</code>,åœ¨webpackæ„å»ºçš„æµç¨‹ä¸­ï¼Œé€šè¿‡<code>loader</code>å¤„ç†é JS æ–‡ä»¶ï¼Œå°†å…¶è½¬æ¢ä¸º webpack èƒ½å¤Ÿå¤„ç†çš„æœ‰æ•ˆæ¨¡å—ï¼Œä½¿ç”¨å„å¼å„æ ·çš„<code>plugin</code>åœ¨æ„å»ºæ—¶çš„å…³é”®æ­¥éª¤è¿›è¡Œä¸€äº›æ“ä½œï¼ˆæ¯”å¦‚æŒ‰éœ€åŠ è½½ï¼Œä»£ç å‹ç¼©ç­‰ï¼‰ï¼Œæœ€ç»ˆè¾“å‡ºæµè§ˆå™¨èƒ½ä½¿ç”¨çš„é™æ€èµ„æºã€‚</p><h3 id="è¿™é‡Œæ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–å‘¢ï¼Ÿ"><a href="#è¿™é‡Œæ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–å‘¢ï¼Ÿ" class="headerlink" title="è¿™é‡Œæ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–å‘¢ï¼Ÿ"></a>è¿™é‡Œæ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆéœ€è¦æ¨¡å—åŒ–å‘¢ï¼Ÿ</h3><p><a href="https://hjy-xh.github.io/2021/08/19/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/">ç­”æ¡ˆ</a></p><h3 id="é‚£æ€ä¹ˆç†è§£æ¨¡å—åŒ–å‘¢ï¼Ÿ"><a href="#é‚£æ€ä¹ˆç†è§£æ¨¡å—åŒ–å‘¢ï¼Ÿ" class="headerlink" title="é‚£æ€ä¹ˆç†è§£æ¨¡å—åŒ–å‘¢ï¼Ÿ"></a>é‚£æ€ä¹ˆç†è§£æ¨¡å—åŒ–å‘¢ï¼Ÿ</h3><p>åœ¨<code>webpack</code>ä¸­ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¸€åˆ‡çš†æ¨¡å—ï¼Œæ¯”å¦‚è¯´ä¸€å¼ å›¾ç‰‡ï¼Œä¸€ä¸ªSCSSæ–‡ä»¶ã€‚</p><p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯èƒ½å¤Ÿæ¸…æ™°åœ°æè¿°å‡ºå„ä¸ªæ¨¡å—ä¹‹é—´ä¾èµ–å…³ç³»ï¼Œä¾¿äº<code>webpack</code>å¯¹æ¨¡å—è¿›è¡Œç»„åˆã€æ‰“åŒ…ã€‚</p><h2 id="ä¸ºä»€ä¹ˆæ˜¯-webpack"><a href="#ä¸ºä»€ä¹ˆæ˜¯-webpack" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯ webpack"></a>ä¸ºä»€ä¹ˆæ˜¯ webpack</h2><p>è¿™äº›å¹´å‰æ¡†æ¡†æ¶ã€å·¥å…·éå¸¸å¤šï¼Œé‚£ä¸ºä»€ä¹ˆ<code>webpack</code>æ›´å—é’çå‘¢ï¼Ÿ</p><h3 id="è¿™é‡Œæ¥åˆ†æä¸€ä¸‹å…¶å®ƒçš„å·¥å…·"><a href="#è¿™é‡Œæ¥åˆ†æä¸€ä¸‹å…¶å®ƒçš„å·¥å…·" class="headerlink" title="è¿™é‡Œæ¥åˆ†æä¸€ä¸‹å…¶å®ƒçš„å·¥å…·"></a>è¿™é‡Œæ¥åˆ†æä¸€ä¸‹å…¶å®ƒçš„å·¥å…·</h3><ul><li><p>åŸºäºä»»åŠ¡æ‰§è¡Œçš„å·¥å…·</p><p>  æ¯”å¦‚è¯´ï¼š<a href="https://www.gulpjs.com.cn/">gulp</a>ã€<a href="https://www.gruntjs.net/">grunt</a></p><p>  <strong>è¿™äº›å·¥å…·èƒ½å¤Ÿè‡ªåŠ¨æ‰§è¡ŒæŒ‡å®šçš„ä»»åŠ¡ã€‚</strong>å®ƒä»¬ç®€å•é«˜æ•ˆï¼Œç¤¾åŒºæ´»è·ƒï¼Œæœ‰ç€ä¸°å¯Œçš„æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿æ‰“é€ å„ç§å·¥ä½œæµã€‚</p></li><li><p>åŸºäºæ¨¡å—åŒ–æ‰“åŒ…çš„å·¥å…·</p><p>  æ¯”å¦‚è¯´ï¼š<a href="https://browserify.org/">browserify</a>ã€<a href="https://www.webpackjs.com/">webpack</a>ã€<a href="https://www.rollupjs.com/">rollup</a></p><p>  åœ¨ Node ç¯å¢ƒä¸‹ï¼Œå¦‚æœéœ€è¦å¼•ç”¨ç»„ä»¶ï¼Œä½¿ç”¨<code>require</code>å…³é”®å­—å³å¯ï¼Œè¿™ç±»å·¥å…·å°±æ˜¯è¿™ä¸ªæ¨¡å¼ï¼Œè¿˜å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ã€å¼‚æ­¥åŠ è½½æ¨¡å—</p></li><li><p>æ•´åˆå‹å·¥å…·</p><p>  æ¯”å¦‚è¯´ï¼š<a href="https://fis.baidu.com/">FIS3</a>ã€<a href="https://elemefe.github.io/cooking/">cooking</a></p><p>  è¿™ç±»å·¥å…·ä½¿ç”¨äº†å¤šç§æŠ€æœ¯æ ˆå®ç°çš„è„šæ‰‹æ¶å·¥å…·ï¼Œå¥½å¤„æ˜¯å³å¼€å³ç”¨ï¼Œç¼ºç‚¹å°±æ˜¯å®ƒä»¬çº¦æŸäº†æŠ€æœ¯é€‰å‹ï¼Œå¹¶ä¸”å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚</p></li></ul><h3 id="ä¸ºä»€ä¹ˆé€‰ç”¨-webpack"><a href="#ä¸ºä»€ä¹ˆé€‰ç”¨-webpack" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰ç”¨ webpack"></a>ä¸ºä»€ä¹ˆé€‰ç”¨ webpack</h3><ul><li>å¤§å¤šæ•°å›¢é˜Ÿåœ¨å¼€å‘æ–°é¡¹ç›®æ—¶ä¼šé‡‡ç”¨ç´§è·Ÿæ—¶ä»£çš„æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯å‡ ä¹éƒ½ä¼šé‡‡ç”¨â€œæ¨¡å—åŒ–+æ–°è¯­è¨€+æ–°æ¡†æ¶â€ï¼Œ<code>webpack</code>å¯ä»¥ä¸ºè¿™äº›æ–°é¡¹ç›®æä¾›ä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆ</li><li><code>webpack</code> æœ‰è‰¯å¥½çš„ç”Ÿæ€é“¾å’Œç»´æŠ¤å›¢é˜Ÿï¼Œèƒ½æä¾›è‰¯å¥½çš„å¼€å‘ä½“éªŒå’Œä¿è¯è´¨é‡</li><li><code>webpack</code> è¢«å…¨ä¸–ç•Œçš„å¤§é‡ Web å¼€å‘è€…ä½¿ç”¨å’ŒéªŒè¯ï¼Œèƒ½æ‰¾åˆ°å„ä¸ªå±‚é¢æ‰€éœ€çš„æ•™ç¨‹å’Œç»éªŒåˆ†äº«</li></ul><h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><ul><li>entry: å…¥å£<br>  <code>webpack</code>æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°±ä»å…¥å£å¼€å§‹ï¼Œå¯ä»¥æŠ½è±¡ç†è§£ä¸ºè¾“å…¥</li><li>module: æ¨¡å—<br>  åœ¨<code>webpack</code>ä¸­ä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œ<code>webpack</code>ä¼šä»å…¥å£å¼€å§‹é€’å½’éå†æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—</li><li>chunk: ä»£ç å—<br>  ä¸€ä¸ª<code>Chunk</code>ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œå®ƒæ˜¯ä»£ç åˆå¹¶ã€åˆ†å‰²çš„äº§ç‰©</li><li>loader: æ¨¡å—è½¬æ¢å™¨<br>  <code>webpack</code>ä½¿ç”¨å®ƒæŠŠåŸå†…å®¹è½¬æ¢æˆæµè§ˆå™¨èƒ½å¤Ÿä½¿ç”¨çš„æ–‡ä»¶</li><li>plugin: æ’ä»¶æ‹“å±•<br>  <code>webpack</code>åœ¨æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºæ³¨å…¥æ‰©å±•é€»è¾‘æ¥æ”¹å˜æ„å»ºç»“æœ</li><li>output: è¾“å‡ºç»“æœ<br>  <code>webpack</code>ç»è¿‡ä¸€ç³»åˆ—å¤„ç†åï¼Œè¾“å‡ºçš„æœ€ç»ˆç»“æœ</li></ul><h2 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h2><p><code>webpack</code> åªèƒ½ç†è§£<code>JavaScript</code>å’Œ<code>JSON</code>æ–‡ä»¶ï¼Œè¿™æ˜¯<code>webpack</code>å¼€ç®±å¯ç”¨çš„è‡ªå¸¦èƒ½åŠ›ã€‚</p><p><code>loader</code>è®©<code>webpack</code>èƒ½å¤Ÿå»å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºæœ‰æ•ˆæ¨¡å—ï¼Œä»¥ä¾›åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œä»¥åŠè¢«æ·»åŠ åˆ°ä¾èµ–å›¾ä¸­ã€‚</p><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>å¤„ç†æ–‡ä»¶æ—¶å¯ä»¥ä½¿ç”¨å¤šä¸ª<code>loader</code>,<code>loader</code>çš„æ‰§è¡Œé¡ºåºå’Œé…ç½®ä¸­çš„é¡ºåºæ˜¯ç›¸åçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æœ€åä¸€ä¸ª<code>loader</code>å…ˆæ‰§è¡Œï¼Œå®ƒæ¥æ”¶æºæ–‡ä»¶ä½œä¸ºå‚æ•°ï¼Œå¤„ç†ä¹‹åæŠŠå¤„ç†ç»“æœä¼ ç»™ä¸‹ä¸€ä¸ª<code>loader</code></p><h3 id="å¸¸ç”¨çš„-loader"><a href="#å¸¸ç”¨çš„-loader" class="headerlink" title="å¸¸ç”¨çš„ loader"></a>å¸¸ç”¨çš„ loader</h3><ul><li>css-loader<br>  åŠ è½½<code>CSS</code>ã€æ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§</li><li>style-loader<br>  æŠŠ<code>CSS</code>ä»£ç æ³¨å…¥åˆ°<code>JavaScript</code>ä¸­ï¼Œé€šè¿‡<code>DOM</code>æ“ä½œå»åŠ è½½<code>CSS</code></li><li>file-loader<br>  æŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹URLå»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶</li><li>url-loader<br>  å®ƒå’Œ filr-loader ç±»ä¼¼ï¼Œä½†æ˜¯èƒ½åœ¨æ–‡ä»¶å¾ˆå°çš„æƒ…å†µä¸‹ä»¥<code>base64</code>çš„æ–¹å¼æŠŠæ–‡ä»¶å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­</li><li>babel-loader<br>  è®©å¼€å‘è€…èƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ–°çš„<code>JavaScript</code>ç‰¹æ€§</li></ul><h2 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h2><p>æ’ä»¶æ˜¯<code>webpack</code>çš„<strong>æ”¯æŸ±</strong>åŠŸèƒ½ã€‚</p><p>æ’ä»¶ç›®çš„åœ¨äºè§£å†³<code>loader</code>æ— æ³•å®ç°çš„å…¶ä»–äº‹ã€‚</p><p><code>webpack</code>è‡ªèº«ä¹Ÿæ˜¯æ„å»ºäºæ’ä»¶ç³»ç»Ÿä¹‹ä¸Šã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>åœ¨<code>webpack</code>è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼Œæ’ä»¶å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡<code>webpack</code>æä¾›çš„APIæ”¹å˜è¾“å‡ºç»“æœï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ’ä»¶å¯ä»¥è®¿é—®åˆ°<code>compile</code>å’Œ<code>compilation</code>ï¼Œé€šè¿‡é’©å­æ‹¦æˆª<code>webpack</code>çš„æ‰§è¡Œã€‚</p><h3 id="å¸¸ç”¨çš„-plugin"><a href="#å¸¸ç”¨çš„-plugin" class="headerlink" title="å¸¸ç”¨çš„ plugin"></a>å¸¸ç”¨çš„ plugin</h3><ul><li>clean-webpack-plugin<br>  æ¯æ¬¡æ‰“åŒ…åè‡ªåŠ¨æ¸…ç†<code>output.path</code>å†…çš„æ–‡ä»¶ï¼Œåªä¿ç•™æœ¬æ¬¡æ„å»ºçš„ç»“æœ</li><li>html-webpack-plugin<br>  åˆ›å»ºä¸€ä¸ª<code>html</code>æ–‡ä»¶ï¼Œå¹¶æŠŠ<code>webpack</code>æ‰“åŒ…åçš„é™æ€æ–‡ä»¶è‡ªåŠ¨æ’å…¥åˆ°è¿™ä¸ª<code>html</code>æ–‡ä»¶å½“ä¸­</li><li>DefinePlugin<br>  è¿™æ˜¯ä¸€ä¸ªå®šä¹‰å…¨å±€å˜é‡çš„æ’ä»¶,å®šä¹‰çš„å˜é‡å¯ä»¥åœ¨<code>webpack</code>æ‰“åŒ…èŒƒå›´å†…ä»»æ„<code>JavaScript</code>ç¯å¢ƒå†…è®¿é—®</li><li>MiniCssExtractPlugin<br>  å°†<code>CSS</code>å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒä¸ºæ¯ä¸ªåŒ…å«<code>CSS</code>å’Œ<code>JavaScript</code>æ–‡ä»¶éƒ½åˆ›å»ºä¸€ä¸ª<code>CSS</code>æ–‡ä»¶ï¼Œç»“åˆ<code>html-webpack-plugin</code>æ’ä»¶ï¼Œä»¥<code>link</code>çš„å½¢å¼æ’å…¥åˆ°<code>html</code>æ–‡æ¡£ä¸­</li><li>babel-loader<br>  è®©å¼€å‘è€…èƒ½å¤Ÿåœ¨é¡¹ç›®ä¸­ä½¿ç”¨æ–°çš„<code>JavaScript</code>ç‰¹æ€§</li><li>webpack-merge<br>  è¯¥æ’ä»¶ç”¨äºåˆå¹¶é…ç½®</li><li>webpack-bundle-analyzer<br>  é¡¹ç›®æ‰“åŒ…åè¿›è¡Œæ€§èƒ½åˆ†æ</li></ul><h2 id="æ„å»ºæµç¨‹å’ŒåŸç†"><a href="#æ„å»ºæµç¨‹å’ŒåŸç†" class="headerlink" title="æ„å»ºæµç¨‹å’ŒåŸç†"></a>æ„å»ºæµç¨‹å’ŒåŸç†</h2><p>æ„å»ºä¹‹å‰å…ˆäº†è§£å‡ ä¸ªåè¯ï¼š</p><ul><li>Compilerï¼šç¼–è¯‘ç®¡ç†å™¨ï¼Œ<code>webpack</code>å¯åŠ¨åä¼šåˆ›å»º<code>compiler</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸€ç›´å­˜æ´»ç›´åˆ°ç»“æŸé€€å‡º</li><li>Complilationï¼šå•æ¬¡ç¼–è¯‘è¿‡ç¨‹çš„ç®¡ç†å™¨ï¼Œæ¯”å¦‚<code>watch=true</code>æ—¶ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­åªæœ‰ä¸€ä¸ª<code>compiler</code>ï¼Œä½†æ¯æ¬¡æ–‡ä»¶å˜æ›´è§¦å‘é‡æ–°ç¼–è¯‘æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„<code>compilation</code>å¯¹è±¡</li><li>Dependenceï¼šä¾èµ–å¯¹è±¡ï¼Œ<code>webpack</code>åŸºäºè¯¥ç±»å‹è®°å½•æ¨¡å—é—´ä¾èµ–å…³ç³»</li><li>Moduleï¼š<code>webpack</code>å†…éƒ¨æ‰€æœ‰èµ„æºéƒ½ä¼šä»¥<code>module</code>å¯¹è±¡å½¢å¼å­˜åœ¨ï¼Œæ‰€æœ‰å…³äºèµ„æºçš„æ“ä½œã€è½¬è¯‘ã€åˆå¹¶éƒ½æ˜¯ä»¥<code>module</code>ä¸ºåŸºæœ¬å•ä½è¿›è¡Œçš„</li><li>Chunkï¼šç¼–è¯‘å®Œæˆå‡†å¤‡è¾“å‡ºæ—¶ï¼Œ<code>webpack</code>ä¼šå°†<code>module</code>æŒ‰ç‰¹å®šçš„è§„åˆ™ç»„ç»‡æˆä¸€ä¸ªä¸€ä¸ªçš„<code>chunk</code>ï¼Œè¿™äº›<code>chunk</code>æŸç§ç¨‹åº¦ä¸Šè·Ÿæœ€ç»ˆè¾“å‡ºä¸€ä¸€å¯¹åº”</li></ul><p>æ„å»ºæµç¨‹ï¼š</p><ul><li><p>åˆå§‹åŒ–é˜¶æ®µ</p><ul><li>åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶ã€é…ç½®å¯¹è±¡ã€Shellå‚æ•°ä¸­è¯»å–ï¼Œè¿›è¡Œé”™è¯¯æ£€æŸ¥ï¼Œä¸é»˜è®¤é…ç½®ç»“åˆå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</li><li>åˆ›å»ºç¼–è¯‘å™¨å¯¹è±¡ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆ›å»º<code>Compiler</code>å¯¹è±¡</li><li>åˆå§‹åŒ–ç¼–è¯‘ç¯å¢ƒï¼šåŒ…æ‹¬æ³¨å…¥å†…ç½®æ’ä»¶ã€æ³¨å†Œå„ç§æ¨¡å—å·¥å‚ã€åˆå§‹åŒ–RuleSeté›†åˆã€åŠ è½½é…ç½®çš„æ’ä»¶ç­‰</li><li>å¼€å§‹ç¼–è¯‘ï¼šæ‰§è¡Œ<code>compiler</code>å¯¹è±¡çš„<code>run</code>æ–¹æ³•</li><li>ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„<code>entry</code>æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶ï¼Œè°ƒç”¨<code>compilition.addEntry</code>å°†å…¥å£æ–‡ä»¶è½¬æ¢ä¸º<code>dependence</code>å¯¹è±¡</li></ul></li><li><p>æ„å»ºé˜¶æ®µ</p><ul><li>ç¼–è¯‘æ¨¡å—ï¼šæ ¹æ®<code>entry</code>å¯¹åº”çš„<code>dependence</code>åˆ›å»º<code>module</code>å¯¹è±¡ï¼Œè°ƒç”¨<code>loader</code>å°†æ¨¡å—è½¬ç§»ä¸ºæ ‡å‡†JSå†…å®¹ï¼Œè°ƒç”¨JSè§£é‡Šå™¨å°†å†…å®¹è½¬æ¢ä¸ºASTå¯¹è±¡ï¼Œä»ä¸­æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’è¿™ä¸ªæ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†</li><li>å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šä¸Šä¸€æ­¥é€’å½’å¤„ç†æ‰€æœ‰èƒ½è§¦è¾¾åˆ°çš„æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„å†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„<code>ä¾èµ–å…³ç³»å›¾</code></li></ul></li><li><p>ç”Ÿæˆé˜¶æ®µ</p><ul><li>è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„<code>Chunk</code>ï¼Œå†æŠŠæ¯ä¸ª<code>Chunk</code>è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ã€‚è¿™ä¸ªæ­¥éª¤æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š</li><li>å†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ</li></ul></li></ul><p>æºç ä¸­çš„ä¸€äº›é‡è¦æ–¹æ³•ï¼š</p><ul><li><strong>webpack_require</strong>: æˆ‘ä»¬åœ¨æ¨¡å—åŒ–å¼€å‘çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šä½¿ç”¨ES Moduleæˆ–è€…CommonJSè§„èŒƒå¯¼å…¥å¯¼å‡ºä»¥æ¥çš„æ¨¡å—ï¼Œwebpackåœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šç»Ÿä¸€æ›¿æ¢æˆè‡ªå·±çš„__webpack_require__æ¥å®ç°æ¨¡å—çš„å¼•å…¥å’Œå¯¼å‡ºï¼Œä»è€Œå®ç°æ¨¡å—ç¼“å­˜æœºåˆ¶ï¼Œä»¥åŠæŠ¹å¹³ä¸åŒæ¨¡å—è§„èŒƒä¹‹é—´çš„ä¸€äº›å·®å¼‚æ€§</li><li>__webpack_modules__ï¼šå­˜æ”¾äº†ç¼–è¯‘åçš„å„ä¸ªæ–‡ä»¶æ¨¡å—çš„JSå†…å®¹</li><li>__webpack_module_cache__ï¼šç”¨æ¥åšæ¨¡å—ç¼“å­˜</li></ul><h2 id="é…ç½®ä¼˜åŒ–"><a href="#é…ç½®ä¼˜åŒ–" class="headerlink" title="é…ç½®ä¼˜åŒ–"></a>é…ç½®ä¼˜åŒ–</h2><p><code>webpack</code>é…ç½®è™½ç„¶ç®€å•ï¼Œä½†æ˜¯é…ç½®é¡¹éå¸¸å¤šï¼Œæ¯ä¸ªé…ç½®é¡¹çš„å–å€¼å¯èƒ½ä¹Ÿæœ‰å¾ˆå¤šçš„é€‰æ‹©ï¼Œæ•…è€Œä¼˜åŒ–çš„ç©ºé—´å¾ˆå¤§ã€‚</p><p>è®²ä¸€äº›å¹³å¸¸ç”¨çš„å¤šçš„é…ç½®ä¼˜åŒ–ï¼š</p><ul><li><p>ä½¿ç”¨<code>webpack-bundle-analyzer</code>æ’ä»¶</p><p>  å¯ä»¥çœ‹åˆ°é¡¹ç›®å„æ¨¡å—å¤§å°ï¼Œè¿›è¡ŒæŒ‰éœ€ä¼˜åŒ–</p><p>  statè¡¨ç¤ºæ–‡ä»¶çš„è¾“å…¥å¤§å°ï¼Œparsedè¡¨ç¤ºæ–‡ä»¶çš„è¾“å‡ºå¤§å°ï¼Œgzipè¡¨ç¤ºé€šè¿‡gzipå‹ç¼©è¿è¡Œè§£æçš„åŒ…/æ¨¡å—å¤§å°</p></li><li><p>ä½¿ç”¨<code>tree shaking</code>æ“¦é™¤æ— ç”¨ä»£ç </p><p>  ç§»é™¤<code>JavaScript</code>ä¸Šä¸‹æ–‡ä¸­çš„æœªå¼•ç”¨ä»£ç </p></li><li><p>å¼€å¯<code>scope hosting</code>å‡å°‘å‡½æ•°ç”³æ˜å’Œå†…å­˜å¼€é”€</p><p>  è¿™ä¸ªåè¯ç›´è¯‘è¿‡æ¥å°±æ˜¯ä½œç”¨åŸŸæå‡ï¼Œå®ƒæŠŠæ‰€æœ‰çš„ä»£ç æŒ‰ç…§å¼•ç”¨é¡ºåºæ”¾åœ¨ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸé‡Œé¢ï¼Œé€‚å½“çš„é‡å‘½åå˜é‡é˜²æ­¢å†²çª</p></li><li><p>ä½¿ç”¨<code>splitChunksPlugin</code>åˆ†ç¦»é¡µé¢å…¬å…±æ–‡ä»¶ï¼ŒæŠ½å–å…¬å…±ä»£ç </p></li><li><p>ä½¿ç”¨å¤šè¿›ç¨‹å¤šå®ä¾‹è§£æèµ„æº</p></li><li><p>ä½¿ç”¨<code>DLLPlugin</code>å¯¹åŸºç¡€ä¾èµ–åº“è¿›è¡Œåˆ†åŒ…ï¼Œå‡å°‘ç¼–è¯‘æ¬¡æ•°</p><p>  DllPluginåŠ¨æ€é“¾æ¥åº“æ’ä»¶ï¼Œå…¶åŸç†æ˜¯æŠŠç½‘é¡µä¾èµ–çš„åŸºç¡€æ¨¡å—æŠ½ç¦»å‡ºæ¥æ‰“åŒ…åˆ°dllæ–‡ä»¶ä¸­ï¼Œå½“éœ€è¦å¯¼å…¥çš„æ¨¡å—å­˜åœ¨äºæŸä¸ªdllä¸­æ—¶ï¼Œè¿™ä¸ªæ¨¡å—ä¸å†è¢«æ‰“åŒ…ï¼Œè€Œæ˜¯å»dllä¸­è·å–ã€‚dllä¸­å¤§å¤šåŒ…å«çš„æ˜¯å¸¸ç”¨çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¦‚reactã€react-domï¼Œæ‰€ä»¥åªè¦è¿™äº›æ¨¡å—ç‰ˆæœ¬ä¸å‡çº§ï¼Œå°±åªéœ€è¢«ç¼–è¯‘ä¸€æ¬¡ã€‚</p></li></ul><p>æ€»ç»“æ¥çœ‹ï¼Œå¯ä»¥ä½¿ç”¨å¤§é‡æ’ä»¶å¯¹ç¼–è¯‘è¿‡ç¨‹è¿›è¡Œä¼˜åŒ–ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.webpackjs.com/concepts/">å®˜ç½‘</a></p><p><a href="https://juejin.cn/post/6943468761575849992">å½“é¢è¯•å®˜é—®Webpackçš„æ—¶å€™ä»–æƒ³çŸ¥é“ä»€ä¹ˆ</a></p><p><a href="https://juejin.cn/post/6949040393165996040">ä¸€æ–‡åƒé€ Webpack æ ¸å¿ƒåŸç†</a></p><p><a href="https://tsejx.github.io/webpack-guidebook/basic/build-tool/">æ„å»ºå·¥å…·</a></p><p>ä¹¦ç›®ï¼š</p><ul><li>æ·±å…¥æµ…å‡º Webpack</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;é—®é¢˜åˆ—è¡¨&quot;&gt;&lt;a href=&quot;#é—®é¢˜åˆ—è¡¨&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜åˆ—è¡¨&quot;&gt;&lt;/a&gt;é—®é¢˜åˆ—è¡¨&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;webpackæ˜¯ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜çš„ ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å®ƒæœ‰ä»€ä¹ˆäº®ç‚¹ ï¼Ÿ&lt;/li&gt;
&lt;li&gt;loader å’Œ </summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="webpack" scheme="http://example.com/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>Reactä¸­renderçš„å®ç°</title>
    <link href="http://example.com/2021/07/19/React%E4%B8%ADrender%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>http://example.com/2021/07/19/React%E4%B8%ADrender%E7%9A%84%E5%AE%9E%E7%8E%B0/</id>
    <published>2021-07-19T14:03:04.000Z</published>
    <updated>2022-01-06T08:13:59.959Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/HJY-xh/frame-course/blob/master/React/render%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/render%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0.md">ä¼ é€é—¨ </a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/HJY-xh/frame-course/blob/master/React/render%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0/render%E7%9A%84%E7%</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="React" scheme="http://example.com/tags/React/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ä¸­çš„ä½œç”¨åŸŸ</title>
    <link href="http://example.com/2021/06/11/JavaScript%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/"/>
    <id>http://example.com/2021/06/11/JavaScript%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F/</id>
    <published>2021-06-11T11:16:33.000Z</published>
    <updated>2022-01-06T01:30:53.576Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="ä½œç”¨åŸŸçš„å®šä¹‰"><a href="#ä½œç”¨åŸŸçš„å®šä¹‰" class="headerlink" title="ä½œç”¨åŸŸçš„å®šä¹‰"></a>ä½œç”¨åŸŸçš„å®šä¹‰</h2><blockquote><p>å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å€¼å’Œè¡¨è¾¾å¼åœ¨å…¶ä¸­ â€œå¯è§â€ æˆ–å¯è¢«è®¿é—®åˆ°çš„ä¸Šä¸‹æ–‡ã€‚å¦‚æœä¸€ä¸ªå˜é‡æˆ–è€…å…¶ä»–è¡¨è¾¾å¼ä¸ â€œåœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­â€ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸å¯ç”¨çš„ã€‚ä½œç”¨åŸŸä¹Ÿå¯ä»¥æ ¹æ®ä»£ç å±‚æ¬¡åˆ†å±‚ï¼Œä»¥ä¾¿å­ä½œç”¨åŸŸå¯ä»¥è®¿é—®çˆ¶ä½œç”¨åŸŸï¼Œé€šå¸¸æ˜¯æŒ‡æ²¿ç€é“¾å¼çš„ä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼Œè€Œä¸èƒ½ä»çˆ¶ä½œç”¨åŸŸå¼•ç”¨å­ä½œç”¨åŸŸä¸­çš„å˜é‡å’Œå¼•ç”¨ã€‚</p></blockquote><p>ä»ä¸Šé¢çš„å®šä¹‰å‡ºå‘ï¼Œå¯ä»¥ç®€å•æ¦‚æ‹¬ä¸ºï¼šä½œç”¨åŸŸå†³å®šäº†å˜é‡ä¸å‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œå³<code>ä½œç”¨åŸŸæ§åˆ¶ç€å˜é‡ä¸å‡½æ•°çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸ</code>ã€‚</p><h2 id="ä½œç”¨åŸŸåˆ†ç±»"><a href="#ä½œç”¨åŸŸåˆ†ç±»" class="headerlink" title="ä½œç”¨åŸŸåˆ†ç±»"></a>ä½œç”¨åŸŸåˆ†ç±»</h2><p>ä½œç”¨åŸŸåˆ†ä¸ºä¸¤ç§</p><ul><li>å…¨å±€ä½œç”¨åŸŸ</li><li>å‡½æ•°ä½œç”¨åŸŸ</li></ul><h3 id="å…¨å±€ä½œç”¨åŸŸç‰¹æ€§"><a href="#å…¨å±€ä½œç”¨åŸŸç‰¹æ€§" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸç‰¹æ€§"></a>å…¨å±€ä½œç”¨åŸŸç‰¹æ€§</h3><ul><li>å…¨å±€ä½œç”¨åŸŸåœ¨å½“ JavaScript å¼€å§‹è¦è§£é‡Šæ‰§è¡Œä»£ç çš„æ—¶å€™è¢«åˆ›å»ºï¼Œæ•´ä¸ªç¨‹åºç»“æŸçš„æ—¶å€™è¢«é”€æ¯</li><li>å…¨å±€å¯¹è±¡åœ¨ä¸åŒçš„å®¿ä¸»ç¯å¢ƒä¸‹æ˜¯ä¸åŒçš„ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œå…¨å±€å¯¹è±¡å³ä¸º<code>window</code>ï¼Œä»£è¡¨ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œç”±æµè§ˆå™¨åˆ›å»ºï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨</li><li>å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜çš„å˜é‡å’Œå‡½æ•°ä¼šä½œä¸º<code>window</code>å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ä¿å­˜ï¼Œä½œç”¨åŸŸä¸ºå…¨å±€ï¼Œåœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½è®¿é—®åˆ°</li></ul><h3 id="å±€éƒ¨ä½œç”¨åŸŸç‰¹æ€§"><a href="#å±€éƒ¨ä½œç”¨åŸŸç‰¹æ€§" class="headerlink" title="å±€éƒ¨ä½œç”¨åŸŸç‰¹æ€§"></a>å±€éƒ¨ä½œç”¨åŸŸç‰¹æ€§</h3><ul><li>è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ä½œç”¨åŸŸè¢«åˆ›å»ºï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå…¶ä½œç”¨åŸŸè¢«é”€æ¯</li><li>æ¯è°ƒç”¨ä¸€æ¬¡å‡½æ•°å°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ä½œç”¨åŸŸï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„</li><li>åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­å¯ä»¥è®¿é—®åˆ°å…¨å±€ä½œç”¨åŸŸçš„å˜é‡ï¼Œåœ¨å‡½æ•°å¤–æ— æ³•ç›´æ¥è®¿é—®åˆ°å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡</li><li>åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­è®¿é—®å˜é‡ï¼Œä¼šç°åœ¨è‡ªèº«ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å›åˆ°å‡½æ•°çš„ä¸Šä¸€çº§ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œä¸€ç›´åˆ°å…¨å±€ä½œç”¨åŸŸ</li></ul><h2 id="ä½œç”¨åŸŸé“¾-Scope-Chain"><a href="#ä½œç”¨åŸŸé“¾-Scope-Chain" class="headerlink" title="ä½œç”¨åŸŸé“¾(Scope Chain)"></a>ä½œç”¨åŸŸé“¾(Scope Chain)</h2><p>å½“æŸ¥æ‰¾å˜é‡çš„æ—¶å€™ï¼Œä¼šå…ˆä»å½“å‰ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä»çˆ¶çº§(è¯æ³•å±‚é¢ä¸Šçš„çˆ¶çº§)æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å¯¹è±¡ã€‚è¿™æ ·ç”±å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ„æˆçš„é“¾è¡¨å°±å«åšä½œç”¨åŸŸé“¾ã€‚</p><p>æ€»ç»“ï¼šJavascript å¼•æ“ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾(Scope Chain) å¯»æ‰¾éœ€è¦çš„å˜é‡ã€‚</p><h2 id="ä½œç”¨åŸŸçš„æ·±å±‚æ¬¡ç†è§£"><a href="#ä½œç”¨åŸŸçš„æ·±å±‚æ¬¡ç†è§£" class="headerlink" title="ä½œç”¨åŸŸçš„æ·±å±‚æ¬¡ç†è§£"></a>ä½œç”¨åŸŸçš„æ·±å±‚æ¬¡ç†è§£</h2><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h3><p>JavaScript å¼•æ“åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution context stackï¼ŒECSï¼‰æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡</p><ul><li>åœ¨æ‰§è¡Œå‡½æ•°å‰ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å†…éƒ¨å¯¹è±¡ AOï¼ˆä½œç”¨åŸŸï¼‰</li><li>è¿™ä¸ªå†…éƒ¨å¯¹è±¡æ—¶é¢„ç¼–è¯‘æ—¶è¢«åˆ›å»ºå‡ºæ¥çš„ï¼Œåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šå…ˆè¿›è¡Œé¢„ç¼–è¯‘</li><li>åœ¨å…¨å±€ä»£ç æ‰§è¡Œå‰ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å¯¹è±¡ GO</li></ul><h2 id="é¢„ç¼–è¯‘"><a href="#é¢„ç¼–è¯‘" class="headerlink" title="é¢„ç¼–è¯‘"></a>é¢„ç¼–è¯‘</h2><h3 id="å‡½æ•°ä½œç”¨åŸŸé¢„ç¼–è¯‘"><a href="#å‡½æ•°ä½œç”¨åŸŸé¢„ç¼–è¯‘" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸé¢„ç¼–è¯‘"></a>å‡½æ•°ä½œç”¨åŸŸé¢„ç¼–è¯‘</h3><ul><li>åˆ›å»º AO å¯¹è±¡</li><li>æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œå°†å‡½æ•°å†…çš„å˜é‡å’Œå½¢å‚åä½œä¸º AO å¯¹è±¡çš„å±æ€§åï¼Œå€¼ä¸º undefined</li><li>å°†å®å‚å’Œå½¢å‚ç›¸ç»Ÿä¸€</li><li>åœ¨å‡½æ•°ä½“ä¸­æ‰¾å‡½æ•°å£°æ˜ï¼Œå€¼èµ‹äºˆå‡½æ•°ä½“</li></ul><h3 id="å…¨å±€ä½œç”¨åŸŸé¢„ç¼–è¯‘"><a href="#å…¨å±€ä½œç”¨åŸŸé¢„ç¼–è¯‘" class="headerlink" title="å…¨å±€ä½œç”¨åŸŸé¢„ç¼–è¯‘"></a>å…¨å±€ä½œç”¨åŸŸé¢„ç¼–è¯‘</h3><ul><li>åˆ›å»º GO å¯¹è±¡</li><li>æ‰¾å˜é‡å£°æ˜ï¼Œå°†å˜é‡åä½œä¸º GO å¯¹è±¡çš„å±æ€§åï¼Œå€¼ä¸º undefined</li><li>æ‰¾å‡½æ•°å£°æ˜ï¼Œå€¼å€¼èµ‹äºˆå‡½æ•°ä½“</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Scope">Scopeï¼ˆä½œç”¨åŸŸï¼‰</a></p><p><a href="https://medium.com/itsems-frontend/javascript-scope-and-scope-chain-ca17a1068c96">Javascript çš„ä½œç”¨åŸŸ (Scope) èˆ‡ç¯„åœéˆ (Scope Chain)ï¼šå¾€å¤–æ‰¾</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/3">JavaScript æ·±å…¥ä¹‹è¯æ³•ä½œç”¨åŸŸå’ŒåŠ¨æ€ä½œç”¨åŸŸ</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/4">JavaScript æ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/6">JavaScript æ·±å…¥ä¹‹ä½œç”¨åŸŸé“¾</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä½œç”¨åŸŸçš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#ä½œç”¨åŸŸçš„å®šä¹‰&quot; class=&quot;header</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°:Javascriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼ˆå››ï¼‰</title>
    <link href="http://example.com/2021/04/16/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E5%9B%9B%EF%BC%89/"/>
    <id>http://example.com/2021/04/16/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E5%9B%9B%EF%BC%89/</id>
    <published>2021-04-16T02:13:29.000Z</published>
    <updated>2021-08-08T03:25:21.967Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h1 id="å››-å‡½æ•°å¼ç¼–ç¨‹â€”â€”é’ˆå¯¹å¤æ‚åº”ç”¨çš„è®¾è®¡æ¨¡å¼"><a href="#å››-å‡½æ•°å¼ç¼–ç¨‹â€”â€”é’ˆå¯¹å¤æ‚åº”ç”¨çš„è®¾è®¡æ¨¡å¼" class="headerlink" title="å››.å‡½æ•°å¼ç¼–ç¨‹â€”â€”é’ˆå¯¹å¤æ‚åº”ç”¨çš„è®¾è®¡æ¨¡å¼"></a>å››.å‡½æ•°å¼ç¼–ç¨‹â€”â€”é’ˆå¯¹å¤æ‚åº”ç”¨çš„è®¾è®¡æ¨¡å¼</h1><p>ï¼ˆè¯»ä¹¦ç¬”è®°ï¼šJavaScriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼‰</p><p>ä»Šæ—¥åˆ†äº«</p><ul><li>å‘½ä»¤å¼é”™è¯¯å¤„ç†å¼‚å¸¸æ–¹å¼çš„é—®é¢˜</li><li>ä½¿ç”¨å®¹å™¨ï¼Œä»¥é˜²è®¿é—®æ— æ•ˆæ•°æ®</li><li>ç”¨ Functor çš„å®ç°æ¥åšæ•°æ®è½¬æ¢</li></ul><blockquote><p>ç©ºå¼•ç”¨æ˜¯ä¸€ä¸ªä»·å€¼æ•°åäº¿ç¾å…ƒçš„é”™è¯¯ã€‚<br>â€”â€”Tony Hoareï¼ŒInfoQ</p></blockquote><h2 id="å‘½ä»¤å¼é”™è¯¯å¤„ç†çš„ä¸è¶³"><a href="#å‘½ä»¤å¼é”™è¯¯å¤„ç†çš„ä¸è¶³" class="headerlink" title="å‘½ä»¤å¼é”™è¯¯å¤„ç†çš„ä¸è¶³"></a>å‘½ä»¤å¼é”™è¯¯å¤„ç†çš„ä¸è¶³</h2><p>åœ¨è®¸å¤šæƒ…å†µä¸‹éƒ½ä¼šå‘ç”Ÿ JavaScript é”™è¯¯ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸æœåŠ¡å™¨é€šä¿¡æ—¶ï¼Œæˆ–æ˜¯åœ¨è¯•å›¾è®¿é—®ä¸€ä¸ªä¸º null å¯¹è±¡çš„å±æ€§æ—¶ã€‚</p><p>å› æ­¤ï¼Œå¼€å‘è€…åœ¨ç¼–ç¨‹æ—¶æ€»æ˜¯éœ€è¦åšå¥½æœ€åçš„æ‰“ç®—ã€‚åœ¨å‘½ä»¤å¼ç¼–ç¨‹ä¸–ç•Œä¸­ï¼Œå¼‚å¸¸æ˜¯é€šè¿‡ try-catch å¤„ç†çš„ã€‚</p><h3 id="ç”¨-try-catch-å¤„ç†é”™è¯¯"><a href="#ç”¨-try-catch-å¤„ç†é”™è¯¯" class="headerlink" title="ç”¨ try-catch å¤„ç†é”™è¯¯"></a>ç”¨ try-catch å¤„ç†é”™è¯¯</h3><p>JavaScript çš„å¼‚å¸¸å¤„ç†æœºåˆ¶é€šå¸¸ä¼šä»¥å¤§å¤šæ•°ç°ä»£è¯­è¨€éƒ½æœ‰çš„ try-catch è¯­å¥æ¥å®Œæˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">// å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸çš„ä»£ç </span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ERROR&quot;</span> + e.message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥è¯¥è¯­å¥åŒ…è£¹ä½ä½ è®¤ä¸ºä¸å¤ªå®‰å…¨çš„ä»£ç ï¼Œä¸€æ—¦æœ‰å¼‚å¸¸å‘ç”Ÿï¼ŒJavaScript ä¼šç«‹å³ç»ˆæ­¢ç¨‹åºï¼Œå¹¶åˆ›å»ºå¯¼è‡´è¯¥é—®é¢˜çš„æŒ‡ä»¤çš„å‡½æ•°è°ƒç”¨å †æ ˆè·Ÿè¸ªã€‚æœ‰å…³é”™è¯¯çš„å…·ä½“ç»†èŠ‚ï¼Œå¦‚æ¶ˆæ¯ã€è¡Œå·å’Œæ–‡ä»¶åï¼Œè¢«å¡«å……åˆ° Error ç±»å‹çš„å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ é€’åˆ° catch å—ä¸­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> student = findStudentById(<span class="string">&quot;666&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ERROR&quot;</span> + e.message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ try-catch åçš„ä»£ç å°†ä¸èƒ½ç»„åˆæˆ–è¿åœ¨ä¸€èµ·ï¼Œå¯¹äºå‡½æ•°å¼ç¼–ç¨‹æ¥è¯´ï¼Œè¿™å°†ä¼šä¸¥é‡å½±å“ä»£ç è®¾è®¡ã€‚</p><h3 id="å‡½æ•°å¼ç¨‹åºä¸åº”æŠ›å‡ºå¼‚å¸¸"><a href="#å‡½æ•°å¼ç¨‹åºä¸åº”æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="å‡½æ•°å¼ç¨‹åºä¸åº”æŠ›å‡ºå¼‚å¸¸"></a>å‡½æ•°å¼ç¨‹åºä¸åº”æŠ›å‡ºå¼‚å¸¸</h3><p>å‘½ä»¤å¼çš„ JavaScript ä»£ç ç»“æ„æœ‰å¾ˆå¤šç¼ºé™·ï¼Œè€Œä¸”ä¹Ÿä¼šä¸å‡½æ•°å¼çš„è®¾è®¡æœ‰å…¼å®¹æ€§é—®é¢˜ã€‚ä¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>éš¾ä»¥ä¸å…¶ä»–å‡½æ•°ç»„åˆæˆ–é“¾æ¥</li><li>è¿åäº†å¼•ç”¨é€æ˜æ€§ï¼Œå› ä¸ºæŠ›å‡ºå¼‚å¸¸ä¼šå¯¼è‡´å‡½æ•°è°ƒç”¨å‡ºç°å¦ä¸€å‡ºå£ï¼Œæ‰€ä»¥ä¸èƒ½ç¡®ä¿å•ä¸€çš„å¯é¢„æµ‹çš„è¿”å›å€¼</li><li>ä¼šå¼•èµ·å‰¯ä½œç”¨ï¼Œå› ä¸ºå¼‚å¸¸ä¼šåœ¨å‡½æ•°è°ƒç”¨ä¹‹å¤–å¯¹å †æ ˆå¼•å‘ä¸å¯é¢„æ–™çš„å½±å“</li><li>è¿åéå±€åŸŸæ€§çš„åŸåˆ™ï¼Œå› ä¸ºç”¨äºæ¢å¤å¼‚å¸¸çš„ä»£ç ä¸åŸå§‹çš„å‡½æ•°è°ƒç”¨æ¸è¡Œæ¸è¿œã€‚å½“å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå‡½æ•°ç¦»å¼€å±€éƒ¨æ ˆä¸ç¯å¢ƒ</li><li>ä¸èƒ½åªå…³æ³¨å‡½æ•°çš„è¿”å›å€¼ï¼Œè°ƒç”¨è€…éœ€è¦è´Ÿè´£å£°æ˜ catch å—ä¸­çš„å¼‚å¸¸åŒ¹é…ç±»å‹æ¥ç®¡ç†ç‰¹å®šçš„å¼‚å¸¸</li><li>å½“æœ‰å¤šä¸ªå¼‚å¸¸æ¡ä»¶æ—¶ä¼šå‡ºç°åµŒå¥—çš„å¼‚å¸¸å¤„ç†å—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;oops&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&quot;inner&quot;</span>, ex.message);</span><br><span class="line">    <span class="keyword">throw</span> ex;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;finally&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (ex) &#123;</span><br><span class="line">  <span class="built_in">console</span>.error(<span class="string">&quot;outer&quot;</span>, ex.message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// &quot;inner&quot; &quot;oops&quot;</span></span><br><span class="line"><span class="comment">// &quot;finally&quot;</span></span><br><span class="line"><span class="comment">// &quot;outer&quot; &quot;oops&quot;</span></span><br></pre></td></tr></table></figure><p>é‚£å‡½æ•°å¼ç¼–ç¨‹çœŸçš„ä¸éœ€è¦æŠ›å‡ºå¼‚å¸¸å—ï¼Ÿ</p><p>è¯¥ä½œè€…ä¸è¿™ä¹ˆè®¤ä¸ºã€‚åœ¨å®è·µä¸­ï¼Œå¾ˆå¤šå› ç´ æ˜¯åœ¨æ§åˆ¶èŒƒå›´ä¹‹å¤–çš„ï¼Œè€Œä¸”ä¾èµ–åº“ä¹Ÿæœ‰æŠ›å‡ºå¼‚å¸¸çš„å¯èƒ½ã€‚å¯¹äºæŸäº›è¾¹ç¼˜æƒ…å†µï¼Œä½¿ç”¨å¼‚å¸¸å¯èƒ½é¢‡æœ‰æ•ˆç‡ã€‚å¼‚å¸¸åº”è¯¥ç”±ä¸€ä¸ªåœ°æ–¹æŠ›å‡ºï¼Œè€Œä¸åº”è¯¥éšå¤„å¯è§ã€‚</p><h3 id="ç©ºå€¼ï¼ˆnullï¼‰æ£€æŸ¥é—®é¢˜"><a href="#ç©ºå€¼ï¼ˆnullï¼‰æ£€æŸ¥é—®é¢˜" class="headerlink" title="ç©ºå€¼ï¼ˆnullï¼‰æ£€æŸ¥é—®é¢˜"></a>ç©ºå€¼ï¼ˆnullï¼‰æ£€æŸ¥é—®é¢˜</h3><p>å¦ä¸€ç§è·ŸæŠ›å‡ºå¼‚å¸¸ä¸€æ ·çƒ¦äººçš„é”™è¯¯æ˜¯ null è¿”å›å€¼ã€‚è™½ç„¶ null è¿”å›å€¼ä¿è¯äº†å‡½æ•°çš„å‡ºå£åªæœ‰ä¸€ä¸ªï¼Œä½†æ˜¯ä¹Ÿå¹¶æ²¡æœ‰å¥½åˆ°å“ªå»â€”â€”ç»™ä½¿ç”¨å‡½æ•°çš„ç”¨æˆ·å¸¦æ¥éœ€è¦ null æ£€æŸ¥çš„è´Ÿæ‹…ã€‚æ¯”å¦‚è·å–å­¦ç”Ÿåœ°å€ä¸å›½å®¶çš„ getCountry å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserCountry</span>(<span class="params">student</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> school = student.getSchool();</span><br><span class="line">  <span class="keyword">if</span> (school !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> addr = school.getAddress();</span><br><span class="line">    <span class="keyword">if</span> (addr !== <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> country = addr.getCountry();</span><br><span class="line">      <span class="keyword">return</span> country;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;Error extracting country info&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°å¾ˆå®¹æ˜“å®ç°ï¼Œä½†æ˜¯éœ€è¦å¤§é‡çš„åˆ¤ç©ºæ£€æŸ¥ã€‚ä¸ç®¡æ˜¯ä½¿ç”¨ try-catch è¿˜æ˜¯ null æ£€æŸ¥ï¼Œéƒ½æ˜¯è¢«åŠ¨çš„è§£å†³æ–¹å¼ã€‚</p><h2 id="ä¸€ç§æ›´å¥½çš„è§£å†³æ–¹æ¡ˆâ€”â€”Functor"><a href="#ä¸€ç§æ›´å¥½çš„è§£å†³æ–¹æ¡ˆâ€”â€”Functor" class="headerlink" title="ä¸€ç§æ›´å¥½çš„è§£å†³æ–¹æ¡ˆâ€”â€”Functor"></a>ä¸€ç§æ›´å¥½çš„è§£å†³æ–¹æ¡ˆâ€”â€”Functor</h2><p>å‡½æ•°å¼ä»¥ä¸€ç§å®Œå…¨ä¸åŒçš„æ–¹æ³•åº”å¯¹è½¯ä»¶ç³»ç»Ÿçš„é”™è¯¯å¤„ç†ã€‚å…¶æ€æƒ³è¯´èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„å®¹å™¨ï¼Œæ¥å­˜æ”¾å±é™©ä»£ç ,æ¯”æ–¹è¯´ try-catch å°±å¯ä»¥çœ‹ä½œå­˜æ”¾ç€ä¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°çš„ä¿é™©ç®±ã€‚è€Œä¿é™©ç®±å¯ä»¥çœ‹ä½œä¸€ç§å®¹å™¨ã€‚</p><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä»ç„¶ä¼šåŒ…è£¹è¿™äº›å±é™©ä»£ç ï¼Œä½†å¯ä»¥ä¸ç”¨ try-catch å—ã€‚ä½¿ç”¨å‡½æ•°å¼æ•°æ®ç±»å‹æ˜¯è§£å†³ä¸çº¯æ€§çš„ä¸»è¦æ‰‹æ®µã€‚ä¸è¿‡ï¼Œé¦–å…ˆä»æœ€ç®€å•çš„ç±»å‹å¼€å§‹ã€‚</p><h3 id="åŒ…è£¹ä¸å®‰å…¨çš„å€¼"><a href="#åŒ…è£¹ä¸å®‰å…¨çš„å€¼" class="headerlink" title="åŒ…è£¹ä¸å®‰å…¨çš„å€¼"></a>åŒ…è£¹ä¸å®‰å…¨çš„å€¼</h3><p>å°†å€¼åŒ…è£¹èµ·æ¥æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªåŸºæœ¬è®¾è®¡æ¨¡å¼ï¼Œå› ä¸ºå®ƒç›´æ¥åœ°ä¿è¯äº†å€¼ä¸ä¼šè¢«ä»»æ„ç¯¡æ”¹ã€‚è¿™æœ‰ç‚¹åƒæŠŠå€¼ä¿æŠ¤èµ·æ¥ï¼Œåªèƒ½é€šè¿‡ map æ“ä½œæ¥è®¿é—®è¯¥å®¹å™¨ä¸­çš„å€¼ã€‚å®é™…ä¸Šæ•°ç»„çš„ mapï¼Œè€Œæ•°ç»„ä¹Ÿæ˜¯å€¼çš„å®¹å™¨ã€‚æˆ‘ä»¬å°†ç»§ç»­æ‰©å±•æ›´å¹¿ä¹‰çš„ map çš„æ¦‚å¿µã€‚</p><p>å…¶å®ï¼Œå¯ä»¥æ˜ å°„å‡½æ•°åˆ°æ›´å¤šç±»å‹ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•°ç»„ã€‚åœ¨å‡½æ•°å¼ JavaScript ä¸­ï¼Œmap åªä¸è¿‡æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”±äºå¼•ç”¨é€æ˜æ€§ï¼Œåªè¦è¾“å…¥ç›¸åŒï¼Œmap æ°¸è¿œä¼šè¿”å›ç›¸åŒçš„ç»“æœã€‚å½“ç„¶ï¼Œè¿˜å¯ä»¥è®¤ä¸º map æ˜¯å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼å˜æ¢å®¹å™¨å†…çš„å€¼çš„é€”å¾„ã€‚æ¯”å¦‚ï¼Œå¯¹äºæ•°ç»„ï¼Œå°±å¯ä»¥é€šè¿‡ map è½¬æ¢å€¼ï¼Œè¿”å›åŒ…å«æ–°å€¼çš„æ–°æ•°ç»„ã€‚</p><p>ä¸‹é¢ç”¨ Wrapper è§£é‡Šä¸€ä¸‹è¿™ä¸ªæ¦‚å¿µ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span> &#123; <span class="comment">// å­˜å‚¨ä»»æ„ç±»å‹å€¼çš„ç®€å•ç±»å‹</span></span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// map ::  A -&gt; B</span></span><br><span class="line">  <span class="function"><span class="title">map</span>(<span class="params">f</span>)</span> &#123; <span class="comment">// ç”¨ä¸€ä¸ªå‡½æ•°æ¥ map è¯¥ç±»å‹ï¼ˆå°±åƒæ•°ç»„ä¸€æ ·ï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> f(<span class="built_in">this</span>.value);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Wrapper (&#x27;</span> + <span class="built_in">this</span>.value + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// wrap :: A -&gt; Wrapper(A)</span></span><br><span class="line"><span class="keyword">const</span> wrap = <span class="function">(<span class="params">val</span>) =&gt;</span> <span class="keyword">new</span> Wrapper(val); <span class="comment">// èƒ½å¤Ÿæ ¹æ®å€¼å¿«é€Ÿåˆ›å»º Wrapper çš„å¸®åŠ©å‡½æ•°</span></span><br></pre></td></tr></table></figure><p>è¦è®¿é—®åŒ…è£¹å†…çš„å¯¹è±¡ï¼Œå”¯ä¸€åŠæ³•æ˜¯ map ä¸€ä¸ª Ramda çš„ identity å‡½æ•°ï¼ˆæ³¨æ„ï¼ŒWrapper ç±»å‹å¹¶æ²¡æœ‰ get æ–¹æ³•ï¼‰ã€‚è™½ç„¶ JavaScript å…è®¸ç”¨æˆ·æ–¹ä¾¿åœ°è®¿é—®è¿™ä¸ªå€¼ï¼Œä½†é‡è¦çš„æ˜¯ï¼Œä¸€æ—¦è¯¥å€¼è¿›å…¥å®¹å™¨ï¼Œå°±ä¸åº”è¯¥èƒ½è¢«ç›´æ¥è·å–æˆ–è½¬åŒ–ï¼ˆå°±åƒä¸€ä¸ªè™šæ‹Ÿçš„å±éšœï¼‰ï¼Œå¦‚å›¾1 æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/08/08/1FiDH4MEVbfOJS9.png"></p><p>Wrapper ç±»å‹ä½¿ç”¨ map å®‰å…¨åœ°è®¿é—®å’Œæ“ä½œå€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šè¿‡æ˜ å°„ identity å‡½æ•°å°±èƒ½åœ¨å®¹å™¨ä¸­æå–å€¼ã€‚</p><p>ä¸‹é¢æ˜¯è·å–å€¼çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wrappedValue = wrap(<span class="string">&#x27;Get Functional&#x27;</span>);</span><br><span class="line">wrappedValue.map(R.identity); <span class="comment">// &#x27;Get Functional&#x27; &lt;--- å€¼çš„æå–</span></span><br></pre></td></tr></table></figure><p>å…¶å®è¿˜å¯ä»¥æ˜ å°„ä»»ä½•å‡½æ•°åˆ°è¯¥å®¹å™¨ï¼Œæ¯”å¦‚å˜æ¢è¯¥å€¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrappedValue.map(R.toUpper); <span class="comment">// &#x27;GET FUNCTIONAL&#x27; &lt;--- å¯¹å†…éƒ¨å€¼åº”ç”¨å‡½æ•°</span></span><br></pre></td></tr></table></figure><p>å¦‚æ­¤ä¸€æ¥ï¼Œæ‰€æœ‰å¯¹å€¼çš„æ“ä½œéƒ½å¿…é¡»å€ŸåŠ© Wrapper.map â€œä¼¸å…¥â€å®¹å™¨ï¼Œä»è€Œä½¿å€¼å¾—åˆ°ä¸€å®šçš„ä¿æŠ¤ã€‚ä½†æ˜¯ null æˆ–è€… undefined çš„æƒ…å†µä»ç„¶å­˜åœ¨ï¼Œè¿˜æ˜¯éœ€è¦åœ¨æ˜ å°„çš„å‡½æ•°ä¸­å»å¤„ç†ã€‚æ¥ä¸‹æ¥çœ‹çœ‹è§£å†³çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wrappedNull = wrap(<span class="literal">null</span>);</span><br><span class="line">wrappedNull.map(doWork); <span class="comment">// doWork è¢«èµ‹äºˆäº†ç©ºå€¼æ£€æŸ¥çš„è´£ä»»</span></span><br></pre></td></tr></table></figure><p>å°±åƒè¿™ä¸ªä¾‹å­ï¼Œç”±äºç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œå®Œå…¨å¯ä»¥äº¤ç»™ Wrapper ç±»å‹æ¥åšé”™è¯¯å¤„ç†ã€‚æ¢å¥è¯è¯´ï¼Œå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰ï¼Œæ£€æŸ¥ nullã€ç©ºå­—ç¬¦ä¸²æˆ–è€…è´Ÿæ•°ï¼Œç­‰ç­‰ã€‚å› æ­¤ï¼ŒWrapper.map çš„è¯­ä¹‰å°±ç”±å…·ä½“çš„ Wrapper ç±»å‹æ¥ç¡®å®šã€‚</p><p>ç»§ç»­æ¥çœ‹çœ‹ map çš„å˜ç§â€”â€”fmapï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fmap :: (A -&gt; B) -&gt; Wrapper[A] -&gt; Wrapper[B]</span></span><br><span class="line">Wrapper.prototype.fmap = <span class="function"><span class="keyword">function</span> (<span class="params">f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> wrap(f(<span class="built_in">this</span>.valve)); <span class="comment">// &lt;--- å…ˆå°†è¿”å›å€¼åŒ…è£¹åˆ°å®¹å™¨ä¸­ï¼Œå†è¿”å›ç»™è°ƒç”¨è€…</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>fmap çŸ¥é“å¦‚ä½•åœ¨ä¸Šä¸‹æ–‡ä¸­åº”ç”¨å‡½æ•°å€¼ã€‚å®ƒä¼šå…ˆæ‰“å¼€è¯¥å®¹å™¨ï¼Œåº”ç”¨å‡½æ•°åˆ°å€¼ï¼Œæœ€åæŠŠè¿”å›çš„å€¼åŒ…è£¹åˆ°ä¸€ä¸ªæ–°çš„åŒç±»å‹å®¹å™¨ä¸­ã€‚æ‹¥æœ‰è¿™ç§å‡½æ•°çš„ç±»å‹ç§°ä¸º Functorã€‚</strong></p><h3 id="Functor-å®šä¹‰"><a href="#Functor-å®šä¹‰" class="headerlink" title="Functor å®šä¹‰"></a>Functor å®šä¹‰</h3><p>ä»æœ¬è´¨ä¸Šè®²ï¼ŒFunctor åªæ˜¯ä¸€ä¸ªå¯ä»¥å°†å‡½æ•°åº”ç”¨åˆ°å®ƒåŒ…è£¹çš„å€¼ä¸Šï¼Œå¹¶å°†ç»“æœå†åŒ…è£¹èµ·æ¥çš„æ•°æ®ç»“æ„ã€‚<br>ä¸‹é¢æ˜¯ fmap çš„ä¸€èˆ¬å®šä¹‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmap :: (A -&gt; B) -&gt; Wrapper(A) -&gt; Wrapper(B) <span class="comment">// &lt;--- Wrapper å¯ä»¥æ˜¯ä»»ä½•å®¹å™¨ç±»å‹</span></span><br></pre></td></tr></table></figure><p>fmap å‡½æ•°æ¥å—ä¸€ä¸ªä» A-&gt;B çš„å‡½æ•°ï¼Œä»¥åŠä¸€ä¸ª Wrapper(A) Functorï¼Œç„¶åè¿”å›åŒ…è£¹ç€ç»“æœçš„æ–° Functor â€”â€” Wrapper(B)ã€‚å›¾ 2 æ˜¾ç¤ºäº†ç”¨ increment å‡½æ•°ä½œä¸º A-&gt;B çš„æ˜ å°„å‡½æ•°ï¼Œåªæ˜¯è¿™é‡Œçš„ A å’Œ B ä¸ºåŒä¸€ç±»å‹ã€‚</p><p><img src="https://i.loli.net/2021/08/08/WLrdu1SBHiDy735.png"></p><p>å›¾ 2 Wrapper å†…çš„å€¼ 1ï¼Œåœ¨åº”ç”¨å‡½æ•° increment åå†æ¬¡åŒ…è£¹æˆæ–°çš„å®¹å™¨ã€‚</p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>fmap åœ¨æ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‰¯æœ¬ï¼Œæ˜¯ä¸å¯å˜çš„ã€‚</strong></p><p>åœ¨å¼€å§‹è§£å†³æ›´å®é™…çš„é—®é¢˜ä¹‹å‰ï¼Œå†æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚è¯•ç”¨ Functor æ¥å®Œæˆç®€å•çš„ 2 + 3 = 5ã€‚é¦–å…ˆæŸ¯é‡ŒåŒ– add å‡½æ•°ï¼Œè¿™æ ·å°±å¾—åˆ°äº† plus3 çš„å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> plus = R.curry(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b);</span><br><span class="line"><span class="keyword">const</span> plus3 = plus(<span class="number">3</span>);</span><br></pre></td></tr></table></figure><p>ç°åœ¨å¯ä»¥æŠŠæ•°å­— 2 æ”¾åˆ° Wrapper ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> two = wrap(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>å†è°ƒç”¨ fmap æŠŠ plus3 æ˜ å°„åˆ°å®¹å™¨ä¸Šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> five = two.fmap(plus3); <span class="comment">//-&gt; Wrapper(5) &lt;--- è¿”å›ä¸€ä¸ªå…·æœ‰ä¸Šä¸‹æ–‡åŒ…è£¹çš„å€¼</span></span><br><span class="line">five.map(R.identity); <span class="comment">//-&gt; 5</span></span><br></pre></td></tr></table></figure><p>fmap è¿”å›åŒæ ·ç±»å‹çš„ç»“æœï¼Œå¯ä»¥é€šè¿‡æ˜ å°„ R.identity æ¥æå–å®ƒçš„å€¼ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå€¼ä¼šä¸€ç›´åœ¨å®¹å™¨ä¸­ï¼Œå› æ­¤å¯ä»¥ fmap ä»»æ„æ¬¡å‡½æ•°æ¥è½¬æ¢å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">two.fmap(plus3).fmap(plus10); <span class="comment">//-&gt; Wrapper(15)</span></span><br></pre></td></tr></table></figure><p>å…‰çœ‹ä»£ç å¯èƒ½ä¸å¤Ÿç›´è§‚ï¼Œå›¾ 3 æ›´æ¸…æ¥šåœ°è§£é‡Šäº†å¦‚ä½• fmapplus3ã€‚</p><p><img src="https://i.loli.net/2021/08/08/XUa6k7sG4vZ81rS.png"></p><p>å›¾ 3 Wrapper å®¹å™¨ä¸­çš„å€¼æ˜¯ 2ã€‚Functor ä¼šå°†å…¶æ‰“å¼€ï¼Œåº”ç”¨ fmap çš„å‡½æ•°ï¼Œå†åŒ…è£¹å‡½æ•°çš„è¿”å›å€¼åˆ°æ–°çš„å®¹å™¨ä¸­ã€‚<br>fmap å‡½æ•°ä¼šè¿”å›åŒæ ·çš„ç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥é“¾å¼åœ°ç»§ç»­ä½¿ç”¨ fmapã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> two = wrap(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">const</span> isFive = two.fmap(plus3).fmap(R.equals(<span class="number">5</span>)); <span class="comment">//-&gt; Wrapper(true) &lt;--- è¿”å›ä¸€ä¸ªå…·æœ‰ä¸Šä¸‹æ–‡åŒ…è£¹çš„å€¼</span></span><br></pre></td></tr></table></figure><p>è¿™ç§é“¾å¼çš„å‡½æ•°è°ƒç”¨æ˜¯ä¸æ˜¯éå¸¸çœ¼ç†Ÿï¼Ÿå…¶å®å¾ˆå¤šäººä¸€ç›´åœ¨ä½¿ç”¨ Functor å´æ²¡æœ‰æ„è¯†åˆ°è€Œå·²ã€‚æ¯”å¦‚ Arrayçš„ map å’Œ filter æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map :: (A -&gt; B) -&gt; <span class="built_in">Array</span>(A) -&gt; <span class="built_in">Array</span>(B)</span><br><span class="line"><span class="attr">filter</span> :: (A -&gt; <span class="built_in">Boolean</span>) -&gt; <span class="built_in">Array</span>(A) -&gt; <span class="built_in">Array</span>(A)</span><br></pre></td></tr></table></figure><p>map å’Œ filter éƒ½è¿”å›åŒæ ·ç±»å‹çš„ Functorï¼Œå› æ­¤å¯ä»¥ä¸æ–­åœ°é“¾æ¥ã€‚æ¥çœ‹çœ‹å¦ä¸€ä¸ª Functorï¼šcomposeã€‚<br>æ­£å¦‚ä¹‹å‰åˆ†äº«æåˆ°çš„ï¼Œè¿™æ˜¯ä»ä¸€ä¸ªå‡½æ•°åˆ°å¦ä¸€ä¸ªå‡½æ•°çš„æ˜ å°„ï¼ˆä¹Ÿä¿æŒç±»å‹ä¸å˜ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compose :: (B -&gt; C) -&gt; (A -&gt; B) -&gt; (A -&gt; C)</span><br></pre></td></tr></table></figure><p>Functor æœ‰å¦‚ä¸‹ä¸€äº›é‡è¦çš„<strong>å±æ€§çº¦æŸ</strong>:</p><ul><li><strong>å¿…é¡»æ˜¯æ— å‰¯ä½œç”¨çš„ã€‚</strong> è‹¥æ˜ å°„ R.identity å‡½æ•°å¯ä»¥è·å¾—ä¸Šä¸‹æ–‡ä¸­ç›¸åŒçš„å€¼ï¼Œå³å¯è¯æ˜ Functor æ˜¯æ— å‰¯ä½œç”¨çš„ï¼š</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrap(<span class="string">&#x27;Get Functional&#x27;</span>).fmap(R.identity); <span class="comment">//-&gt; Wrapper(&#x27;Get Functional&#x27;)</span></span><br></pre></td></tr></table></figure><ul><li><strong>å¿…é¡»æ˜¯å¯ç»„åˆçš„ã€‚</strong> è¿™ä¸ªå±æ€§çš„æ„æ€æ˜¯ fmap å‡½æ•°çš„ç»„åˆï¼Œä¸åˆ†åˆ« fmap å‡½æ•°æ˜¯ä¸€æ ·çš„ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">two.fmap(R.compose(plus3, R.add(<span class="number">5</span>))).map(R.identity); <span class="comment">//-&gt; 10</span></span><br></pre></td></tr></table></figure><p>Functor çš„è¿™äº›å±æ€§å¹¶ä¸å¥‡æ€ªã€‚éµå®ˆè¿™äº›è§„åˆ™ï¼Œå¯ä»¥å…äºæŠ›å‡ºå¼‚å¸¸ã€ç¯¡æ”¹å…ƒç´ æˆ–è€…æ”¹å˜å‡½æ•°çš„è¡Œä¸ºã€‚å…¶å®é™…ç›®çš„åªæ˜¯åˆ›å»ºä¸€ä¸ªä¸Šä¸‹æ–‡æˆ–ä¸€ä¸ªæŠ½è±¡ï¼Œä»¥ä¾¿å¯ä»¥å®‰å…¨åœ°åº”ç”¨æ“ä½œåˆ°å€¼ï¼Œè€Œåˆä¸æ”¹å˜åŸå§‹å€¼ã€‚è¿™ä¹Ÿæ˜¯ map å¯ä»¥å°†ä¸€ä¸ªæ•°ç»„è½¬æ¢åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼Œè€Œä¸æ”¹å˜åŸæ•°ç»„çš„åŸå› ã€‚è€Œ Functor å°±æ˜¯è¿™ä¸ªæ¦‚å¿µçš„æ¨å¹¿ã€‚</p><p>Functor æœ¬èº«å¹¶ä¸éœ€è¦çŸ¥é“å¦‚ä½•å¤„ç† nullã€‚ä¾‹å¦‚ Ramda ä¸­çš„ R.composeï¼Œåœ¨æ”¶åˆ°ä¸º null çš„å‡½æ•°å¼•ç”¨æ—¶å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™å®Œå…¨æ˜¯é¢„æœŸçš„è¡Œä¸ºï¼Œå¹¶ä¸æ˜¯è®¾è®¡ä¸Šçš„ç¼ºé™·ã€‚å› ä¸º Functor æ˜ å°„ä»ä¸€ä¸ªç±»å‹åˆ°å¦ä¸€ç±»å‹çš„å‡½æ•°ã€‚è¿˜æœ‰ä¸€ä¸ªæ›´ä¸ºå…·ä½“åŒ–çš„å‡½æ•°å¼æ•°æ®ç±»å‹â€”â€”Monadã€‚Monad å¯ä»¥ç®€åŒ–ä»£ç ä¸­çš„é”™è¯¯å¤„ç†ï¼Œè¿›è€Œæ›´æµç•…åœ°è¿›è¡Œå‡½æ•°ç»„åˆã€‚ä½†æ˜¯å®ƒè·Ÿ Functor æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿå…¶å®ï¼ŒMonad å°±æ˜¯ Functorâ€œä¼¸å…¥â€çš„å®¹å™¨ã€‚</p><p>å¦‚æœå†™è¿‡ jQuery ä»£ç ï¼Œé‚£ä¹ˆåº”è¯¥è§‰å¾— Monad å¾ˆé¢ç†Ÿã€‚</p><p>Monad åªæ˜¯ç»™ä¸€äº›èµ„æºæä¾›äº†æŠ½è±¡ï¼Œä¾‹å¦‚ä¸€ä¸ªç®€å•çš„ä»·å€¼ï¼Œä¸€ä¸ª DOM å…ƒç´ ã€äº‹ä»¶æˆ– AJAX è°ƒç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å®‰å…¨åœ°å¤„ç†å…¶ä¸­åŒ…å«çš„æ•°æ®ã€‚æ¯”å¦‚ï¼ŒjQuery å°±å¯ä»¥çœ‹ä½œ DOM çš„ Monadï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;#student-info&#x27;</span>).fadeIn(<span class="number">3000</span>).text(student.fullname());</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„è¡Œä¸ºä¹‹æ‰€ä»¥åƒ Monadï¼Œæ˜¯å› ä¸º jQuery å¯ä»¥å°† fadeIn å’Œ text è¡Œä¸ºå®‰å…¨åœ°åº”ç”¨åˆ° DOM ä¸Šã€‚å¦‚æœ student-info é¢æ¿ä¸å­˜åœ¨ï¼Œå°†æ–¹æ³•åº”ç”¨åˆ°ç©ºçš„ jQuery å¯¹è±¡ä¸Šåªä¼šä»€ä¹ˆä¹Ÿä¸å‘ç”Ÿï¼Œè€Œä¸ä¼šæŠ›å‡ºä»»ä½•å¼‚å¸¸ã€‚Monad æ—¨åœ¨å®‰å…¨åœ°ä¼ é€é”™è¯¯ï¼Œè¿™æ ·åº”ç”¨æ‰å…·æœ‰è¾ƒå¥½çš„å®¹é”™æ€§ã€‚</p><h2 id="ä½¿ç”¨-Monad-å‡½æ•°å¼åœ°å¤„ç†é”™è¯¯"><a href="#ä½¿ç”¨-Monad-å‡½æ•°å¼åœ°å¤„ç†é”™è¯¯" class="headerlink" title="ä½¿ç”¨ Monad å‡½æ•°å¼åœ°å¤„ç†é”™è¯¯"></a>ä½¿ç”¨ Monad å‡½æ•°å¼åœ°å¤„ç†é”™è¯¯</h2><p>Monad ç”¨äºå‡½æ•°å¼åœ°è§£å†³ä¼ ç»Ÿé”™è¯¯å¤„ç†çš„é—®é¢˜ã€‚ä½†åœ¨æ·±å…¥è¿™ä¸ªè¯é¢˜ä¹‹å‰ï¼Œå…ˆæ¥äº†è§£ä½¿ç”¨ Functor çš„å±€é™æ€§ã€‚ä½¿ç”¨ Functor å¯ä»¥å®‰å…¨åœ°åº”ç”¨å‡½æ•°åˆ°å…¶å†…éƒ¨çš„å€¼ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªä¸å¯å˜çš„æ–° Functorã€‚ä½†å¦‚æœå®ƒéå¸ƒåœ¨ä»£ç ä¸­ï¼Œå°±ä¼šæœ‰ä¸€äº›è®©äººä¸é‚£ä¹ˆé¡ºå¿ƒçš„åœ°æ–¹ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸ªé€šè¿‡ id è·å–å­¦ç”Ÿåœ°å€çš„ä¾‹å­ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œå¤§æ¦‚éœ€è¦ä¸¤ä¸ªå‡½æ•°â€”â€”findStudent å’Œ getAddressï¼Œè¿™ä¸¤ä¸ªå‡½æ•°éƒ½ç»™å€¼åŒ…è£¹ä¸Šä¸€ä¸ªå®‰å…¨çš„ä¸Šä¸‹æ–‡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findStudent = R.curry(<span class="function"><span class="keyword">function</span>(<span class="params">db, id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> wrap(find(db, id)); <span class="comment">// &lt;--- åŒ…è£¹å¯¹è±¡è·å–é€»è¾‘ï¼Œä»¥é¿å…æ‰¾ä¸åˆ°å¯¹è±¡æ‰€é€ æˆçš„é—®é¢˜</span></span><br><span class="line">  &#125;);</span><br><span class="line"><span class="keyword">const</span> getAddress = <span class="function"><span class="keyword">function</span>(<span class="params">student</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> wrap(student.fmap(R.prop(<span class="string">&quot;address&quot;</span>))); <span class="comment">// ç”¨ Ramda çš„ R.prop()å‡½æ•°æ¥ map å¯¹è±¡ä»¥è·å–å…¶åœ°å€ï¼Œ å†å°†ç»“æœåŒ…è£¹èµ·æ¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠè¿™ä¸¤ä¸ªå‡½æ•°ç»„åˆåœ¨ä¸€èµ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> studentAddress = R.compose(</span><br><span class="line">  getAddress,</span><br><span class="line">  findStudent(DB(<span class="string">&#x27;student&#x27;</span>))</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>è™½ç„¶æˆåŠŸåœ°é¿å…äº†æ‰€æœ‰çš„é”™è¯¯å¤„ç†ä»£ç ï¼Œä½†æ˜¯ç»“æœå´å‡ºä¹æ„æ–™ã€‚è¿”å›çš„å€¼æ˜¯è¢«åŒ…è£¹äº†ä¸¤å±‚çš„ addresså¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">studentAddress(<span class="string">&#x27;666&#x27;</span>); <span class="comment">//-&gt; Wrapper(Wrapper(address))</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æå–è¿™ä¸ªå€¼ï¼Œéœ€è¦ä¸¤æ¬¡åº”ç”¨ R.identity å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">studentAddress(<span class="string">&#x27;666&#x27;</span>).map(R.identity).map(R.identity);</span><br></pre></td></tr></table></figure><p>åœ¨è‡ªå·±çš„ä»£ç ä¸­è§åˆ°ä¸¤å±‚è¿™æ ·çš„ä»£ç è¿˜å¯ä»¥å‹‰å¼ºæ¥å—ï¼Œå¦‚æœå‡ºç°ä¸‰å››å±‚å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ï¼ŒMonad å¯ä»¥æˆä¸ºæ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="Monadï¼šä»æ§åˆ¶æµåˆ°æ•°æ®æµ"><a href="#Monadï¼šä»æ§åˆ¶æµåˆ°æ•°æ®æµ" class="headerlink" title="Monadï¼šä»æ§åˆ¶æµåˆ°æ•°æ®æµ"></a>Monadï¼šä»æ§åˆ¶æµåˆ°æ•°æ®æµ</h3><p>Monad å’Œ Functor ç±»ä¼¼ï¼Œä½†åœ¨å¤„ç†æŸäº›æƒ…å†µæ—¶å¯ä»¥å¸¦æ¥ä¸€äº›ç‰¹æ®Šçš„é€»è¾‘ã€‚ä¸‹é¢å°±ç”¨ç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹Monad åˆ°åº•æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åŠŸèƒ½ã€‚å‡å¦‚æœ‰ä¸€ä¸ªå‡½æ•° half::Number -&gt;Numberï¼ˆè§å›¾ 4ï¼‰ï¼š</p><p><img src="https://i.loli.net/2021/08/08/bPwu5ENr4mpAQoU.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Wrapper(<span class="number">2</span>).fmap(half); <span class="comment">//-&gt; Wrapper(1)</span></span><br><span class="line">Wrapper(<span class="number">3</span>).fmap(half); <span class="comment">//-&gt; Wrapper(1.5)</span></span><br></pre></td></tr></table></figure><p>å›¾ 4 Functor å¯ä»¥å°†å‡½æ•°åº”ç”¨åˆ°åŒ…è£¹çš„å€¼ä¸Šã€‚ä¾‹å­ä¸­åŒ…è£¹çš„å€¼ä¼šè¢« 2 é™¤ã€‚<br>ä¸è¿‡ï¼ŒFunctor åªç®¡åº”ç”¨å‡½æ•°åˆ°å€¼å¹¶å°†ç»“æœåŒ…è£¹èµ·æ¥ï¼Œå¹¶ä¸èƒ½åŠ é¢å¤–çš„é€»è¾‘ã€‚å¦‚æœæƒ³è¦é™åˆ¶ half åªåº”ç”¨åˆ°å¶æ•°ï¼Œè€Œè¾“å…¥æ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæˆ–è®¸å¯ä»¥è¿”å› null æˆ–æŠ›å‡ºå¼‚å¸¸ï¼Œä½†æ›´å¥½çš„ç­–ç•¥æ˜¯è®©è¯¥å‡½æ•°èƒ½ç»™åˆæ³•çš„æ•°å­—è¿”å›æ­£ç¡®çš„ç»“æœï¼Œå¹¶å¿½ç•¥ä¸åˆæ³•çš„æ•°å­—ã€‚<br>ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªåä¸º Empty çš„ç±»ä¼¼ Wrapper çš„å®¹å™¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Empty = <span class="function"><span class="keyword">function</span> (<span class="params">_</span>) </span>&#123;</span><br><span class="line">  ; <span class="comment">// æ— æ“ä½œã€‚ Empty ä¸ä¼šå­˜å‚¨ä»»ä½•å€¼ï¼Œå…¶ä»£è¡¨ç€â€œç©ºâ€æˆ–â€œæ— â€çš„æ¦‚å¿µ</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// map :: (A -&gt; B) -&gt; A -&gt; B</span></span><br><span class="line">Empty.prototype.map = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">this</span>; &#125;; <span class="comment">// &lt;--- ç±»ä¼¼ï¼Œå°†å‡½æ•° map åˆ° Empty ä¸Šä¼šè·³è¿‡è¯¥æ“ä½œ</span></span><br><span class="line"><span class="comment">// empty :: _ -&gt; Empty</span></span><br><span class="line"><span class="keyword">const</span> empty = <span class="function">() =&gt;</span> <span class="keyword">new</span> Empty();</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å®ç° half ä»¥æ»¡è¶³æ–°çš„éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®Œæˆï¼ˆè§å›¾ 5ï¼‰ï¼š</p><p><img src="https://i.loli.net/2021/08/08/YvoIHae8QUJfq6x.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isEven = <span class="function">(<span class="params">n</span>) =&gt;</span> <span class="built_in">Number</span>.isFinite(n) &amp;amp;&amp;amp; (n % <span class="number">2</span> == <span class="number">0</span>); <span class="comment">// &lt;--- åŒºåˆ†å¥‡å¶æ•°çš„å·¥å…·å‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> half = <span class="function">(<span class="params">val</span>) =&gt;</span> isEven(val) ? wrap(val / <span class="number">2</span>) : empty(); <span class="comment">// &lt;--- half å‡½æ•°åªä¼šæ“ä½œå¶æ•°ï¼Œå¦åˆ™ä¼šè¿”å›ä¸€ä¸ªç©ºçš„å®¹å™¨</span></span><br><span class="line">half(<span class="number">4</span>); <span class="comment">//-&gt; Wrapper(2)</span></span><br><span class="line">half(<span class="number">3</span>); <span class="comment">//-&gt; Empty</span></span><br></pre></td></tr></table></figure><p>å›¾ 5 å‡½æ•° half å¯ä»¥æ ¹æ®è¾“å…¥è¿”å›ä¸€ä¸ªåŒ…è£¹å¥½çš„å€¼æˆ–ç©ºå®¹å™¨ã€‚<br>Monad ç”¨äºåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ä¸€å®šè§„åˆ™çš„å®¹å™¨ï¼Œè€Œ Functor å¹¶ä¸éœ€è¦äº†è§£å…¶å®¹å™¨å†…çš„å€¼ã€‚Functor å¯ä»¥æœ‰æ•ˆåœ°ä¿æŠ¤æ•°æ®ï¼Œç„¶è€Œå½“éœ€è¦ç»„åˆå‡½æ•°æ—¶ï¼Œå³å¯ä»¥ç”¨Monad æ¥å®‰å…¨å¹¶ä¸”æ— å‰¯ä½œç”¨åœ°ç®¡ç†æ•°æ®æµã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œå¯¹äºå¥‡æ•°ä¼šè¿”å› Empty è€Œä¸æ˜¯ nullã€‚æ‰€ä»¥æ­¤åå¦‚æœæƒ³åº”ç”¨å‡½æ•°ï¼Œå°±ä¸å¿…åœ¨æ„å¯èƒ½ä¼šå‡ºç°çš„å¼‚å¸¸ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">half(<span class="number">4</span>).fmap(plus3); <span class="comment">//-&gt; Wrapper(5)</span></span><br><span class="line">half(<span class="number">3</span>).fmap(plus3); <span class="comment">//-&gt; Empty &lt;--- å®¹å™¨çŸ¥é“è¯¥å¦‚ä½•åº”ç”¨å‡½æ•°ï¼Œå³ä¾¿å…¶å€¼æ˜¯éæ³•çš„</span></span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–ï¼ŒMonad è¿˜é€‚ç”¨äºè§£å†³å…¶ä»–é—®é¢˜ã€‚è¿™é‡Œåªè®¨è®ºå¦‚ä½•ä½¿ç”¨ Monad æ¥è§£å†³å‘½ä»¤å¼é”™è¯¯å¤„ç†çš„é—®é¢˜ï¼Œä»è€Œä½¿ä»£ç æ›´å¯è¯»ã€æ›´æ˜“äºæ¨ç†ã€‚</p><p>ä»¥ä¸‹ä¸¤ä¸ªæ¦‚å¿µéå¸¸é‡è¦ã€‚</p><ul><li>Monad:ä¸º Monadic æ“ä½œæä¾›æŠ½è±¡æ¥å£ã€‚</li><li>Monadic ç±»å‹: è¯¥æ¥å£çš„å…·ä½“å®ç°ã€‚</li></ul><p>Monadic ç±»å‹ç±»ä¼¼äºä¸Šé¢æåˆ°çš„çš„ Wrapper å¯¹è±¡ã€‚ä¸è¿‡æ¯ä¸ª Monad éƒ½æœ‰ä¸åŒçš„ç”¨é€”ï¼Œå¯ä»¥å®šä¹‰ä¸åŒçš„è¯­ä¹‰ä¾¿äºç¡®å®šå…¶è¡Œä¸ºï¼ˆä¾‹å¦‚ map æˆ– fmapï¼‰ã€‚ä½¿ç”¨è¿™äº›ç±»å‹å¯ä»¥è¿›è¡Œé“¾å¼æˆ–åµŒå¥—æ“ä½œï¼Œä½†éƒ½åº”éµå¾ªä¸‹åˆ—æ¥å£å®šä¹‰ã€‚</p><ul><li>ç±»å‹æ„é€ å‡½æ•°: åˆ›å»º Monadic ç±»å‹ï¼ˆç±»ä¼¼äº Wrapper çš„æ„é€ å‡½æ•°ï¼‰ã€‚</li><li>unit å‡½æ•°: å¯å°†ç‰¹å®šç±»å‹çš„å€¼æ”¾å…¥ Monadic ç»“æ„ä¸­ï¼ˆç±»ä¼¼äº wrap å’Œå‰é¢çœ‹åˆ°çš„ empty å‡½æ•°ï¼‰ã€‚å¯¹äº Monad çš„å®ç°æ¥è¯´ï¼Œè¯¥å‡½æ•°ä¹Ÿè¢«ç§°ä¸º of å‡½æ•°ã€‚</li><li>bind å‡½æ•°: å¯ä»¥é“¾å¼æ“ä½œï¼Œåæ–‡å°†ä½¿ç”¨æ›´ç®€çŸ­çš„ mapã€‚</li><li>join å‡½æ•°: å°†ä¸¤å±‚ Monadic ç»“æ„åˆå¹¶æˆä¸€å±‚ã€‚è¿™ä¼šå¯¹åµŒå¥—è¿”å› Monad çš„å‡½æ•°ç‰¹åˆ«æœ‰ç”¨ã€‚<br>å°†è¿™ä¸€ä¸ªæ¥å£åº”ç”¨åˆ° Wrapper ç±»å‹ï¼Œå°±å¯ä»¥é‡æ„æˆä»¥ä¸‹è¿™ç§å½¢å¼ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wrapper</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// unit å‡½æ•°</span></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">of</span>(<span class="params">a</span>)</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Wrapper(a);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// bind å‡½æ•°ï¼ˆ Functorï¼‰</span></span><br><span class="line">  <span class="function"><span class="title">map</span>(<span class="params">f</span>)</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> Wrapper.of(f(<span class="built_in">this</span>.value));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å‹å¹³åµŒå¥—çš„ Wrapper</span></span><br><span class="line">  <span class="function"><span class="title">join</span>(<span class="params"></span>)</span> &#123; </span><br><span class="line">    <span class="keyword">if</span>(!(<span class="built_in">this</span>.value <span class="keyword">instanceof</span> Wrapper)) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.value.join();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªå½“å‰ç»“æ„çš„æ–‡æœ¬æè¿°</span></span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Wrapper (<span class="subst">$&#123;<span class="built_in">this</span>.value&#125;</span>)`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Wrapper ä½¿ç”¨ Functor çš„ map å°†æ•°æ®æå‡åˆ°å®¹å™¨ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥æ— ä»»ä½•å‰¯ä½œç”¨ã€‚é€šå¸¸è¿˜å¯ä»¥ç”¨_.identity å‡½æ•°æ¥æ£€æŸ¥å…¶å†…å®¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Wrapper.of(<span class="string">&#x27;Hello Monads!&#x27;</span>)</span><br><span class="line">.map(R.toUpper)</span><br><span class="line">.map(R.identity); <span class="comment">//-&gt; Wrapper(&#x27;HELLO MONADS!&#x27;)</span></span><br></pre></td></tr></table></figure><p>map æ“ä½œè¢«è§†ä¸ºä¸€ç§ä¸­ç«‹çš„ functorï¼Œå› ä¸ºå®ƒæ— éåªæ˜¯æ˜ å°„å‡½æ•°åˆ°å¯¹è±¡ï¼Œç„¶åå…³é—­å®ƒã€‚ä¹‹åï¼ŒMonad ç»™map åŠ å…¥ç‰¹æ®Šçš„åŠŸèƒ½ã€‚join å‡½æ•°ç”¨äºé€å±‚æ‰å¹³åŒ–åµŒå¥—ç»“æ„ï¼Œå°±åƒå‰¥æ´‹è‘±ä¸€æ ·ã€‚è¿™å¯ä»¥ç”¨æ¥æ¶ˆé™¤ä¹‹å‰ç”¨functor æ—¶å‘ç°çš„é—®é¢˜ï¼Œå¦‚ä¸‹ æ‰€ç¤ºã€‚<br>æ‰å¹³åŒ– Monadic ç»“æ„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// findObject :: DB -&gt; String -&gt; Wrapper</span></span><br><span class="line"><span class="keyword">const</span> findObject = R.curry(<span class="function"><span class="keyword">function</span>(<span class="params">db, id</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> Wrapper.of(find(db, id));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// getAddress :: Student -&gt; Wrapper</span></span><br><span class="line"><span class="keyword">const</span> getAddress = <span class="function"><span class="keyword">function</span>(<span class="params">student</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> Wrapper.of(student.map(R.prop(<span class="string">&#x27;address&#x27;</span>)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> studentAddress = R.compose(getAddress, findObject(DB(<span class="string">&#x27;student&#x27;</span>)));</span><br><span class="line">studentAddress(<span class="string">&#x27;444-44-4444&#x27;</span>).join().get(); <span class="comment">// Address</span></span><br></pre></td></tr></table></figure><p>è¯¥ä»£ç è¿”å›ä¸€ç»„åµŒå¥—çš„ wrapperï¼Œå…¶ä¸­ join æ“ä½œç”¨äºå°†è¿™ç§åµŒå¥—ç»“æ„å‹å¹³æˆå•ä¸€çš„å±‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Wrapper.of(Wrapper.of(Wrapper.of(<span class="string">&#x27;Get Functional&#x27;</span>))).join();</span><br><span class="line"><span class="comment">//-&gt; Wrapper(&#x27;Get Functional&#x27;)</span></span><br></pre></td></tr></table></figure><p>å›¾ 6 ä¸º join æ“ä½œçš„ç¤ºæ„å›¾ï¼Œé€’å½’æ‰å¹³åŒ–åµŒå¥—ç»“æ„çš„ Monadï¼Œåƒå‰¥æ´‹è‘±ä¸€æ ·ï¼š</p><p><img src="https://i.loli.net/2021/08/08/dAocQ8O6PJMTUVk.png"></p><p>Monad é€šå¸¸æœ‰æ›´å¤šçš„æ“ä½œï¼Œè¿™é‡ŒæåŠçš„æœ€å°æ¥å£åªæ˜¯å…¶æ•´ä¸ª API çš„å­é›†ã€‚ä¸€ä¸ª Monad æœ¬èº«åªæ˜¯æŠ½è±¡ï¼Œæ²¡æœ‰ä»»ä½•å®é™…æ„ä¹‰ã€‚åªæœ‰å®é™…çš„å®ç°ç±»å‹æ‰æœ‰ä¸°å¯Œçš„åŠŸèƒ½ã€‚å¤§å¤šæ•°å‡½æ•°å¼ç¼–ç¨‹çš„ä»£ç åªç”¨ä¸€äº›å¸¸ç”¨çš„ç±»å‹å°±å¯ä»¥æ¶ˆé™¤å¤§é‡çš„æ ·æ¿ä»£ç ï¼ŒåŒæ—¶è¿˜èƒ½å®ŒæˆåŒæ ·çš„å·¥ä½œã€‚</p><p>Monad å®ä¾‹ä¸°å¯Œï¼Œä¾‹å¦‚ï¼šMaybeã€Either å’Œ IOï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>é¢å‘å¯¹è±¡æŠ›å¼‚å¸¸çš„æœºåˆ¶è®©å‡½æ•°å˜å¾—ä¸çº¯ï¼ŒæŠŠå¤§éƒ¨åˆ†çš„è´£ä»»éƒ½æ¨åˆ°äº†è°ƒç”¨è€…çš„å°è¯•â€”â€”try-catché€»è¾‘ä¸Š</li><li>æŠŠå€¼åŒ…è£¹åˆ°å®¹å™¨ä¸­çš„æ¨¡å¼æ˜¯ä¸ºäº†æ„å»ºæ— å‰¯ä½œç”¨çš„ä»£ç ï¼ŒæŠŠå¯èƒ½ä¸çº¯çš„å˜åŒ–åŒ…è£¹æˆå¼•ç”¨é€æ˜çš„è¿‡ç¨‹</li><li>ä½¿ç”¨Functorå°†å‡½æ•°åº”ç”¨åˆ°å®¹å™¨ä¸­çš„å€¼ï¼Œè¿™æ˜¯æ— å‰¯ä½œç”¨åœ°ã€ä¸å¯å˜åœ°è®¿é—®å’Œä¿®æ”¹æ“ä½œ</li><li>Monadæ˜¯å‡½æ•°å¼ä¸­ç”¨æ¥é™ä½åº”ç”¨å¤æ‚åº¦çš„è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡è¿™ç§æ¨¡å¼å¯ä»¥å°†å‡½æ•°ç¼–æ’æˆå®‰å…¨çš„æ•°æ®æµç¨‹</li><li>äº¤é”™çš„ç»„åˆå‡½æ•°å’ŒMonadicç±»å‹æ˜¯éå¸¸æœ‰å¼¹æ€§è€Œä¸”å¼ºå¤§çš„ï¼Œå¦‚Maybeã€Eitherå’ŒIO</li></ul><p><a href="http://www.ruanyifeng.com/blog/2015/07/monad.html">é˜®ä¸€å³°ï¼šå›¾è§£ Monad</a><br><a href="https://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html">é˜®ä¸€å³°ï¼šå‡½æ•°å¼ç¼–ç¨‹å…¥é—¨æ•™ç¨‹</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;å››-å‡½æ•°å¼ç¼–ç¨‹â€”â€”é’ˆå¯¹å¤æ‚åº”ç”¨çš„è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å››-å‡½æ•°å¼ç¼–ç¨‹</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆæ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œä¼šæœ‰4ä¸ªè¿›ç¨‹ï¼Ÿ</title>
    <link href="http://example.com/2021/03/22/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%89%93%E5%BC%80%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%BC%9A%E6%9C%894%E4%B8%AA%E8%BF%9B%E7%A8%8B%EF%BC%9F/"/>
    <id>http://example.com/2021/03/22/%E4%B8%BA%E4%BB%80%E4%B9%88%E6%89%93%E5%BC%80%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%EF%BC%8C%E4%BC%9A%E6%9C%894%E4%B8%AA%E8%BF%9B%E7%A8%8B%EF%BC%9F/</id>
    <published>2021-03-22T05:07:12.000Z</published>
    <updated>2022-01-10T06:01:56.393Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="ç®€å•å›ç­”"><a href="#ç®€å•å›ç­”" class="headerlink" title="ç®€å•å›ç­”"></a>ç®€å•å›ç­”</h2><p>å› ä¸ºæ‰“å¼€1ä¸ªé¡µé¢ï¼Œè‡³å°‘éœ€è¦1ä¸ªæµè§ˆå™¨è¿›ç¨‹ã€1ä¸ªç½‘ç»œè¿›ç¨‹ã€1ä¸ªGPUè¿›ç¨‹ä»¥åŠ1ä¸ªæ¸²æŸ“è¿›ç¨‹</p><h2 id="ç›¸å…³æ€ç»´å¯¼å›¾"><a href="#ç›¸å…³æ€ç»´å¯¼å›¾" class="headerlink" title="ç›¸å…³æ€ç»´å¯¼å›¾"></a>ç›¸å…³æ€ç»´å¯¼å›¾</h2><p><img src="https://s2.loli.net/2022/01/09/P5xs9HKBg1WpLiD.png"></p><h2 id="å‰ç½®çŸ¥è¯†ï¼šçº¿ç¨‹å’Œè¿›ç¨‹"><a href="#å‰ç½®çŸ¥è¯†ï¼šçº¿ç¨‹å’Œè¿›ç¨‹" class="headerlink" title="å‰ç½®çŸ¥è¯†ï¼šçº¿ç¨‹å’Œè¿›ç¨‹"></a>å‰ç½®çŸ¥è¯†ï¼šçº¿ç¨‹å’Œè¿›ç¨‹</h2><p>è¿›ç¨‹èµ„æºåˆ†é…çš„æœ€å°å•å…ƒï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•å…ƒã€‚</p><p>äºŒè€…éƒ½æ˜¯ä¸€ä¸ªæ—¶é—´æ®µçš„æè¿°ï¼Œæ˜¯CPUå·¥ä½œæ—¶é—´æ®µçš„æè¿°ï¼Œæ˜¯è¿è¡Œä¸­çš„ç¨‹åºæŒ‡ä»¤çš„ä¸€ç§æè¿°ï¼Œè¿™éœ€è¦ä¸ç¨‹åºä¸­çš„ä»£ç åŒºåˆ«å¼€æ¥ã€‚</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>è¿™ä¸ªé—®é¢˜ä¸æµè§ˆå™¨çš„å‘å±•ç›¸å…³ï¼Œæµè§ˆå™¨æ˜¯ä»å•è¿›ç¨‹æ—¶ä»£å‘å±•åˆ°å¤šè¿›ç¨‹æ—¶ä»£ã€‚</p><h3 id="å•è¿›ç¨‹æ—¶ä»£"><a href="#å•è¿›ç¨‹æ—¶ä»£" class="headerlink" title="å•è¿›ç¨‹æ—¶ä»£"></a>å•è¿›ç¨‹æ—¶ä»£</h3><p>é¡¾åæ€ä¹‰ï¼Œå•è¿›ç¨‹æµè§ˆå™¨æ˜¯æŒ‡æµè§ˆå™¨çš„æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½æ˜¯è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œï¼Œå…¶ä¸­åŒ…å«JSå¼•æ“ã€æ¸²æŸ“å¼•æ“ã€ç½‘ç»œè¿›ç¨‹ã€æ’ä»¶è¿›ç¨‹ã€GPUè¿›ç¨‹ç­‰ç­‰ã€‚</p><p>å¦‚æ­¤ä¹‹å¤šçš„åŠŸèƒ½æ¨¡å—åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œä½¿å¾—æµè§ˆå™¨é¢ä¸´ä»¥ä¸‹çš„çª˜å¢ƒï¼š</p><ul><li>ä¸ç¨³å®š<br>  æ’ä»¶å®¹æ˜“å´©æºƒ</li><li>ä¸æµç•…<br>  æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œä»çº¿ç¨‹å’Œè¿›ç¨‹çš„å…³ç³»å¾—çŸ¥ï¼Œè¿™æ„å‘³ç€åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªæ¨¡å—å¯ä»¥è¿è¡Œï¼Œæ•ˆç‡ä¸é«˜</li><li>ä¸å®‰å…¨<br>  æ¶æ„æ’ä»¶ã€æ¶æ„è„šæœ¬</li></ul><h3 id="å¤šè¿›ç¨‹æ—¶ä»£"><a href="#å¤šè¿›ç¨‹æ—¶ä»£" class="headerlink" title="å¤šè¿›ç¨‹æ—¶ä»£"></a>å¤šè¿›ç¨‹æ—¶ä»£</h3><p>è¿™é‡Œä»¥Chromeæµè§ˆå™¨ä¸ºä¾‹ï¼Œå®ƒä¹Ÿæ˜¯ç¬¬ä¸€ä¸ªé‡‡ç”¨å¤šè¿›ç¨‹æ¶æ„çš„æµè§ˆå™¨ï¼Œè¿™ä¸ªæ¶æ„<strong>èƒ½å®¹è®¸è®¸å¤šä¸ªç¨‹åºåŒäº‹è¿è¡Œè€Œäº’ä¸å½±å“</strong></p><p><img src="https://s2.loli.net/2022/01/09/Vmk68QIpOBgZGoU.png"></p><p>è™½ç„¶å¤šè¿›ç¨‹æ¨¡å‹æå‡äº†æµè§ˆå™¨çš„ç¨³å®šæ€§ã€æµç•…æ€§å’Œå®‰å…¨æ€§ï¼Œä½†åŒæ ·ä¸å¯é¿å…åœ°å¸¦æ¥äº†ä¸€äº›é—®é¢˜ï¼š</p><ul><li>æ›´é«˜çš„èµ„æºå ç”¨</li><li>æ›´å¤æ‚çš„ä½“ç³»ç»“æ„</li></ul><h3 id="å…³äºå®‰å…¨æ²™ç®±"><a href="#å…³äºå®‰å…¨æ²™ç®±" class="headerlink" title="å…³äºå®‰å…¨æ²™ç®±"></a>å…³äºå®‰å…¨æ²™ç®±</h3><p>é‡‡ç”¨å¤šè¿›ç¨‹æ¶æ„çš„å¥½å¤„ä¹‹ä¸€æ˜¯å¯ä»¥ä½¿ç”¨å®‰å…¨æ²™ç®±ï¼Œæ²™ç®±è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†è®©ä¸å¯ä¿¡çš„ä»£ç è¿è¡Œåœ¨ä¸€å®šçš„ç¯å¢ƒä¸­ï¼Œä»è€Œé™åˆ¶è¿™äº›ä»£ç è®¿é—®éš”ç¦»åŒºä¹‹å¤–çš„èµ„æºï¼Œ</p><h3 id="å„ä¸ªè¿›ç¨‹çš„ä½œç”¨"><a href="#å„ä¸ªè¿›ç¨‹çš„ä½œç”¨" class="headerlink" title="å„ä¸ªè¿›ç¨‹çš„ä½œç”¨"></a>å„ä¸ªè¿›ç¨‹çš„ä½œç”¨</h3><p>è¿™é‡Œä»ä»¥Chromeæµè§ˆå™¨ä¸ºä¾‹</p><ul><li>ç½‘ç»œè¿›ç¨‹ï¼šä¸»è¦è´Ÿè´£ç•Œé¢æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ï¼ŒåŒæ—¶æä¾›å­˜å‚¨åŠŸèƒ½</li><li>æ¸²æŸ“è¿›ç¨‹ï¼šæ ¸å¿ƒä»»åŠ¡å°±æ˜¯å°†HTMLã€CSSå’ŒJavaScriptè½¬æ¢ä¸ºç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç½‘é¡µ(æ’ç‰ˆå¼•æ“Blinkã€JavaScriptå¼•æ“V8éƒ½æ˜¯è¿è¡Œåœ¨è¯¥è¿›ç¨‹ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒChromeä¼šä¸ºæ¯ä¸ªTabæ ‡ç­¾åˆ›å»ºä¸€ä¸ªæ¸²æŸ“è¿›ç¨‹ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæ¸²æŸ“è¿›ç¨‹éƒ½æ˜¯è¿è¡Œåœ¨æ²™ç®±æ¨¡å¼ä¸‹)</li><li>GPUè¿›ç¨‹ï¼šè¯¥è¿›ç¨‹çš„ä½¿ç”¨åˆè¡·æ˜¯ä¸ºäº†å®ç°3D CSSçš„æ•ˆæœï¼Œåªæ˜¯éšåç½‘é¡µã€Chromeçš„UIç•Œé¢éƒ½é€‰æ‹©é‡‡ç”¨GPUæ¥ç»˜åˆ¶ï¼Œè¿™ä½¿å¾—GPUæˆä¸ºæµè§ˆå™¨çš„æ™®ééœ€æ±‚ã€‚æœ€åï¼ŒChromeåœ¨å…¶å¤šè¿›ç¨‹æ¶æ„ä¸Šä¹Ÿå¼•å…¥äº†GPUè¿›ç¨‹ã€‚</li><li>ç½‘ç»œè¿›ç¨‹ï¼šä¸»è¦è´Ÿè´£é¡µé¢çš„ç½‘ç»œèµ„æºåŠ è½½</li><li>æ’ä»¶è¿›ç¨‹ï¼šä¸»è¦è´Ÿè´£æ’ä»¶çš„è¿è¡Œï¼Œå› ä¸ºæ’ä»¶æ˜“å´©æºƒï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡æ’ä»¶è¿›ç¨‹æ¥éš”ç¦»ï¼Œä»¥ä¿è¯æ’ä»¶è¿›ç¨‹ä¸ä¼šå¯¹æµè§ˆå™¨å’Œé¡µé¢é€ æˆå½±å“</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://cloud.tencent.com/developer/article/1688297">è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µã€åŒºåˆ«åŠè¿›ç¨‹çº¿ç¨‹é—´é€šä¿¡</a></p><p><a href="https://codeantenna.com/a/Xr9k4lpBJn">Chromeä¸ºä»€ä¹ˆæ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œä¼šæœ‰4ä¸ªè¿›ç¨‹?</a></p><p><a href="https://cloud.tencent.com/developer/news/414508">Chromeæ¶æ„ï¼šä»…ä»…æ‰“å¼€äº†1ä¸ªé¡µé¢ï¼Œä¸ºä»€ä¹ˆæœ‰4ä¸ªè¿›ç¨‹ï¼Ÿ</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ç®€å•å›ç­”&quot;&gt;&lt;a href=&quot;#ç®€å•å›ç­”&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="æµè§ˆå™¨" scheme="http://example.com/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°:Javascriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼ˆä¸‰ï¼‰</title>
    <link href="http://example.com/2021/03/05/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <id>http://example.com/2021/03/05/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%89%EF%BC%89/</id>
    <published>2021-03-05T06:33:22.000Z</published>
    <updated>2021-08-09T01:46:14.832Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h1 id="ä¸‰-å‡½æ•°å¼ç¼–ç¨‹â€”â€”æ¨¡å—åŒ–ä¸”å¯é‡ç”¨çš„ä»£ç "><a href="#ä¸‰-å‡½æ•°å¼ç¼–ç¨‹â€”â€”æ¨¡å—åŒ–ä¸”å¯é‡ç”¨çš„ä»£ç " class="headerlink" title="ä¸‰.å‡½æ•°å¼ç¼–ç¨‹â€”â€”æ¨¡å—åŒ–ä¸”å¯é‡ç”¨çš„ä»£ç "></a>ä¸‰.å‡½æ•°å¼ç¼–ç¨‹â€”â€”æ¨¡å—åŒ–ä¸”å¯é‡ç”¨çš„ä»£ç </h1><p>ï¼ˆè¯»ä¹¦ç¬”è®°ï¼šJavaScriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼‰</p><p>ä»Šæ—¥åˆ†äº«</p><ul><li>æ–¹æ³•é“¾ä¸å‡½æ•°ç®¡é“çš„æ¯”è¾ƒ</li><li>ç®¡é“å‡½æ•°çš„å…¼å®¹æ¡ä»¶</li><li>æŸ¯é‡ŒåŒ–çš„å‡½æ•°æ±‚å€¼</li><li>éƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®šï¼ˆç•¥ï¼‰</li></ul><h2 id="1-æ–¹æ³•é“¾ä¸å‡½æ•°ç®¡é“çš„æ¯”è¾ƒ"><a href="#1-æ–¹æ³•é“¾ä¸å‡½æ•°ç®¡é“çš„æ¯”è¾ƒ" class="headerlink" title="1 æ–¹æ³•é“¾ä¸å‡½æ•°ç®¡é“çš„æ¯”è¾ƒ"></a>1 æ–¹æ³•é“¾ä¸å‡½æ•°ç®¡é“çš„æ¯”è¾ƒ</h2><p>ä¹‹å‰æåˆ°äº†è¿æ¥ä¸€ç³»åˆ—å‡½æ•°çš„æ–¹æ³•é“¾ï¼Œä»è€Œæ­ç¤ºäº†ä¸€ç§ä¸ä¼—ä¸åŒçš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ã€‚è¿˜æœ‰ä¸€ç§ç§°ä¸ºç®¡é“çš„æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥è¿æ¥å‡½æ•°ã€‚</p><p>å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºå¯¹äºäº†è§£å‡½æ•°æœ¬èº«æ˜¯ååˆ†é‡è¦çš„ã€‚<code>Haskell</code>ï¼ˆå‘éŸ³ä¸º/ËˆhÃ¦skÉ™l/ï¼‰ä¸­ä½¿ç”¨ä¸€ç§ç¬¦å·æ¥æè¿°å‡½æ•°ã€‚<br>å¦‚å›¾ä¸€ï¼š</p><p><img src="https://i.loli.net/2021/08/08/tnKNhbJXykumAFe.png"></p><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°æ˜¯è¾“å…¥å’Œè¾“å‡ºç±»å‹ä¹‹é—´çš„æ•°å­¦æ˜ å°„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªç®€å•çš„å‡½æ•° isEmptyï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå°±åƒè¿™æ ·è¡¨ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isEmpty :: <span class="built_in">String</span> -&gt; <span class="built_in">Boolean</span></span><br></pre></td></tr></table></figure><p>å¦‚å›¾äºŒï¼š</p><p><img src="https://i.loli.net/2021/08/08/zD8JNZ3AucwUmQ1.png"></p><p>è¯¥å‡½æ•°æ˜¯æ‰€æœ‰ String ç±»å‹è¾“å…¥å€¼åˆ°æ‰€æœ‰ Boolean å€¼ä¹‹é—´çš„å¼•ç”¨é€æ˜æ˜ å°„ã€‚è¯¥å‡½æ•°<code>JavaScript</code>çš„<code>lambda</code>æè¿°å½¢å¼å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// isEmpty :: String -&gt; Boolean</span></span><br><span class="line"><span class="keyword">const</span> isEmpty = <span class="function">(<span class="params">s</span>) =&gt;</span> !s || !s.trim();</span><br></pre></td></tr></table></figure><p>äº†è§£å‡½æ•°ä½œä¸ºç±»å‹æ˜ å°„çš„æ€§è´¨æ˜¯ç†è§£å¦‚ä½•å°†å‡½æ•°é“¾æ¥å’Œç®¡é“åŒ–çš„å…³é”®:</p><ul><li>æ–¹æ³•é“¾æ¥ï¼ˆç´§è€¦åˆï¼Œæœ‰é™çš„è¡¨ç°åŠ›ï¼‰</li><li>å‡½æ•°çš„ç®¡é“åŒ–ï¼ˆæ¾è€¦åˆï¼Œçµæ´»ï¼‰</li></ul><h3 id="1-1-æ–¹æ³•é“¾æ¥"><a href="#1-1-æ–¹æ³•é“¾æ¥" class="headerlink" title="1.1 æ–¹æ³•é“¾æ¥"></a>1.1 æ–¹æ³•é“¾æ¥</h3><p><code>map</code>å’Œ<code>filter</code>å‡½æ•°éƒ½ä»¥ä¸€ä¸ªæ•°ç»„ä½œä¸ºè¾“å…¥å¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚è¿™äº›å‡½æ•°éƒ½å¯ä»¥é€šè¿‡<code>Lodash</code>å°è£…çš„éšå¼å¯¹è±¡ç´§å¯†åœ°è¿æ¥åœ¨ä¸€èµ·ï¼Œä»è€Œåœ¨åå°å®ç°å¯¹æ–°æ•°æ®ç»“æ„çš„åˆ›å»ºã€‚<br>è¿™æ˜¯ä¸Šä¸€æ¬¡åˆ†äº«ä¸­ä¸€ä¸ªæ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">_.chain(names) <span class="comment">//&lt;--- åˆå§‹åŒ–å‡½æ•°é“¾ï¼ˆåˆ›å»ºæƒ°æ€§è®¡ç®—å‡½æ•°é“¾æ¥å¤„ç†ç»™å®šçš„æ•°ç»„ï¼‰</span></span><br><span class="line">  .filter(isValid) <span class="comment">//&lt;--- å»é™¤éæ³•å€¼</span></span><br><span class="line">  .map(<span class="function">(<span class="params">s</span>) =&gt;</span> s.replace(<span class="regexp">/_/</span>, <span class="string">&quot; &quot;</span>)) <span class="comment">//&lt;--- è§„èŒƒåŒ–å€¼</span></span><br><span class="line">  .uniq() <span class="comment">// &lt;---å»æ‰é‡å¤å…ƒç´ </span></span><br><span class="line">  .map(_.startCase) <span class="comment">//&lt;--- å¤§å†™é¦–å­—æ¯</span></span><br><span class="line">  .sort()</span><br><span class="line">  .value(); <span class="comment">//&lt;--- æ‰§è¡Œå‡½æ•°é“¾ä¸­çš„æ‰€æœ‰å‡½æ•°</span></span><br><span class="line"><span class="comment">//-&gt; [&#x27;Alonzo Church&#x27;, &#x27;Haskell Curry&#x27;, &#x27;Jon Von Neumann&#x27;, &#x27;Stephen Kleene&#x27;]</span></span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒå‘½ä»¤å¼ä»£ç ï¼Œè¿™çš„ç¡®æ˜¯ä¸€ä¸ªèƒ½å¤Ÿæå¤§æé«˜ä»£ç å¯è¯»æ€§çš„è¯­æ³•æ”¹è¿›ã€‚ç„¶è€Œï¼Œå®ƒä¸æ–¹æ³•æ‰€å±çš„å¯¹è±¡ç´§ç´§åœ°è€¦åˆåœ¨ä¸€èµ·ï¼Œé™åˆ¶é“¾ä¸­å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•æ•°é‡ï¼Œä¹Ÿå°±é™åˆ¶äº†ä»£ç çš„è¡¨ç°åŠ›ã€‚è¿™æ ·å°±åªèƒ½å¤Ÿä½¿ç”¨ç”±<code>Lodash</code>æä¾›çš„æ“ä½œï¼Œè€Œæ— æ³•è½»æ¾åœ°å°†ä¸åŒå‡½æ•°åº“çš„ï¼ˆæˆ–è‡ªå®šä¹‰çš„ï¼‰å‡½æ•°è¿æ¥åœ¨ä¸€èµ·ã€‚(å°½ç®¡ä½¿ç”¨ mixin çš„æ–¹æ³•å¯ä»¥æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œä½†è¿™å°±éœ€è¦è‡ªå·±å»ç®¡ç† mixin å¯¹è±¡æœ¬èº«ã€‚è¿™é‡Œä¸åšè®¨è®º)</p><p>ä»é«˜é˜¶å‡½æ•°è§’åº¦æ¥çœ‹ï¼Œå¯ä»¥ä¸€ç»„å¯¹æ•°ç»„æ“ä½œçš„ç®€å•æ–¹æ³•åºåˆ—è¡¨ç¤ºä¸ºå›¾ä¸‰æ‰€ç¤ºçš„å½¢å¼ã€‚æ‰“ç ´å‡½æ•°é“¾çš„çº¦æŸå°±èƒ½å¤Ÿè‡ªç”±åœ°æ’åˆ—æ‰€æœ‰ç‹¬ç«‹çš„å‡½æ•°æ“ä½œï¼Œè€Œå¯ä»¥ä½¿ç”¨å‡½æ•°ç®¡é“æ¥å®ç°è¿™ä¸€ç›®çš„ã€‚</p><p><img src="https://i.loli.net/2021/08/08/FMG4nCA3bhuK81v.png"></p><h3 id="1-2-å‡½æ•°çš„ç®¡é“åŒ–"><a href="#1-2-å‡½æ•°çš„ç®¡é“åŒ–" class="headerlink" title="1.2 å‡½æ•°çš„ç®¡é“åŒ–"></a>1.2 å‡½æ•°çš„ç®¡é“åŒ–</h3><p>å‡½æ•°å¼ç¼–ç¨‹èƒ½å¤Ÿæ¶ˆé™¤æ–¹æ³•é“¾ä¸­å­˜åœ¨çš„é™åˆ¶ï¼Œä½¿å¾—ä»»ä½•å‡½æ•°çš„ç»„åˆéƒ½æ›´åŠ çµæ´»ã€‚ç®¡é“æ˜¯æ¾æ•£ç»“åˆçš„æœ‰å‘å‡½æ•°åºåˆ—ï¼Œä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºä¼šä½œä¸ºä¸‹ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚å›¾å››æŠ½è±¡åœ°è¯´æ˜äº†ä»¥ä¸åŒç±»å‹å¯¹è±¡ä½œä¸ºè¾“å…¥çš„å‡½æ•°çš„è¿æ¥æ–¹å¼ã€‚</p><p><img src="https://i.loli.net/2021/08/08/1zSkQ9sacgx3ODE.png"></p><p>è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼ä¸­çš„ç®¡é“ä¸è¿‡æ»¤å™¨æ¨¡å¼ï¼Œå®ƒæ˜¯ä»å‡½æ•°å¼ç¼–ç¨‹è¡å˜è€Œæ¥çš„ï¼ˆå…¶ä¸­çš„è¿‡æ»¤å™¨å°±æ˜¯å„ä¸ªå‡½æ•°ï¼‰ã€‚</p><p>æ¯”è¾ƒå›¾ä¸‰å’Œå›¾å››å°±ä¼šå‘ç°ä¸€ä¸ªå…³é”®çš„åŒºåˆ«ï¼šæ–¹æ³•é“¾æ¥é€šè¿‡å¯¹è±¡çš„æ–¹æ³•ç´§å¯†è¿æ¥ï¼›è€Œç®¡é“ä»¥å‡½æ•°ä½œä¸ºç»„ä»¶ï¼Œå°†å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºæ¾æ•£åœ°è¿æ¥åœ¨ä¸€èµ·ã€‚ä½†æ˜¯ï¼Œä¸ºäº†å®ç°ç®¡é“ï¼Œè¢«è¿æ¥çš„å‡½æ•°å¿…é¡»åœ¨å…ƒæ•°ï¼ˆarityï¼‰å’Œç±»å‹ä¸Šç›¸äº’å…¼å®¹ã€‚</p><h2 id="2-ç®¡é“å‡½æ•°çš„å…¼å®¹æ¡ä»¶"><a href="#2-ç®¡é“å‡½æ•°çš„å…¼å®¹æ¡ä»¶" class="headerlink" title="2 ç®¡é“å‡½æ•°çš„å…¼å®¹æ¡ä»¶"></a>2 ç®¡é“å‡½æ•°çš„å…¼å®¹æ¡ä»¶</h2><p>é¢å‘å¯¹è±¡çš„ç¼–ç¨‹åœ¨ä¸€äº›ç‰¹å®šæƒ…å†µä¸‹ï¼ˆå…¶ä¸­ä¹‹ä¸€æ˜¯è®¤è¯ä¸æˆæƒï¼‰å¶å°”ä¼šä½¿ç”¨ç®¡é“ã€‚è€Œå‡½æ•°å¼ç¼–ç¨‹å°†ç®¡é“è§†ä¸ºæ„å»ºç¨‹åºçš„å”¯ä¸€æ–¹æ³•ã€‚</p><p>é€šå¸¸æ¥è¯´ï¼Œå¯¹äºä¸åŒçš„ä»»åŠ¡ï¼Œé—®é¢˜çš„å®šä¹‰ä¸è§£å†³æ–¹æ¡ˆé—´æ€»æ˜¯å­˜åœ¨å¾ˆå¤§çš„å·®å¼‚ã€‚å› æ­¤ï¼Œç‰¹å®šçš„è®¡ç®—å¿…é¡»åœ¨ç‰¹å®šçš„é˜¶æ®µè¿›è¡Œã€‚è¿™äº›é˜¶æ®µç”±ä¸åŒçš„å‡½æ•°è¡¨å¾ï¼Œè€Œæ‰€é€‰å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªå…¼å®¹æ¡ä»¶ã€‚</p><ul><li>ç±»å‹â€”â€”å‡½æ•°çš„è¿”å›ç±»å‹å¿…é¡»ä¸æ¥æ”¶å‡½æ•°çš„å‚æ•°ç±»å‹ç›¸åŒ¹é…ã€‚</li><li>å…ƒæ•°â€”â€”æ¥æ”¶å‡½æ•°å¿…é¡»å£°æ˜è‡³å°‘ä¸€ä¸ªå‚æ•°æ‰èƒ½å¤„ç†ä¸Šä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚</li></ul><h3 id="2-1-å‡½æ•°çš„ç±»å‹å…¼å®¹æ¡ä»¶"><a href="#2-1-å‡½æ•°çš„ç±»å‹å…¼å®¹æ¡ä»¶" class="headerlink" title="2.1 å‡½æ•°çš„ç±»å‹å…¼å®¹æ¡ä»¶"></a>2.1 å‡½æ•°çš„ç±»å‹å…¼å®¹æ¡ä»¶</h3><p>åœ¨è®¾è®¡å‡½æ•°ç®¡é“æ—¶ï¼Œå‡½æ•°çš„è¿”å›ç±»å‹ä¸å‡½æ•°çš„æ¥æ”¶å‚æ•°ä¹‹é—´å…·æœ‰ä¸€å®šç¨‹åº¦çš„å…¼å®¹æ€§æ˜¯æå…¶é‡è¦çš„ã€‚</p><p>ç”±äº<code>JavaScirpt</code>æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œå› æ­¤ä»ç±»å‹è§’åº¦æ¥çœ‹ï¼Œæ— é¡»åƒä½¿ç”¨ä¸€äº›é™æ€ç±»å‹è¯­è¨€ä¸€æ ·å¤ªè¿‡å…³æ³¨ç±»å‹ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨åº”ç”¨ä¸­è¡¨ç°å¾—åƒæŸä¸ªç‰¹å®šç±»å‹ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯è¯¥ç±»å‹ã€‚è¿™ä¹Ÿè¢«ç§°ä¸ºé¸­å­ç±»å‹ï¼šâ€œå¦‚æœèµ°èµ·æ¥åƒé¸­å­ï¼Œå¹¶ä¸”åƒé¸­å­ä¸€æ ·å«ï¼Œé‚£è¿™å°±æ˜¯ä¸€åªé¸­å­ã€‚â€</p><p><code>JavaScript</code>çš„åŠ¨æ€è°ƒåº¦æœºåˆ¶ä¼šå°è¯•åœ¨å¯¹è±¡ä¸­æŸ¥æ‰¾å±æ€§ä¸æ–¹æ³•ï¼Œè€Œä¸å…³æ³¨ç±»å‹ä¿¡æ¯ã€‚è™½ç„¶è¿™éå¸¸çµæ´»ï¼Œä½†å¼€å‘è€…ä»ç„¶éœ€è¦äº†è§£ä¸€ä¸ªå‡½æ•°æ‰€æœŸæœ›çš„å‚æ•°ç±»å‹ã€‚ä½¿ç”¨æ¸…æ™°çš„å®šä¹‰ï¼ˆä¾‹å¦‚åœ¨ä»£ç ä¸­ä½¿ç”¨ <code>Haskell</code> ç¬¦å·æ ‡è®°ï¼‰å¯ä»¥ä½¿ç¨‹åºæ›´æ˜“ç†è§£ã€‚</p><p>æ­£å¼åœ°è®²ï¼Œä»…å½“ f çš„è¾“å‡ºç±»å‹ç­‰åŒäºå‡½æ•° g çš„è¾“å…¥æ—¶ï¼Œä¸¤ä¸ªå‡½æ•° f å’Œ g æ˜¯ç±»å‹å…¼å®¹çš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ªå¤„ç†ç”¨æˆ·è¾“å…¥çš„ç®€å•ç¨‹åºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">trim :: <span class="built_in">String</span> -&gt; <span class="built_in">String</span> &lt;--- æˆªæ‰é¦–æœ«ç©ºç™½ç¬¦</span><br><span class="line"><span class="attr">normalize</span> :: <span class="built_in">String</span> -&gt; <span class="built_in">String</span> &lt;--- å»é™¤æ¨ªçº¿</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œ<code>normalize</code>çš„è¾“å…¥ä¸<code>trim</code>çš„è¾“å‡ºæœä»å…¼å®¹æ€§çš„å¯¹åº”å…³ç³»ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸€ä¸ªç®€å•çš„ç®¡é“åºåˆ—ä¸­è°ƒç”¨å®ƒä»¬:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// trim :: String -&gt; String</span></span><br><span class="line"><span class="keyword">const</span> trim = <span class="function">(<span class="params">str</span>) =&gt;</span> str.replace(<span class="regexp">/^\s*|\s*$/g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// normalize :: String -&gt; String</span></span><br><span class="line"><span class="keyword">const</span> normalize = <span class="function">(<span class="params">str</span>) =&gt;</span> str.replace(<span class="regexp">/\-/g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">normalize(trim(<span class="string">&quot; 444-44-4444 &quot;</span>));</span><br><span class="line"><span class="comment">//-&gt; &#x27;444444444&#x27; &lt;--- æ‰‹åŠ¨æ„å»ºç³»åˆ—ç®¡é“è°ƒç”¨ä¸¤ä¸ªå‡½æ•°ï¼ˆä¹‹åä¼šæ¶‰åŠå¦‚ä½•è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ï¼‰ã€‚ä½¿ç”¨å¸¦æœ‰é¦–æœ«ç©ºç™½ç¬¦çš„è¾“å…¥æµ‹è¯•</span></span><br></pre></td></tr></table></figure><p>ç±»å‹å›ºç„¶é‡è¦ï¼Œä½†åœ¨<code>JavaScript</code>ä¸­ï¼Œæ›´å…³é”®çš„æ˜¯å‡½æ•°å…ƒæ•°çš„å…¼å®¹æ€§ã€‚</p><h2 id="2-2-å‡½æ•°ä¸å…ƒæ•°ï¼šå…ƒç»„çš„åº”ç”¨"><a href="#2-2-å‡½æ•°ä¸å…ƒæ•°ï¼šå…ƒç»„çš„åº”ç”¨" class="headerlink" title="2.2 å‡½æ•°ä¸å…ƒæ•°ï¼šå…ƒç»„çš„åº”ç”¨"></a>2.2 å‡½æ•°ä¸å…ƒæ•°ï¼šå…ƒç»„çš„åº”ç”¨</h2><p>å…ƒæ•°å®šä¹‰ä¸ºå‡½æ•°æ‰€æ¥æ”¶çš„å‚æ•°æ•°é‡ï¼Œä¹Ÿè¢«ç§°ä¸ºå‡½æ•°çš„é•¿åº¦ï¼ˆlengthï¼‰ã€‚å°½ç®¡åœ¨å…¶ä»–ç¼–ç¨‹èŒƒå¼ä¸­ï¼Œå…ƒæ•°æ˜¯æœ€åŸºæœ¬çš„ï¼Œä½†åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå¼•ç”¨é€æ˜çš„å¿…ç„¶ç»“æœå°±æ˜¯ï¼Œå£°æ˜çš„å‡½æ•°å‚æ•°æ•°é‡å¾€å¾€ä¸å…¶å¤æ‚æ€§æˆæ­£æ¯”ã€‚ä¾‹å¦‚ï¼Œæ“ä½œä¸€ä¸ªå­—ç¬¦ä¸²çš„å‡½æ•°å¾ˆå¯èƒ½æ¯”å…·æœ‰ 3 ä¸ªæˆ– 4 ä¸ªå‚æ•°çš„å‡½æ•°ç®€å•å¾—å¤šï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// isValid :: String -&gt; Boolean</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isValid</span>(<span class="params">str</span>) </span>&#123; &lt;--- ä½¿ç”¨ç®€å•</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// makeAsyncHttp:: String, String, Array -&gt; Boolean</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeAsyncHttp</span> (<span class="params">method, url, data</span>) </span>&#123; <span class="comment">//&lt;--- éš¾ä»¥ä½¿ç”¨ï¼Œå› ä¸ºå¿…é¡»å…ˆè®¡ç®—å‡ºæ‰€æœ‰å‚æ•°</span></span><br><span class="line">    Â·Â·Â·</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªå…·æœ‰å•ä¸€å‚æ•°çš„çº¯å‡½æ•°æ˜¯æœ€ç®€å•çš„ï¼Œå› ä¸ºå…¶å®ç°ç›®çš„éå¸¸å•çº¯ï¼Œä¹Ÿå°±æ„å‘³ç€èŒè´£å•ä¸€ã€‚å› æ­¤ï¼Œåº”è¯¥å°½å¯èƒ½åœ°ä½¿ç”¨å…·æœ‰å°‘é‡å‚æ•°çš„å‡½æ•°ï¼Œè¿™æ ·çš„å‡½æ•°æ›´åŠ çµæ´»å’Œé€šç”¨ã€‚ç„¶è€Œï¼Œæ€»æ˜¯ä½¿ç”¨ä¸€å…ƒå‡½æ•°å¹¶éé‚£ä¹ˆå®¹æ˜“ã€‚ä¾‹å¦‚ï¼Œåœ¨çœŸå®ä¸–ç•Œä¸­ï¼ŒisValid å‡½æ•°å¯èƒ½ä¼šé¢å¤–è¿”å›ä¸€ä¸ªæè¿°é”™è¯¯ä¿¡æ¯çš„å€¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">isValid :: <span class="built_in">String</span> -&gt; (<span class="built_in">Boolean</span>, <span class="built_in">String</span>) <span class="comment">// &lt;--- è¿”å›å«æœ‰éªŒè¯çŠ¶æ€æˆ–é”™è¯¯ä¿¡æ¯çš„ç»“æ„ä½“</span></span><br><span class="line">isValid(<span class="string">&#x27; 444-444-44444&#x27;</span>); <span class="comment">//-&gt; (false, &#x27;Input is too long!&#x27;)</span></span><br></pre></td></tr></table></figure><p>ä½†å¦‚ä½•è¿”å›ä¸¤ä¸ªä¸åŒçš„å€¼å‘¢ï¼Ÿå‡½æ•°å¼è¯­è¨€é€šè¿‡ä¸€ä¸ªç§°ä¸ºå…ƒç»„çš„ç»“æ„æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å…ƒç»„æ˜¯æœ‰é™çš„ã€æœ‰åºçš„å…ƒç´ åˆ—è¡¨ï¼Œé€šå¸¸ç”±ä¸¤ä¸ªæˆ–ä¸‰ä¸ªå€¼æˆç»„å‡ºç°ï¼Œè®°ä¸º<code>(a, b,c)</code>ã€‚ç”±æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…ƒç»„ä½œä¸º<code>isValid</code>å‡½æ•°çš„è¿”å›å€¼â€”â€”å®ƒå°†çŠ¶æ€ä¸å¯èƒ½çš„é”™è¯¯æ¶ˆæ¯æ†ç»‘ï¼Œä½œä¸ºå•ä¸ªå®ä½“è¿”å›ï¼Œå¹¶éšåä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰ã€‚</p><p>ä¸‹é¢è¯¦ç»†æ¢è®¨ä¸€ä¸‹å…ƒç»„ã€‚å…ƒç»„æ˜¯ä¸å¯å˜çš„ç»“æ„ï¼Œå®ƒå°†ä¸åŒç±»å‹çš„å…ƒç´ æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œä»¥ä¾¿å°†å®ƒä»¬ä¼ é€’åˆ°å…¶ä»–å‡½æ•°ä¸­ã€‚å°†æ•°æ®æ‰“åŒ…è¿”å›çš„æ–¹å¼è¿˜åŒ…æ‹¬å­—é¢å¯¹è±¡æˆ–æ•°ç»„ç­‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="attr">status</span> : <span class="literal">false</span>, or <span class="keyword">return</span> [<span class="literal">false</span>, <span class="string">&#x27;Input is too long!&#x27;</span>];</span><br><span class="line">message: <span class="string">&#x27;Input is too long!&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½†å½“æ¶‰åŠå‡½æ•°é—´çš„æ•°æ®ä¼ è¾“æ—¶ï¼Œå…ƒç»„èƒ½å¤Ÿå…·æœ‰æ›´å¤šçš„ä¼˜ç‚¹ã€‚</p><ul><li>ä¸å¯å˜çš„â€”â€”ä¸€æ—¦åˆ›å»ºï¼Œå°±æ— æ³•æ”¹å˜ä¸€ä¸ªå…ƒç»„çš„å†…éƒ¨å†…å®¹ã€‚</li><li>é¿å…åˆ›å»ºä¸´æ—¶ç±»å‹â€”â€”å…ƒç»„å¯ä»¥å°†å¯èƒ½æ¯«ä¸ç›¸å…³çš„æ•°æ®ç›¸å…³è”ã€‚è€Œå®šä¹‰å’Œå®ä¾‹åŒ–ä¸€äº›ä»…ç”¨äºæ•°æ®åˆ†ç»„çš„æ–°ç±»å‹ä½¿å¾—æ¨¡å‹å¤æ‚å¹¶ä»¤äººè´¹è§£ã€‚</li><li>é¿å…åˆ›å»ºå¼‚æ„æ•°ç»„â€”â€”åŒ…å«ä¸åŒç±»å‹å…ƒç´ çš„æ•°ç»„ä½¿ç”¨èµ·æ¥é¢‡ä¸ºå›°éš¾ï¼Œå› ä¸ºä¼šå¯¼è‡´ä»£ç ä¸­å……æ»¡å¤§é‡çš„é˜²å¾¡æ€§ç±»å‹æ£€æŸ¥ã€‚ä¼ ç»Ÿä¸Šï¼Œæ•°ç»„æ„åœ¨å­˜å‚¨ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚</li></ul><p><code>JavaScript</code>å¹¶ä¸åŸç”Ÿåœ°æ”¯æŒ<code>Tuple</code>æ•°æ®ç±»å‹ã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ª<code>Scala</code>ä¸­çš„å…ƒç»„å®šä¹‰ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t = (<span class="number">30</span>, <span class="number">60</span>, <span class="number">90</span>);</span><br></pre></td></tr></table></figure><p>å¯ä»¥åƒè¿™æ ·è®¿é—®å„ä¸ªå…ƒç´ ï¼š</p><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sumAnglesTriangle = (t._1 + t._2 + t._3 = <span class="number">180</span>);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯<code>JavaScript</code>å·²ç»æä¾›äº†å®ç°å…ƒç»„æ‰€éœ€çš„æ‰€æœ‰å·¥å…·,å®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Tuple = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="comment">/* types */</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> typeInfo = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>); <span class="comment">// &lt;--- è¯»å–å‚æ•°ä½œä¸ºå…ƒç»„çš„å…ƒç´ ç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> _T = <span class="function"><span class="keyword">function</span> (<span class="params"><span class="comment">/* values */</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// &lt;--- å£°æ˜å†…éƒ¨ç±»å‹_Tï¼Œä»¥ä¿éšœç±»å‹ä¸å€¼åŒ¹é…</span></span><br><span class="line">    <span class="keyword">const</span> values = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">0</span>); <span class="comment">// &lt;--- æå–å‚æ•°ä½œä¸ºå…ƒç»„å†…çš„å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      values.some(</span><br><span class="line">        <span class="function">(<span class="params"></span></span></span><br><span class="line"><span class="params"><span class="function">          val <span class="comment">// &lt;--- æ£€æŸ¥éç©ºå€¼ã€‚å‡½æ•°å¼æ•°æ®ç±»å‹ä¸å…è®¸ç©ºå€¼</span></span></span></span><br><span class="line"><span class="params"><span class="function">        </span>) =&gt;</span> val === <span class="literal">null</span> || val === <span class="literal">undefined</span></span><br><span class="line">      )</span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">ReferenceError</span>(<span class="string">&quot;Tuples may not have any null values&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (values.length !== typeInfo.length) &#123;</span><br><span class="line">      <span class="comment">// &lt;--- æŒ‰ç…§å®šä¹‰ç±»å‹çš„ä¸ªæ•°æ£€æŸ¥å…ƒç»„çš„å…ƒæ•°</span></span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Tuple arity does not match its prototype&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    values.map(<span class="function"><span class="keyword">function</span> (<span class="params">val, index</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// &lt;--- ä½¿ç”¨ checkType æ£€æŸ¥æ¯ä¸€ä¸ªå€¼éƒ½èƒ½åŒ¹é…å…¶ç±»å‹å®šä¹‰ã€‚å…¶ä¸­çš„å…ƒç´ éƒ½å¯ä»¥é€šè¿‡_n è·å–ï¼Œ n ä¸ºå…ƒç´ çš„ç´¢å¼•ï¼ˆæ³¨æ„æ˜¯ä» 1 å¼€å§‹ï¼‰</span></span><br><span class="line">      <span class="built_in">this</span>[<span class="string">&quot;_&quot;</span> + (index + <span class="number">1</span>)] = checkType(typeInfo[index])(val);</span><br><span class="line">    &#125;, <span class="built_in">this</span>);</span><br><span class="line">    <span class="built_in">Object</span>.freeze(<span class="built_in">this</span>); <span class="comment">// &lt;--- è®©å…ƒç»„å®ä¾‹ä¸å¯å˜</span></span><br><span class="line">  &#125;;</span><br><span class="line">  _T.prototype.values = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// &lt;--- æå–å…ƒç»„ä¸­çš„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 çš„è§£æ„èµ‹å€¼æŠŠå…ƒç´ èµ‹å€¼åˆ°å˜é‡ä¸Š</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="built_in">this</span>).map(<span class="function"><span class="keyword">function</span> (<span class="params">k</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>[k];</span><br><span class="line">    &#125;, <span class="built_in">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> _T;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// checkType :: Type -&gt; Type -&gt; Type | TypeError</span></span><br><span class="line"><span class="keyword">const</span> checkType = curry2(<span class="function"><span class="keyword">function</span> (<span class="params">typeDef, actualType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (R.is(typeDef, actualType)) &#123;</span><br><span class="line">    <span class="comment">// &lt;--- ä½¿ç”¨ R.is()æ£€æŸ¥ç±»å‹ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">return</span> actualType;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(</span><br><span class="line">      <span class="string">&quot;Type mismatch. Expected [&quot;</span> +</span><br><span class="line">        typeDef +</span><br><span class="line">        <span class="string">&quot;] but found [&quot;</span> +</span><br><span class="line">        <span class="keyword">typeof</span> actualType +</span><br><span class="line">        <span class="string">&quot;]&quot;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">checkType(<span class="built_in">String</span>)(<span class="string">&quot;Curry&quot;</span>); <span class="comment">//-&gt; String</span></span><br><span class="line">checkType(<span class="built_in">Number</span>)(<span class="number">3</span>); <span class="comment">//-&gt; Number</span></span><br><span class="line">checkType(<span class="built_in">Date</span>)(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">//-&gt; Date</span></span><br><span class="line">checkType(<span class="built_in">Object</span>)(&#123;&#125;); <span class="comment">//-&gt; Object</span></span><br><span class="line">checkType(<span class="built_in">String</span>)(<span class="number">42</span>); <span class="comment">//-&gt; Throws TypeError</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢å®šä¹‰çš„å…ƒç»„å¯¹è±¡æ˜¯ä¸å¯å˜ä¸”é•¿åº¦å›ºå®šçš„æ•°æ®ç»“æ„ï¼Œæ˜¯å¯ç”¨äºåœ¨å‡½æ•°é—´é€šè®¯çš„å­˜å‚¨äº† n ä¸ªä¸åŒç±»å‹å€¼çš„å¼‚æ„é›†åˆã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¯ä»¥ç”¨å…ƒç»„æ¥å¿«é€Ÿæ„å»ºå¦‚<code>Status</code>è¿™æ ·çš„å€¼å¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Status = Tuple(<span class="built_in">Boolean</span>, <span class="built_in">String</span>);</span><br></pre></td></tr></table></figure><p>ä¸‹é¢åˆ©ç”¨å…ƒç»„æ¥å®Œæˆç”¨æˆ·è¾“å…¥éªŒè¯ï¼šä½¿ç”¨äº†å…ƒç»„çš„ isValid å‡½æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// trim :: String -&gt; String</span></span><br><span class="line"><span class="keyword">const</span> trim = <span class="function">(<span class="params">str</span>) =&gt;</span> str.replace(<span class="regexp">/^\s*|\s*$/g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// normalize :: String -&gt; String</span></span><br><span class="line"><span class="keyword">const</span> normalize = <span class="function">(<span class="params">str</span>) =&gt;</span> str.replace(<span class="regexp">/\-/g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="comment">// isValid :: String -&gt; Status</span></span><br><span class="line"><span class="keyword">const</span> isValid = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (str.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Status(<span class="literal">false</span>, <span class="string">&quot;Invald input. Expected non-empty value!&quot;</span>); <span class="comment">// &lt;--- å£°æ˜åŒ…å«çŠ¶æ€ï¼ˆ Booleanï¼‰å’Œæ¶ˆæ¯ï¼ˆ Stringï¼‰çš„ç±»å‹Status</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Status(<span class="literal">true</span>, <span class="string">&quot;Success!&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">isValid(normalize(strim(<span class="string">&quot;444-44-4444&quot;</span>))); <span class="comment">//-&gt; (true, &#x27;Success!&#x27;)</span></span><br></pre></td></tr></table></figure><p>åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒäºŒå…ƒç»„å‡ºç°å¾—éå¸¸é¢‘ç¹ï¼Œå°†å…¶è®¾å®šä¸ºä¸€ç­‰çš„å¯¹è±¡éå¸¸å…·æœ‰å®é™…æ„ä¹‰ã€‚åœ¨<code>ES6</code>è§£æ„èµ‹å€¼ç‰¹æ€§çš„æ”¯æŒä¸‹ï¼Œå¯ä»¥ç®€æ˜åœ°å°†å…ƒç»„å€¼æ˜ å°„åˆ°å˜é‡ä¸­ã€‚å¦‚ä¸‹ä»£ç ä½¿ç”¨å…ƒç»„åˆ›å»ºäº†ä¸€ä¸ªåä¸º<code>StringPair</code>çš„å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> StringPair = Tuple(<span class="built_in">String</span>, <span class="built_in">String</span>);</span><br><span class="line"><span class="keyword">const</span> name = <span class="keyword">new</span> StringPair(<span class="string">&quot;Barkley&quot;</span>, <span class="string">&quot;Rosser&quot;</span>);</span><br><span class="line">[first, last] = name.values();</span><br><span class="line">first; <span class="comment">//-&gt; &#x27;Barkley&#x27;</span></span><br><span class="line">last; <span class="comment">//-&gt; &#x27;Rosser&#x27;</span></span><br><span class="line"><span class="keyword">const</span> fullname = <span class="keyword">new</span> StringPair(<span class="string">&quot;J&quot;</span>, <span class="string">&quot;Barkley&quot;</span>, <span class="string">&quot;Rosser&quot;</span>); <span class="comment">// &lt;--- æŠ›å‡ºå…ƒç´ ä¸åŒ¹é…çš„é”™è¯¯</span></span><br></pre></td></tr></table></figure><p>å…ƒç»„æ˜¯å‡å°‘å‡½æ•°å…ƒæ•°çš„æ–¹å¼ä¹‹ä¸€ï¼Œä½†è¿˜å¯ä»¥ä½¿ç”¨æ›´å¥½çš„æ–¹å¼å»åº”å¯¹é‚£äº›ä¸é€‚äºå…ƒç»„çš„æƒ…å†µã€‚é€šè¿‡å¼•å…¥å‡½æ•°æŸ¯é‡ŒåŒ–ä¸ä»…å¯ä»¥é™ä½å…ƒæ•°ï¼Œè¿˜å¯ä»¥å¢å¼ºä»£ç çš„æ¨¡å—åŒ–å’Œå¯é‡ç”¨æ€§ã€‚</p><h2 id="3-æŸ¯é‡ŒåŒ–çš„å‡½æ•°æ±‚å€¼"><a href="#3-æŸ¯é‡ŒåŒ–çš„å‡½æ•°æ±‚å€¼" class="headerlink" title="3 æŸ¯é‡ŒåŒ–çš„å‡½æ•°æ±‚å€¼"></a>3 æŸ¯é‡ŒåŒ–çš„å‡½æ•°æ±‚å€¼</h2><p>å°†å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™ä¸€å…ƒå‡½æ•°æ˜¯ååˆ†å®¹æ˜“çš„ï¼Œä½†å¦‚æœç›®æ ‡å‡½æ•°éœ€è¦æ›´å¤šå‚æ•°å‘¢ï¼Ÿ</p><p>ä¸ºäº†ç†è§£<code>JavaScript</code>çš„æŸ¯é‡ŒåŒ–ï¼Œé¦–å…ˆå¿…é¡»äº†è§£æŸ¯é‡ŒåŒ–çš„æ±‚å€¼å’Œå¸¸è§„ï¼ˆéæŸ¯é‡ŒåŒ–çš„ï¼‰æ±‚å€¼ä¹‹é—´çš„åŒºåˆ«ã€‚</p><p><code>JavaScript</code>æ˜¯å…è®¸åœ¨ç¼ºå°‘å‚æ•°çš„æƒ…å†µä¸‹å¯¹å¸¸è§„æˆ–éæŸ¯é‡ŒåŒ–å‡½æ•°è¿›è¡Œè°ƒç”¨çš„ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå®šä¹‰ä¸€ä¸ªå‡½æ•°<code>f(a, b, c)</code>ï¼Œå¹¶åªåœ¨è°ƒç”¨æ—¶ä¼ é€’<code>a</code>ï¼Œ<code>JavaScript</code>è¿è¡Œæ—¶çš„è°ƒç”¨æœºåˆ¶ä¼šå°†<code>b</code>å’Œ<code>c</code>è®¾ä¸º<code>undefined</code>ã€‚å¦‚å›¾äº”ï¼š</p><p><img src="https://i.loli.net/2021/08/08/nlyjCQxwFL8kYpS.png"></p><p>å†çœ‹æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œå®ƒè¦æ±‚æ‰€æœ‰å‚æ•°éƒ½è¢«æ˜ç¡®åœ°å®šä¹‰ï¼Œå› æ­¤å½“ä½¿ç”¨éƒ¨åˆ†å‚æ•°è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨çœŸæ­£è¿è¡Œä¹‹å‰ç­‰å¾…å¤–éƒ¨æä¾›å…¶ä½™çš„å‚æ•°ã€‚å›¾å…­èƒ½å¤Ÿç›´è§‚åœ°è¡¨ç°è¿™ä¸€ç‚¹ï¼š</p><p><img src="https://i.loli.net/2021/08/08/a4dMPNFtcZzWObu.png"></p><p>æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§åœ¨æ‰€æœ‰å‚æ•°è¢«æä¾›ä¹‹å‰ï¼ŒæŒ‚èµ·æˆ–â€œå»¶è¿Ÿâ€å‡½æ•°æ‰§è¡Œï¼Œå°†å¤šå‚å‡½æ•°è½¬æ¢ä¸ºä¸€å…ƒå‡½æ•°åºåˆ—çš„æŠ€æœ¯ã€‚å…·æœ‰ä¸‰ä¸ªå‚æ•°çš„æŸ¯é‡ŒåŒ–å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curry(f) :: (a,b,c) -&gt; f(a) -&gt; f(b)-&gt; f(c)</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç¬¦å·æè¿°è¡¨æ˜ï¼Œ<code>curry</code>æ˜¯ä¸€ç§ä»å‡½æ•°åˆ°å‡½æ•°çš„æ˜ å°„ï¼Œå°†è¾“å…¥<code>(a, b, c)</code>åˆ†è§£ä¸ºå¤šä¸ªåˆ†ç¦»çš„å•å‚æ•°è°ƒç”¨ã€‚åœ¨çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ï¼ˆå¦‚<code>Haskell</code>ï¼‰ï¼ŒæŸ¯é‡ŒåŒ–æ˜¯åŸç”Ÿç‰¹æ€§ï¼Œæ˜¯ä»»ä½•å‡½æ•°å®šä¹‰ä¸­çš„ç»„æˆéƒ¨åˆ†ã€‚ç”±äº<code>JavaScript</code>åŸç”Ÿä¸æ”¯æŒæŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œå› æ­¤éœ€è¦ç¼–å†™ä¸€äº›ä»£ç æ¥å®ç°å®ƒã€‚</p><p>æˆ‘ä»¬å…ˆä»äºŒå…ƒå‚æ•°çš„æ‰‹åŠ¨æŸ¯é‡ŒåŒ–ä¾‹å­å¼€å§‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry2</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">firstArg</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// &lt;--- ç¬¬ä¸€æ¬¡è°ƒç”¨ curry2ï¼Œè·å¾—ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">secondArg</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// &lt;--- ç¬¬äºŒæ¬¡è°ƒç”¨è·å¾—ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line">      <span class="keyword">return</span> fn(firstArg, secondArg); <span class="comment">// &lt;--- å°†ä¸¤ä¸ªå‚æ•°åº”ç”¨åˆ°å‡½æ•° fn ä¸Š</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§è¯æ³•ä½œç”¨åŸŸï¼ˆé—­åŒ…ï¼‰ï¼Œå…¶è¿”å›çš„å‡½æ•°åªä¸è¿‡æ˜¯ä¸€ä¸ªæ¥æ”¶åç»­å‚æ•°çš„ç®€å•åµŒå¥—å‡½æ•°åŒ…è£…å™¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•åº”ç”¨ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = curry2(<span class="function"><span class="keyword">function</span> (<span class="params">last, first</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> StringPair(<span class="string">&quot;Barkley&quot;</span>, <span class="string">&quot;Rosser&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">[first, last] = name(<span class="string">&quot;Curry&quot;</span>)(<span class="string">&quot;Haskell&quot;</span>).values(); <span class="comment">// &lt;--- å½“ç»™å®šä¸¤ä¸ªå‚æ•°æ—¶ï¼Œå‡½æ•°ä¼šå®Œå…¨æ±‚å€¼</span></span><br><span class="line">first; <span class="comment">//-&gt; &#x27;Curry&#x27;</span></span><br><span class="line">last; <span class="comment">//-&gt; &#x27;Haskell&#x27;</span></span><br><span class="line">name(<span class="string">&quot;Curry&quot;</span>); <span class="comment">//-&gt; Function &lt;--- å½“åªæä¾›ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯å°†ç¬¬äºŒä¸ªå‚æ•°å½“ä½œ undefined</span></span><br></pre></td></tr></table></figure><p>curry2 èƒ½å¤Ÿèƒœä»»ç®€å•çš„ä»»åŠ¡ï¼Œä½†æ˜¯å½“æ„å»ºæ›´å¤æ‚çš„åŠŸèƒ½æ—¶ï¼Œå°±éœ€è¦èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†ä»»æ„æ•°é‡å‚æ•°çš„æŸ¯é‡ŒåŒ–å‡½æ•°ã€‚</p><p><code>curry</code>æ˜¯ä¸€ä¸ªå¾ˆé•¿ä¸”å¤æ‚çš„å‡½æ•°ï¼Œå› æ­¤ä¸å…¶å»è§£é‡Šå®ƒä»¤äººå¤´ç–¼çš„å®ç°ï¼Œä¸å¦‚è®¨è®ºæ›´ä¸ºæœ‰ç”¨çš„ä¸œè¥¿ï¼ˆè€…å¯ä»¥åœ¨<code>Lodash</code>å’Œ<code>Ramda</code>ä¸­æ‰¾åˆ°<code>curry</code>åŠå…¶å¦ä¸¤ä¸ªç‰ˆæœ¬<code>curryRight</code>å’Œ<code>curryN</code>çš„å®ç°ï¼‰ã€‚å¯ä»¥ä½¿ç”¨<code>R.curry</code>å¯¹ä»»æ„æ•°é‡å‚æ•°çš„å‡½æ•°è¿›è¡Œè‡ªåŠ¨çš„æŸ¯é‡ŒåŒ–ã€‚</p><p>å¯ä»¥å°†è‡ªåŠ¨æŸ¯é‡ŒåŒ–æƒ³è±¡ä¸ºåŸºäºå£°æ˜å‚æ•°çš„æ•°é‡äººå·¥åˆ›å»ºå¯¹åº”åµŒå¥—å‡½æ•°ä½œç”¨åŸŸçš„è¿‡ç¨‹ã€‚æŸ¯é‡ŒåŒ–<code>fullname</code>å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fullname :: (String, String) -&gt; String</span></span><br><span class="line"><span class="keyword">const</span> fullname = <span class="function"><span class="keyword">function</span> (<span class="params">first, last</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤šä¸ªå‚æ•°ä¼šè¢«é€šè¿‡å¦‚ä¸‹å½¢å¼è½¬æ¢æˆå¤šä¸ªä¸€å…ƒå‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fullname :: String -&gt; String -&gt; String</span></span><br><span class="line"><span class="keyword">const</span> fullname =<span class="function"><span class="keyword">function</span> (<span class="params">first</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">last</span>) </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æ¥çœ‹ä¸€äº›æŸ¯é‡ŒåŒ–çš„å®é™…åº”ç”¨ã€‚å°¤å…¶æ˜¯ï¼Œå®ƒå¯ä»¥ç”¨äºå®ç°ä»¥ä¸‹ä¸¤ç§æµè¡Œçš„è®¾è®¡æ¨¡å¼ã€‚</p><ul><li>ä»¿çœŸå‡½æ•°æ¥å£</li><li>å®ç°å¯é‡ç”¨æ¨¡å—åŒ–å‡½æ•°æ¨¡æ¿</li></ul><h3 id="3-1-ä»¿çœŸå‡½æ•°å·¥å‚"><a href="#3-1-ä»¿çœŸå‡½æ•°å·¥å‚" class="headerlink" title="3.1 ä»¿çœŸå‡½æ•°å·¥å‚"></a>3.1 ä»¿çœŸå‡½æ•°å·¥å‚</h3><p>åœ¨é¢å‘å¯¹è±¡ä¸–ç•Œä¸­ï¼Œæ¥å£æ˜¯ç”¨äºå®šä¹‰å­ç±»å¿…é¡»å®ç°çš„å¥‘çº¦æŠ½è±¡ç±»å‹ã€‚å¦‚æœåˆ›å»ºçš„æ¥å£åŒ…å«å‡½æ•°<code>findStudent(id)</code>ï¼Œé‚£ä¹ˆå®ä½“ç±»å¿…é¡»å®ç°æ­¤å‡½æ•°ã€‚ä¸‹é¢è¿™æ®µ<code>Java</code>ç¤ºä¾‹ä»£ç è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentStore</span> </span>&#123;</span><br><span class="line">    <span class="function">Student <span class="title">findStudent</span><span class="params">(String id)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DbStudentStore</span> <span class="keyword">implements</span> <span class="title">StudentStore</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findStudent</span><span class="params">(String ssn)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        ResultSet rs = jdbcStmt.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">            String id = rs.getString(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            String name = rs.getString(<span class="string">&quot;firstname&quot;</span>) +</span><br><span class="line">            rs.getString(<span class="string">&quot;lastanme&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Student(id, name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CacheStudentStore</span> <span class="keyword">implements</span> <span class="title">StudentStore</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findStudent</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        <span class="keyword">return</span> cache.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç æ˜¾ç¤ºäº†åŒä¸€ä¸ªæ¥å£çš„ä¸¤ä¸ªå®ç°ï¼šä¸€ä¸ªä»æ•°æ®åº“è¯»å–ï¼›å¦ä¸€ä¸ªä»ç¼“å­˜è¯»å–ã€‚</p><p>ä½†æ˜¯ä»è°ƒç”¨ä»£ç çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒåªå…³å¿ƒæ–¹æ³•çš„è°ƒç”¨è€Œå¹¶ä¸å…³å¿ƒæ¥è‡ªå“ªä¸ªå¯¹è±¡ã€‚è¿™å°±æ˜¯é¢å‘å¯¹è±¡è®¾è®¡æ¨¡å¼ä¸­å·¥å‚æ–¹æ³•æ¨¡å¼çš„ç¾å¦™ä¹‹å¤„ã€‚åªè¦ä½¿ç”¨ä¸€ä¸ªå‡½æ•°å·¥å‚å°±å¯ä»¥äº†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">StudentStore store = getStudentStore();</span><br><span class="line">store.findStudent(<span class="string">&quot;444-44-4444&quot;</span>);</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„å®ç°æ˜¯ä¸å®¹é”™è¿‡çš„ï¼Œå…¶è§£å†³æ–¹æ¡ˆå°±æ˜¯æŸ¯é‡ŒåŒ–ã€‚é€šè¿‡åˆ†åˆ«åˆ›å»ºåœ¨å­˜å‚¨æ•°æ®å’Œæ•°ç»„ä¸­æŸ¥æ‰¾å­¦ç”Ÿå¯¹è±¡çš„å‡½æ•°ï¼Œå°±èƒ½å¤Ÿå°†è¿™æ®µ<code>Java</code>ä»£ç ç¿»è¯‘ä¸º<code>JavaScript</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fetchStudentFromDb :: DB -&gt; (String -&gt; Student)</span></span><br><span class="line"><span class="keyword">const</span> fetchStudentFromDb = R.curry(<span class="function"><span class="keyword">function</span> (<span class="params">db, ssn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// &lt;--- åœ¨ DBå¯¹è±¡ä¸­æŸ¥æ‰¾</span></span><br><span class="line">  <span class="keyword">return</span> find(db, ssn);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// fetchStudentFromArray :: Array -&gt; (String -&gt; Student)</span></span><br><span class="line"><span class="keyword">const</span> fetchStudentFromArray = R.curry(<span class="function"><span class="keyword">function</span> (<span class="params">arr, ssn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// &lt;--- åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾</span></span><br><span class="line">  <span class="keyword">return</span> arr[ssn];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç”±äºè¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯æŸ¯é‡ŒåŒ–çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€šç”¨å·¥å‚æ–¹æ³•<code>findStudent</code>å°†å‡½æ•°çš„å®šä¹‰ä¸æ±‚å€¼åˆ†ç¦»ï¼Œè€Œå…¶å…·ä½“çš„å®ç°ç»†èŠ‚å¯èƒ½æ˜¯ä»»æ„ä¸€ä¸ªæŸ¥æ‰¾å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> findStudent = useDb ? fetchStudentFromDb(db) : fetchStudentFromArray(arr);</span><br><span class="line">findStudent(<span class="string">&quot;444-44-4444&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç°åœ¨<code>findStudent</code>å¯ä»¥ä¼ é€’ç»™å…¶ä»–æ¨¡å—ï¼Œè€Œå…¶è°ƒç”¨è€…æ— é¡»äº†è§£å…¶å…·ä½“å®ç°ã€‚ä»å¯é‡ç”¨çš„è§’åº¦æ¥çœ‹ï¼ŒæŸ¯é‡ŒåŒ–ä¹Ÿèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…åˆ›å»ºå‡½æ•°æ¨¡æ¿ã€‚</p><h3 id="3-2-åˆ›å»ºå¯é‡ç”¨çš„å‡½æ•°æ¨¡æ¿"><a href="#3-2-åˆ›å»ºå¯é‡ç”¨çš„å‡½æ•°æ¨¡æ¿" class="headerlink" title="3.2 åˆ›å»ºå¯é‡ç”¨çš„å‡½æ•°æ¨¡æ¿"></a>3.2 åˆ›å»ºå¯é‡ç”¨çš„å‡½æ•°æ¨¡æ¿</h3><p>å‡è®¾å¼€å‘è€…éœ€è¦é…ç½®ä¸åŒçš„æ—¥å¿—å‡½æ•°æ¥å¤„ç†åº”ç”¨ç¨‹åºä¸­çš„ä¸åŒçŠ¶æ€ï¼Œæ¯”å¦‚é”™è¯¯ã€è­¦å‘Šä»¥åŠè°ƒè¯•ä¿¡æ¯ç­‰ã€‚å‡½æ•°æ¨¡æ¿ä¼šæ ¹æ®åˆ›å»ºæ—¶çš„å‚æ•°æ•°é‡æ¥å®šä¹‰ä¸€ç³»åˆ—çš„ç›¸å…³å‡½æ•°ã€‚è¿™é‡Œç”¨ä¸€ä¸ªæ—¥å¿—ç›¸å…³çš„åº“<code>Log4js</code>ä¸¾ä¾‹å­ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›åŸºæœ¬è®¾ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> logger = <span class="keyword">new</span> Log4js.getLogger(<span class="string">&quot;StudentEvents&quot;</span>);</span><br><span class="line">logger.info(<span class="string">&quot;Student added successfully!&quot;</span>);</span><br></pre></td></tr></table></figure><p>åœ¨<code>Log4js</code>çš„è¾…åŠ©ä¸‹ï¼Œè¿˜å¯ä»¥åšåˆ°æ›´å¤šã€‚å‡è®¾éœ€è¦åœ¨å¼¹å‡ºçš„çª—å£ä¸­æ˜¾ç¤ºæ¶ˆæ¯ï¼Œå¯ä»¥é€šè¿‡é…ç½®ä¸€ä¸ª<code>appender</code>æ¥å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.addAppender(<span class="keyword">new</span> Log4js.JSAlertAppender());</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ä¸€ä¸ªå¸ƒå±€ï¼Œä½¿å…¶è¾“å‡º JSON è€Œä¸æ˜¯çº¯æ–‡æœ¬æ ¼å¼ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">appender.setLayout(<span class="keyword">new</span> Log4js.JSONLayout());</span><br></pre></td></tr></table></figure><p>å¼€å‘è€…å¯èƒ½è®¾ç½®å¾ˆå¤šçš„é…ç½®ï¼Œè€Œå°†è¿™äº›ä»£ç å¤åˆ¶å¹¶ç²˜è´´åˆ°æ¯ä¸ªæ–‡ä»¶ä¸­ä¼šå¯¼è‡´å¤§é‡é‡å¤ã€‚ä½¿ç”¨æŸ¯é‡ŒåŒ–æ¥å®šä¹‰ä¸€ä¸ªå¯é‡ç”¨çš„å‡½æ•°æ¨¡æ¿ï¼ˆå¦‚ä¸‹æ‰€ç¤ºçš„æ—¥å¿—å‡½æ•°æ¨¡æ¿ï¼‰ï¼Œå°†å¸¦æ¥æœ€å¤§çš„çµæ´»æ€§å’Œé‡ç”¨æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> logger = <span class="function"><span class="keyword">function</span> (<span class="params">appender, layout, name, level, message</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> appenders = &#123;</span><br><span class="line">    <span class="comment">// &lt;--- é¢„è®¾ appenders</span></span><br><span class="line">    <span class="attr">alert</span>: <span class="keyword">new</span> Log4js.JSAlertAppender(),</span><br><span class="line">    <span class="attr">console</span>: <span class="keyword">new</span> Log4js.BrowserConsoleAppender(),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> layouts = &#123;</span><br><span class="line">    <span class="comment">// &lt;--- é¢„è®¾å¸ƒå±€layouts</span></span><br><span class="line">    <span class="attr">basic</span>: <span class="keyword">new</span> Log4js.BasicLayout(),</span><br><span class="line">    <span class="attr">json</span>: <span class="keyword">new</span> Log4js.JSONLayout(),</span><br><span class="line">    <span class="attr">xml</span>: <span class="keyword">new</span> Log4js.XMLLayout(),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> appender = appenders[appender];</span><br><span class="line">  appender.setLayout(layouts[layout]);</span><br><span class="line">  <span class="keyword">const</span> logger = <span class="keyword">new</span> Log4js.getLogger(name);</span><br><span class="line">  logger.addAppender(appender);</span><br><span class="line">  logger.log(level, message, <span class="literal">null</span>); <span class="comment">// &lt;--- ä½¿ç”¨é…ç½®å¥½çš„logger æ‰“å°æ¶ˆæ¯</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>é€šè¿‡æŸ¯é‡ŒåŒ– loggerï¼Œå¯ä»¥é›†ä¸­ç®¡ç†å’Œé‡ç”¨é€‚ç”¨äºä»»ä½•åœºåˆçš„æ—¥å¿—é…ç½®ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> log = R.curry(logger)(<span class="string">&quot;alert&quot;</span>, <span class="string">&quot;json&quot;</span>, <span class="string">&quot;FJS&quot;</span>);</span><br><span class="line">log(<span class="string">&quot;ERROR&quot;</span>, <span class="string">&quot;Error condition detected!!&quot;</span>);</span><br><span class="line"><span class="comment">// -&gt; this will popup an alert dialog with the requested message</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¦åœ¨ä¸€ä¸ªå‡½æ•°æˆ–æ–‡ä»¶ä¸­è®°å½•å¤šæ¡é”™è¯¯æ—¥å¿—ï¼Œå¯ä»¥çµæ´»åœ°è®¾ç½®é™¤æœ€åä¸€ä¸ªå‚æ•°ä¹‹å¤–çš„å…¶ä»–å‚æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> logError = R.curry(logger)(<span class="string">&quot;console&quot;</span>, <span class="string">&quot;basic&quot;</span>, <span class="string">&quot;FJS&quot;</span>, <span class="string">&quot;ERROR&quot;</span>);</span><br><span class="line">logError(<span class="string">&quot;Error code 404 detected!!&quot;</span>);</span><br><span class="line">logError(<span class="string">&quot;Error code 402 detected!!&quot;</span>);</span><br></pre></td></tr></table></figure><p><code>curry</code>å‡½æ•°çš„åç»­è°ƒç”¨åœ¨åå°è¢«æ‰§è¡Œï¼Œæœ€ç»ˆç”Ÿäº§ä¸€ä¸ªä¸€å…ƒå‡½æ•°ã€‚äº‹å®ä¸Šï¼Œå¯ä»¥é€šè¿‡ç°æœ‰çš„å‡½æ•°åˆ›å»ºæ–°å‡½æ•°ï¼Œå¹¶å°†ä»»æ„æ•°é‡çš„å‚æ•°ä¼ é€’ç»™å®ƒä»¬ï¼Œä»è€Œé€æ­¥å®ç°å‡½æ•°æ„å»ºã€‚é™¤äº†èƒ½å¤Ÿæœ‰æ•ˆæå‡ä»£ç çš„å¯é‡ç”¨æ€§ä¹‹å¤–ï¼Œå°†å¤šå…ƒå‡½æ•°è½¬æ¢ä¸ºä¸€å…ƒå‡½æ•°æ‰æ˜¯æŸ¯é‡ŒåŒ–çš„ä¸»è¦åŠ¨æœºã€‚</p><p>æŸ¯é‡ŒåŒ–çš„å¯æ›¿ä»£æ–¹æ¡ˆæ˜¯éƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®šï¼Œå®ƒä»¬å—åˆ°<code>JavaScript</code>è¯­è¨€çš„é€‚åº¦æ”¯æŒï¼Œä»¥äº§ç”Ÿæ›´å°çš„åŠŸèƒ½ï¼Œåœ¨æ’å…¥åŠŸèƒ½ç®¡é“æ—¶ä¹Ÿèƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚</p><h2 id="4-éƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®š"><a href="#4-éƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®š" class="headerlink" title="4 éƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®š"></a>4 éƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®š</h2><p>éƒ¨åˆ†åº”ç”¨æ˜¯ä¸€ç§é€šè¿‡å°†å‡½æ•°çš„ä¸å¯å˜å‚æ•°å­é›†åˆå§‹åŒ–ä¸ºå›ºå®šå€¼æ¥åˆ›å»ºæ›´å°å…ƒæ•°å‡½æ•°çš„æ“ä½œã€‚ç®€å•æ¥è¯´ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå…·æœ‰äº”ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç»™å‡ºä¸‰ä¸ªå‚æ•°åï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªã€ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ã€‚å’ŒæŸ¯é‡ŒåŒ–ä¸€æ ·ï¼Œéƒ¨åˆ†åº”ç”¨ä¹Ÿå¯ä»¥ç”¨æ¥ç¼©çŸ­å‡½æ•°çš„é•¿åº¦ï¼Œä½†åˆç¨æœ‰ä¸åŒã€‚å› ä¸ºæŸ¯é‡ŒåŒ–çš„å‡½æ•°æœ¬è´¨ä¸Šæ˜¯éƒ¨åˆ†åº”ç”¨çš„å‡½æ•°ï¼Œæ‰€ä»¥è¿™ä¸¤ç§æŠ€æœ¯å¾€å¾€ä¼šè¢«äº’ç›¸æ··æ·†ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºå‚æ•°ä¼ é€’çš„å†…éƒ¨æœºåˆ¶ä¸æ§åˆ¶ã€‚</p><p>æŸ¯é‡ŒåŒ–åœ¨æ¯æ¬¡åˆ†æ­¥è°ƒç”¨æ—¶éƒ½ä¼šç”ŸæˆåµŒå¥—çš„ä¸€å…ƒå‡½æ•°ã€‚åœ¨åº•å±‚ï¼Œå‡½æ•°çš„æœ€ç»ˆç»“æœæ˜¯ç”±è¿™äº›ä¸€å…ƒå‡½æ•°çš„é€æ­¥ç»„åˆäº§ç”Ÿçš„ã€‚åŒæ—¶ï¼Œcurry çš„å˜ä½“å…è®¸åŒæ—¶ä¼ é€’ä¸€éƒ¨åˆ†å‚æ•°ã€‚å› æ­¤ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶å‡½æ•°æ±‚å€¼çš„æ—¶é—´ä¸æ–¹å¼ã€‚</p><p>éƒ¨åˆ†åº”ç”¨å°†å‡½æ•°çš„å‚æ•°ä¸ä¸€äº›é¢„è®¾å€¼ç»‘å®šï¼ˆèµ‹å€¼ï¼‰ï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªæ‹¥æœ‰æ›´å°‘å‚æ•°çš„æ–°å‡½æ•°ã€‚è¯¥å‡½æ•°çš„é—­åŒ…ä¸­åŒ…å«äº†è¿™äº›å·²èµ‹å€¼çš„å‚æ•°ï¼Œåœ¨ä¹‹åçš„è°ƒç”¨ä¸­è¢«å®Œå…¨æ±‚å€¼ã€‚</p><p>ç°åœ¨ï¼Œæ—¢ç„¶å·²ç»æ˜ç¡®ä¸¤è€…çš„ä¸åŒï¼Œä¸‹é¢ç»§ç»­ç ”ç©¶<code>partial</code>å‡½æ•°å¯èƒ½çš„å®ç°æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">partial</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> fn = <span class="built_in">this</span>, boundArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">let</span> placeholder = &lt;&lt;partialPlaceholderObj&gt;&gt;; <span class="comment">// &lt;--- åº“ä¸­çš„å…·ä½“å ä½ç¬¦å®ç°ï¼Œåƒ Lodash ä¼šä½¿ç”¨ä¸‹ç”»çº¿å¯¹è±¡ä½œä¸ºå ä½ç¬¦ã€‚å…¶ä»–çš„å®ç°ä½¿ç”¨ undefined æ¥è¡¨ç¤ºåº”è¯¥ç•¥è¿‡è¯¥å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> bound = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// &lt;--- ä½¿ç”¨éƒ¨åˆ†åº”ç”¨çš„å‚æ•°åˆ›å»ºæ–°çš„å‡½æ•°</span></span><br><span class="line">        <span class="keyword">let</span> position = <span class="number">0</span>, length = args.length;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">Array</span>(length);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">            args[i] = boundArgs[i] === placeholder <span class="comment">// &lt;--- å…¶ä¸­ placeholder å¯¹è±¡ç•¥è¿‡äº†å®šä¹‰å‡½æ•°çš„å‚æ•°</span></span><br><span class="line">            ? <span class="built_in">arguments</span>[position++] : boundArgs[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (position &lt; <span class="built_in">arguments</span>.length) &#123;</span><br><span class="line">            args.push(<span class="built_in">arguments</span>[position++]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fn.apply(<span class="built_in">this</span>, args); <span class="comment">// &lt;--- ä½¿ç”¨ fn.apply()ç»™å®šå‡½æ•°åˆé€‚çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶å°†å‚æ•°åˆ—è¡¨åº”ç”¨åˆ°å‡½æ•°çš„å‚æ•°ä¸Š</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> bound;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¯¹äºéƒ¨åˆ†åº”ç”¨å’Œå‡½æ•°ç»‘å®šçš„è®¨è®ºï¼Œå†æ¬¡ä½¿ç”¨<code>Lodash</code>ï¼Œå› ä¸ºå®ƒå¯¹å‡½æ•°ç»‘å®šæä¾›äº†æ¯”<code>Ramda</code>æ›´å¥½çš„æ”¯æŒã€‚ç„¶è€Œä»è¡¨é¢æ¥çœ‹ï¼Œ<code>_.partial</code>ä¸<code>R.curry</code>çš„ä½¿ç”¨æ–¹å¼éå¸¸ç›¸ä¼¼ï¼Œå¹¶ä¸”éƒ½æ”¯æŒä½¿ç”¨å„è‡ªçš„å ä½ç¬¦å¯¹è±¡å¯¹å‚æ•°è¿›è¡Œå ä½ã€‚åº”ç”¨äºä¹‹å‰çœ‹åˆ°çš„ logger å‡½æ•°ï¼Œå°±é€šè¿‡éƒ¨åˆ†åº”ç”¨éƒ¨åˆ†å‚æ•°æ¥åˆ›å»ºæ›´å…·ä½“çš„è¡Œä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> consoleLog = _.partial(logger, <span class="string">&quot;console&quot;</span>, <span class="string">&quot;json&quot;</span>, <span class="string">&quot;FJS Partial&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ç”¨è¯¥å‡½æ•°åŠ å¼ºå¯¹<code>curry</code>ä¸<code>partial</code>ä¹‹é—´å·®å¼‚çš„è®¤è¯†ã€‚åœ¨åº”ç”¨äº†ä¸‰ä¸ªå‚æ•°ä¹‹åï¼Œç”Ÿæˆçš„<code>consoleLog</code>å‡½æ•°ä¼šåœ¨è°ƒç”¨æ—¶æ¥æ”¶å¦å¤–çš„ä¸¤ä¸ªå‚æ•°ï¼ˆä¸€æ¬¡æ€§çš„ï¼Œè€Œä¸æ˜¯ä¸€æ­¥ä¸€æ­¥åœ°ä¼ å…¥ï¼‰ã€‚ä¸æŸ¯é‡ŒåŒ–ä¸åŒï¼Œåªä½¿ç”¨ä¸€ä¸ªå‚æ•°è°ƒç”¨<code>consoleLog</code>å¹¶ä¸ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè€Œæ˜¯ä¼šä»¥<code>undefined</code>ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°<br>æ¥æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ç»§ç»­ä½¿ç”¨_.partial å°†éƒ¨åˆ†å‚æ•°åº”ç”¨äº<code>consoleLog</code>ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> consoleInfoLog = _.partial(consoleLog, <span class="string">&quot;INFO&quot;</span>);</span><br><span class="line">consoleInfoLog(<span class="string">&quot;INFO logger configured with partial&quot;</span>);</span><br></pre></td></tr></table></figure><p>æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§éƒ¨åˆ†åº”ç”¨çš„è‡ªåŠ¨åŒ–ä½¿ç”¨æ–¹å¼ï¼Œè¿™æ˜¯å®ƒä¸<code>partial</code>æœ¬èº«çš„ä¸»è¦åŒºåˆ«ã€‚å¦ä¸€ç§ç±»ä¼¼çš„<code>JavaScript</code>åŸç”ŸæŠ€æœ¯ç§°ä¸ºå‡½æ•°ç»‘å®šï¼Œå³<code>Function.prototype.bind()</code>ã€‚ä½†å…¶ä½œç”¨ä¸<code>partial</code>æœ‰æ‰€ä¸åŒï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> log = _.bind(logger, <span class="literal">undefined</span>, <span class="string">&quot;console&quot;</span>, <span class="string">&quot;json&quot;</span>, <span class="string">&quot;FJS Binding&quot;</span>);</span><br><span class="line">log(<span class="string">&quot;WARN&quot;</span>, <span class="string">&quot;FP is too awesome!&quot;</span>);</span><br></pre></td></tr></table></figure><p><code>_.bind</code>çš„ç¬¬äºŒä¸ªå‚æ•°<code>undefined</code>æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä½¿ç”¨ç»‘å®šèƒ½å¤Ÿåˆ›å»ºç»‘å®šå‡½æ•°ï¼Œè¯¥å‡½æ•°å¯åœ¨ä¸€ä¸ªæ‰€å±å¯¹è±¡çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼ˆä¼ é€’<code>undefined</code>è¡¨ç¤ºè¯¥å‡½æ•°å°†åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼‰ã€‚æ¥çœ‹çœ‹<code>_.partial</code>å’Œ<code>_.bind</code>çš„ä¸€äº›å®é™…ç”¨é€”ï¼š</p><ul><li>æ ¸å¿ƒè¯­è¨€æ‰©å±•</li><li>æƒ°æ€§å‡½æ•°ç»‘å®š</li></ul><h3 id="4-1-æ ¸å¿ƒè¯­è¨€æ‰©å±•"><a href="#4-1-æ ¸å¿ƒè¯­è¨€æ‰©å±•" class="headerlink" title="4.1 æ ¸å¿ƒè¯­è¨€æ‰©å±•"></a>4.1 æ ¸å¿ƒè¯­è¨€æ‰©å±•</h3><p>åœ¨å¢å¼ºè¯­è¨€çš„è¡¨ç°åŠ›æ–¹é¢ï¼Œéƒ¨åˆ†åº”ç”¨å¯ç”¨äºæ‰©å±•å¦‚ String æˆ– Number è¿™æ ·çš„æ ¸å¿ƒæ•°æ®ç±»å‹çš„å®ç”¨åŠŸèƒ½ã€‚æ³¨æ„ï¼Œå¦‚æœè¯­è¨€ä¸­åŠ å…¥äº†å¯é€ æˆå†²çªçš„æ–°æ–¹æ³•ï¼Œä»¥è¿™ç§æ–¹å¼æ‰©å±•è¯­è¨€å¯èƒ½ä¼šä½¿ä»£ç å¾ˆéš¾åœ¨å¹³å°å‡çº§çš„è¿‡ç¨‹ä¸­ç§»æ¤ã€‚è€ƒè™‘ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Take the first N characters</span></span><br><span class="line"><span class="built_in">String</span>.prototype.first = _.partial(<span class="built_in">String</span>.prototype.substring, <span class="number">0</span>, _); <span class="comment">// &lt;--- ä½¿ç”¨å ä½ç¬¦ï¼Œå¯ä»¥éƒ¨åˆ†åº”ç”¨ substring ä¸€ä¸ªå‚æ•° 0ï¼Œä»è€Œåˆ›å»ºæœŸå¾…ä¸€ä¸ªåç§»é‡å‚æ•°çš„å‡½æ•°</span></span><br><span class="line"><span class="string">&quot;Functional Programming&quot;</span>.first(<span class="number">3</span>); <span class="comment">// -&gt; &#x27;Fun&#x27;</span></span><br><span class="line"><span class="comment">// Convert any name into a Last, First format</span></span><br><span class="line"><span class="built_in">String</span>.prototype.asName = _.partial(</span><br><span class="line">  <span class="built_in">String</span>.prototype.replace,</span><br><span class="line">  <span class="regexp">/(\w+)\s(\w+)/</span>,</span><br><span class="line">  <span class="string">&quot;$2, $1&quot;</span></span><br><span class="line">); <span class="comment">// &lt;--- éƒ¨åˆ†åº”ç”¨å‚æ•°æ¥åˆ›å»ºå…·ä½“çš„è¡Œä¸º</span></span><br><span class="line"><span class="string">&quot;Alonzo Church&quot;</span>.asName(); <span class="comment">//-&gt; &#x27;Church, Alonzo&#x27;</span></span><br><span class="line"><span class="comment">// Converts a string into an array</span></span><br><span class="line"><span class="built_in">String</span>.prototype.explode = _.partial(<span class="built_in">String</span>.prototype.match, <span class="regexp">/[\w]/gi</span>); <span class="comment">// &lt;--- éƒ¨åˆ†åº”ç”¨ match æ–¹æ³•ï¼Œç»™å®šå…·ä½“çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¾—åˆ°èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°ç»„çš„å‡½æ•°</span></span><br><span class="line"><span class="string">&quot;ABC&quot;</span>.explode(); <span class="comment">//-&gt; [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;]</span></span><br><span class="line"><span class="comment">// Parses a simple URL</span></span><br><span class="line"><span class="built_in">String</span>.prototype.parseUrl = _.partial(</span><br><span class="line">  <span class="built_in">String</span>.prototype.match, <span class="comment">//&lt;--- éƒ¨åˆ†åº”ç”¨ match æ–¹æ³•ï¼Œç»™å®šå…·ä½“çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¾—åˆ°èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°ç»„çš„å‡½æ•°</span></span><br><span class="line">  <span class="regexp">/(http[s]?|ftp):\/\/([^:\/\s]+)\.([^:\/\s]&#123;2,5&#125;)/</span></span><br><span class="line">);</span><br><span class="line"><span class="string">&quot;http://example.com&quot;</span>.parseUrl(); <span class="comment">// -&gt; [&#x27;http&#x27;, &#x27;example&#x27;, &#x27;com&#x27;]</span></span><br></pre></td></tr></table></figure><p>åœ¨å®ç°è‡ªå·±çš„å‡½æ•°ä¹‹å‰ï¼Œé¦–å…ˆè¦è¿›è¡Œå­˜åœ¨æ€§æ£€æŸ¥ï¼Œä»¥ä¾¿é€‚ç”¨äºæ–°çš„è¯­è¨€ç‰ˆæœ¬å‡çº§ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">String</span>.prototype.explode) &#123;</span><br><span class="line">  <span class="built_in">String</span>.prototype.explode = _.partial(<span class="built_in">String</span>.prototype.match, <span class="regexp">/[\w]/gi</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ä¸€äº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œéƒ¨åˆ†åº”ç”¨ä¼šå¤±æ•ˆï¼Œä¾‹å¦‚å½“ç”¨äºï¼ˆå¦‚<code>setTimeout</code>ï¼‰å»¶è¿Ÿå‡½æ•°æ—¶ã€‚è¿™æ—¶å°±éœ€è¦ä½¿ç”¨å‡½æ•°ç»‘å®šæ¥å®ç°ã€‚</p><h3 id="4-2-å»¶è¿Ÿå‡½æ•°ç»‘å®š"><a href="#4-2-å»¶è¿Ÿå‡½æ•°ç»‘å®š" class="headerlink" title="4.2 å»¶è¿Ÿå‡½æ•°ç»‘å®š"></a>4.2 å»¶è¿Ÿå‡½æ•°ç»‘å®š</h3><p>å½“æœŸæœ›ç›®æ ‡å‡½æ•°ä½¿ç”¨æŸä¸ªæ‰€å±å¯¹è±¡æ¥æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨å‡½æ•°ç»‘å®šæ¥è®¾ç½®ä¸Šä¸‹æ–‡å¯¹è±¡å°±å˜å¾—å°¤ä¸ºé‡è¦ã€‚</p><p>ä¾‹å¦‚ï¼Œæµè§ˆå™¨ä¸­çš„<code>setTimeout</code>å’Œ<code>setInterval</code>ç­‰å‡½æ•°ï¼Œå¦‚æœä¸å°† this çš„å¼•ç”¨è®¾ä¸ºå…¨å±€ä¸Šä¸‹æ–‡ï¼Œå³<code>window</code>å¯¹è±¡ï¼Œæ˜¯ä¸èƒ½æ­£å¸¸å·¥ä½œçš„ã€‚ä¼ é€’ undefined åœ¨è¿è¡Œæ—¶æ­£ç¡®è®¾ç½®å®ƒä»¬çš„ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œ<code>setTimeout</code>å¯ç”¨äºåˆ›å»ºä¸€ä¸ªç®€å•çš„è°ƒåº¦å¯¹è±¡æ¥æ‰§è¡Œå»¶è¿Ÿçš„ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨<code>_.bind</code> å’Œ<code>_.partial</code>çš„ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Scheduler = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> delayedFn = _.bind(<span class="built_in">setTimeout</span>, <span class="literal">undefined</span>, _, _);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">delay5</span>: _.partial(delayedFn, _, <span class="number">5000</span>),</span><br><span class="line">    <span class="attr">delay10</span>: _.partial(delayedFn, _, <span class="number">10000</span>),</span><br><span class="line">    <span class="attr">delay</span>: _.partial(delayedFn, _, _),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">Scheduler.delay5(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  consoleLog(<span class="string">&quot;Executing After 5 seconds!&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>Scheduler</code>ï¼Œå¯ä»¥å°†ä»»ä½•ä¸€æ®µä»£ç åŒ…å«åœ¨å‡½æ•°ä½“ä¸­å»¶è¿Ÿçš„æ‰§è¡Œï¼ˆè¿è¡Œæ—¶æ˜¯æ— æ³•ç¡®ä¿è®¡æ—¶å™¨çš„ç²¾å‡†çš„ï¼Œä½†è¿™æ˜¯å¦ä¸€ä¸ªé—®é¢˜ï¼‰ã€‚ç”±äº <code>bind</code> å’Œ <code>partial</code> éƒ½æ˜¯è¿”å›å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ï¼Œå› æ­¤å¯ä»¥å¾ˆå®¹æ˜“åœ°åµŒå¥—ä½¿ç”¨ã€‚å¦‚å‰é¢çš„ä»£ç æ‰€ç¤ºï¼Œæ¯ä¸€ä¸ªå»¶è¿Ÿæ“ä½œéƒ½åŸºäºå‡½æ•°ç»‘å®šå’Œéƒ¨åˆ†åº”ç”¨å‡½æ•°çš„åˆã€‚åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°ç»‘å®šå¹¶ä¸åƒéƒ¨åˆ†åº”ç”¨é‚£ä¹ˆæœ‰ç”¨ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿæ¯”è¾ƒæŠ•æœºï¼Œå› ä¸ºå®ƒä¼šé‡æ–°è®¾ç½®å‡½æ•°çš„ä¸Šä¸‹æ–‡ã€‚</p><p>éƒ¨åˆ†åº”ç”¨å’ŒæŸ¯é‡ŒåŒ–éƒ½æ˜¯ååˆ†æœ‰ç”¨çš„æŠ€æœ¯ã€‚æŸ¯é‡ŒåŒ–æŠ€æœ¯ä½¿ç”¨å¾—éå¸¸å¹¿æ³›ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºå¯æŠ½è±¡å‡½æ•°è¡Œä¸ºçš„å‡½æ•°åŒ…è£…å™¨ï¼Œå¯é¢„è®¾å…¶å‚æ•°æˆ–å¯¹å…¶éƒ¨åˆ†æ±‚å€¼ã€‚å…¶ä¼˜åŠ¿æºäºå…·æœ‰è¾ƒå°‘å‚æ•°çš„çº¯å‡½æ•°æ¯”è¾ƒå¤šå‚æ•°çš„å‡½æ•°æ›´æ˜“ä½¿ç”¨ã€‚ä¸¤ç§æ–¹æ³•éƒ½æœ‰åŠ©äºå‘å‡½æ•°æä¾›æ­£ç¡®çš„å‚æ•°ï¼Œè¿™æ ·å‡½æ•°å°±ä¸å¿…åœ¨å‡å°‘ä¸ºä¸€å…ƒå‡½æ•°æ—¶å…¬ç„¶åœ°è®¿é—®å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å¯¹è±¡ã€‚è¿™ç§åˆ†ç¦»å‚æ•°è·å–é€»è¾‘çš„æ–¹å¼ä½¿å¾—å‡½æ•°å…·æœ‰æ›´å¥½çš„å¯é‡ç”¨æ€§ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒç®€åŒ–äº†å‡½æ•°çš„ç»„åˆã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;ä¸‰-å‡½æ•°å¼ç¼–ç¨‹â€”â€”æ¨¡å—åŒ–ä¸”å¯é‡ç”¨çš„ä»£ç &quot;&gt;&lt;a href=&quot;#ä¸‰-å‡½æ•°å¼ç¼–ç¨‹â€”</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScript ä¸­çš„ varï¼Œlet å’Œ const æœ‰ä»€ä¹ˆåŒºåˆ«</title>
    <link href="http://example.com/2021/02/05/JavaScript%20%E4%B8%AD%E7%9A%84%20var%EF%BC%8Clet%20%E5%92%8C%20const%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/"/>
    <id>http://example.com/2021/02/05/JavaScript%20%E4%B8%AD%E7%9A%84%20var%EF%BC%8Clet%20%E5%92%8C%20const%20%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/</id>
    <published>2021-02-05T13:09:05.000Z</published>
    <updated>2022-01-06T01:34:32.127Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="åŒºåˆ«æ¦‚è¿°"><a href="#åŒºåˆ«æ¦‚è¿°" class="headerlink" title="åŒºåˆ«æ¦‚è¿°"></a>åŒºåˆ«æ¦‚è¿°</h2><ul><li>å˜é‡æå‡</li><li>æš‚æ—¶æ€§æ­»åŒº</li><li>å—çº§ä½œç”¨åŸŸ</li><li>é‡å¤å£°æ˜</li><li>ä¿®æ”¹å£°æ˜çš„å˜é‡</li><li>ä½¿ç”¨</li></ul><h3 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h3><p>var å£°æ˜çš„å˜é‡å­˜åœ¨æå‡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰è°ƒç”¨ï¼Œæå‡æ—¶ä¸åšåˆå§‹åŒ–æ“ä½œï¼Œæ•…åªä¸º undefined</p><p>letã€const ä¸å­˜åœ¨å˜é‡æå‡ï¼Œæ•…è€Œç”¨è¿™ä¸¤ä¸ªå…³é”®å­—æ—¶ï¼Œä¸€å®šè¦åœ¨å£°æ˜åä½¿ç”¨</p><h3 id="æš‚æ—¶æ€§æ­»åŒº"><a href="#æš‚æ—¶æ€§æ­»åŒº" class="headerlink" title="æš‚æ—¶æ€§æ­»åŒº"></a>æš‚æ—¶æ€§æ­»åŒº</h3><p>var ä¸å­˜åœ¨æš‚æ—¶æ€§æ­»åŒº</p><p>letã€const å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåœ¨å˜é‡è¢«å£°æ˜ä¹‹åï¼Œæ‰å¯ä»¥è·å–æˆ–ä½¿ç”¨è¯¥å˜é‡</p><h3 id="å—çº§ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸ</h3><p>var ä¸å­˜åœ¨å—çº§ä½œç”¨åŸŸ</p><p>letã€const å­˜åœ¨å—çº§ä½œç”¨åŸŸ</p><h3 id="é‡å¤å£°æ˜"><a href="#é‡å¤å£°æ˜" class="headerlink" title="é‡å¤å£°æ˜"></a>é‡å¤å£°æ˜</h3><p>var å…è®¸é‡å¤å£°æ˜å˜é‡</p><p>let å’Œ const åœ¨åŒä¸€ä½œç”¨åŸŸä¸å…è®¸é‡å¤å£°æ˜å˜é‡</p><h3 id="ä¿®æ”¹å˜é‡"><a href="#ä¿®æ”¹å˜é‡" class="headerlink" title="ä¿®æ”¹å˜é‡"></a>ä¿®æ”¹å˜é‡</h3><p>var å’Œ let å¯ä»¥éšæ„ä¿®æ”¹å£°æ˜çš„å˜é‡çš„å€¼</p><p>const ä¸€èˆ¬ç”¨æ¥å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚<br>ä½†å®é™…ä¸Š const ä¿è¯çš„æ˜¯å˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ä¸å˜</p><ul><li>å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡ã€‚</li><li>å¯¹äºå¤æ‚ç±»å‹çš„æ•°æ®ï¼Œå˜é‡æŒ‡å‘çš„å†…å­˜åœ°å€ä¿å­˜çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„æŒ‡é’ˆï¼Œconst åªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼Œè‡³äºå®é™…æŒ‡å‘çš„æ•°æ®æ˜¯å¯ä»¥å˜çš„</li></ul><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://vue3js.cn/interview/es6/var_let_const.html#%E4%B8%80%E3%80%81var">é¢è¯•å®˜ï¼šè¯´è¯´ varã€letã€const ä¹‹é—´çš„åŒºåˆ«</a><br><a href="https://es6.ruanyifeng.com/#docs/let">let å’Œ const å‘½ä»¤</a><br><a href="https://chinese.freecodecamp.org/news/javascript-var-let-and-const/">JavaScript ä¸­çš„ Varï¼ŒLet å’Œ Const æœ‰ä»€ä¹ˆåŒºåˆ«</a><br><a href="https://blog.poetries.top/browser-working-principle/guide/part2/lesson09.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%EF%BC%88scope%EF%BC%89">å—çº§ä½œç”¨åŸŸï¼švar ç¼ºé™·ä»¥åŠä¸ºä»€ä¹ˆè¦å¼•å…¥ let å’Œ const</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;åŒºåˆ«æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#åŒºåˆ«æ¦‚è¿°&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°:Javascriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼ˆäºŒï¼‰</title>
    <link href="http://example.com/2021/01/15/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://example.com/2021/01/15/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E4%BA%8C%EF%BC%89/</id>
    <published>2021-01-15T03:33:09.000Z</published>
    <updated>2021-08-08T03:05:36.106Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><p>ä»Šæ—¥åˆ†äº«: å¦‚ä½•åˆ›å»ºæ˜“äºæ¨æ–­çš„ä»£ç </p><h2 id="è½»æ•°æ®ç»“æ„ï¼Œé‡æ“ä½œ"><a href="#è½»æ•°æ®ç»“æ„ï¼Œé‡æ“ä½œ" class="headerlink" title="è½»æ•°æ®ç»“æ„ï¼Œé‡æ“ä½œ"></a>è½»æ•°æ®ç»“æ„ï¼Œé‡æ“ä½œ</h2><h3 id="ç†è§£ç¨‹åºä¸­æ§åˆ¶æµ"><a href="#ç†è§£ç¨‹åºä¸­æ§åˆ¶æµ" class="headerlink" title="ç†è§£ç¨‹åºä¸­æ§åˆ¶æµ"></a>ç†è§£ç¨‹åºä¸­æ§åˆ¶æµ</h3><p>ç¨‹åºä¸ºå®ç°ä¸šåŠ¡ç›®æ ‡æ‰€è¦è¿›è¡Œçš„è·¯å¾„è¢«æˆä¸ºæ§åˆ¶æµã€‚ å‘½ä»¤å¼ç¨‹åºéœ€è¦é€šè¿‡æš´éœ²æ‰€æœ‰çš„å¿…è¦æ­¥éª¤æ‰èƒ½æå…¶è¯¦ç»†åœ°æè¿°å…¶æ§åˆ¶æµã€‚è¿™äº›æ­¥éª¤é€šå¸¸æ¶‰åŠå¤§é‡çš„å¾ªç¯å’Œåˆ†æ”¯ï¼Œä»¥åŠéšè¯­å¥æ‰§è¡Œå˜åŒ–çš„å„ç§å˜é‡ã€‚</p><p>ç®€å•çš„å‘½ä»¤å¼ç¨‹åºå¤§è‡´å¯ä»¥è¿™æ ·æè¿°:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loop = optC();</span><br><span class="line"><span class="keyword">while</span> (loop) &#123;</span><br><span class="line">  <span class="keyword">var</span> condition = optA();</span><br><span class="line">  <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    optB1();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    optB2();</span><br><span class="line">  &#125;</span><br><span class="line">  loop = optC();</span><br><span class="line">&#125;</span><br><span class="line">optD();</span><br></pre></td></tr></table></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.loli.net/2021/08/08/Oyv9LmXzZtJo4MS.png"></p><p>ç„¶è€Œï¼Œå£°æ˜å¼ç¨‹åºï¼Œç‰¹åˆ«æ˜¯å‡½æ•°å¼ç¨‹åºï¼Œåˆ™å¤šä½¿ç”¨ä»¥ç®€å•æ‹“æ‰‘è¿æ¥çš„ç‹¬ç«‹é»‘ç›’æ“ä½œç»„åˆè€Œæˆçš„è¾ƒå°ç»“æ„åŒ–æ§åˆ¶æµï¼Œä»è€Œæå‡ç¨‹åºçš„æŠ½è±¡å±‚æ¬¡ã€‚</p><p>è¿™äº›è¿æ¥åœ¨ä¸€èµ·çš„æ“ä½œåªæ˜¯ä¸€äº›èƒ½å¤Ÿå°†çŠ¶æ€ä¼ é€’è‡³ä¸‹ä¸€ä¸ªæ“ä½œçš„é«˜é˜¶å‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ä½¿ç”¨å‡½æ•°å¼å¼€å‘é£æ ¼æ“ä½œæ•°æ®ç»“æ„ï¼Œå…¶å®å°±æ˜¯å°†æ•°æ®ä¸æ§åˆ¶æµè§†ä¸ºä¸€äº›é«˜çº§ç»„ä»¶çš„ç®€å•è¿æ¥ã€‚</p><p>ä½¿ç”¨è¿™ç§æ–¹å¼å¯ä»¥å½¢æˆç±»ä¼¼è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">optA().optB().optC().optD();</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/08/08/qiv7BhkpG5K3ry2.png"></p><p>é‡‡ç”¨è¿™ç§é“¾å¼æ“ä½œèƒ½å¤Ÿä½¿ç¨‹åºç®€æ´ã€æµç•…å¹¶å¯Œæœ‰è¡¨ç°åŠ›ï¼Œèƒ½å¤Ÿä»è®¡ç®—é€»è¾‘ä¸­å¾ˆå¥½åœ°åˆ†ç¦»æ§åˆ¶æµï¼Œå› æ­¤å¯ä»¥ä½¿å¾—ä»£ç å’Œæ•°æ®æ›´æ˜“æ¨ç†ã€‚</p><h3 id="é“¾æ¥æ–¹æ³•"><a href="#é“¾æ¥æ–¹æ³•" class="headerlink" title="é“¾æ¥æ–¹æ³•"></a>é“¾æ¥æ–¹æ³•</h3><p>æ–¹æ³•é“¾æ˜¯ä¸€ç§èƒ½å¤Ÿåœ¨ä¸€ä¸ªè¯­å¥ä¸­è°ƒç”¨å¤šä¸ªæ–¹æ³•çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ¨¡å¼ã€‚å½“è¿™äº›æ–¹æ³•å±äºåŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ–¹æ³•é“¾åˆç§°ä¸ºæ–¹æ³•çº§è”ã€‚</p><p>å°½ç®¡è¯¥æ¨¡å¼å¤§å¤šå‡ºç°åœ¨é¢å‘å¯¹è±¡çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä½†åœ¨ä¸€äº›ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œå¦‚æ“ä½œä¸å¯å˜å¯¹è±¡æ—¶ï¼Œä¹Ÿèƒ½å¾ˆå¥½åœ°ç”¨äºå‡½æ•°å¼ç¼–ç¨‹ä¸­ã€‚</p><p>æ—¢ç„¶åœ¨å‡½æ•°å¼ä»£ç ä¸­æ˜¯ç¦æ­¢ä¿®æ”¹å¯¹è±¡çš„ï¼Œåˆå¦‚ä½•èƒ½ä½¿ç”¨è¿™ç§æ–¹æ³•é“¾æ¨¡å¼å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå­—ç¬¦ä¸²å¤„ç†çš„ä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;Functional Programming&quot;</span>.substring(<span class="number">0</span>, <span class="number">10</span>).toLowerCase() + <span class="string">&quot; is fun&quot;</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¸­ï¼Œ<code>substring</code> å’Œ <code>toLowerCase</code> éƒ½æ˜¯ï¼ˆé€šè¿‡ thisï¼‰åœ¨éš¶å±çš„å­—ç¬¦ä¸²å¯¹è±¡ä¸Šæ“ä½œå¹¶è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚JavaScript ä¸­å­—ç¬¦ä¸²çš„åŠ å·ï¼ˆ+ï¼‰è¿ç®—ç¬¦è¢«é‡è½½ä¸ºè¿æ¥å­—ç¬¦ä¸²æ“ä½œçš„è¯­æ³•ç³–ï¼Œå®ƒä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚é€šè¿‡ä¸€ç³»åˆ—å˜æ¢åçš„ç»“æœä¸åŸå…ˆå­—ç¬¦ä¸²æ¯«æ— å¼•ç”¨å…³ç³»ï¼Œè€ŒåŸå…ˆçš„å­—ç¬¦ä¸²ä¹Ÿä¸ä¼šæœ‰ä»»ä½•å˜åŒ–ã€‚</p><p>è¿™ç§è¡Œä¸ºæ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œå› ä¸ºæŒ‰ç…§è®¾è®¡ï¼Œå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚ä»é¢å‘å¯¹è±¡çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚ä½†ä»å‡½æ•°å¼ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯ä¸€ç§ç†æƒ³è¡Œä¸ºã€‚</p><p>å¦‚æœç”¨æ›´åŠ å‡½æ•°å¼çš„é£æ ¼é‡æ„ä¸Šé¢çš„ä»£ç ï¼Œå®ƒä¼šåƒè¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">concat(toLowerCase(substring(<span class="string">&#x27;Functional Programming&#x27;</span>, <span class="number">1</span>, <span class="number">10</span>))),<span class="string">&#x27; is fun&#x27;</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ç¬¦åˆå‡½æ•°å¼é£æ ¼ï¼Œæ‰€æœ‰å‚æ•°éƒ½åº”åœ¨å‡½æ•°å£°æ˜ä¸­æ˜ç¡®å®šä¹‰ï¼Œè€Œä¸”å®ƒæ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¹Ÿä¸ä¼šä¿®æ”¹çš„åŸæœ‰å¯¹è±¡ã€‚</p><p>ä½†å¯ä»¥è¯´ï¼Œè¿™æ ·çš„ä»£ç å†™èµ·æ¥å¹¶æ²¡æœ‰æ–¹æ³•é“¾æµç•…ã€‚è€Œä¸”å®ƒä¹Ÿæ›´éš¾é˜…è¯»ï¼Œå› ä¸ºéœ€è¦ä¸€å±‚å±‚åœ°å‰¥ç¦»å¤–éƒ¨å‡½æ•°ï¼Œæ‰èƒ½çŸ¥æ™“å†…éƒ¨çœŸæ­£å‘ç”Ÿçš„äº‹æƒ…ã€‚</p><p>åªè¦éµå®ˆä¸å¯å˜çš„ç¼–ç¨‹åŸåˆ™ï¼Œå‡½æ•°å¼ä¸­ä¹Ÿä¼šåº”ç”¨è¿™ç§éš¶å±äºå•ä¸ªå¯¹è±¡å®ä¾‹çš„æ–¹æ³•é“¾ã€‚èƒ½ç”¨è¯¥æ¨¡å¼æ¥å¤„ç†æ•°ç»„å˜æ¢å—ï¼Ÿ</p><h3 id="å‡½æ•°é“¾"><a href="#å‡½æ•°é“¾" class="headerlink" title="å‡½æ•°é“¾"></a>å‡½æ•°é“¾</h3><p>é¢å‘å¯¹è±¡ç¨‹åºå°†ç»§æ‰¿ä½œä¸ºä»£ç é‡ç”¨çš„ä¸»è¦æœºåˆ¶ã€‚å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ‰€æœ‰çŠ¶æ€å’Œæ–¹æ³•ï¼Œä¾‹å¦‚åœ¨ Java ä¸­ï¼Œæœ‰ä¸€å¤§å †ç»§æ‰¿äºåŸºç¡€æ¥å£ List çš„å„ç§å®ä½“ List ç±»ï¼Œå¦‚ ArrayListã€LinkedListã€DoublyLinkedListã€CopyOnWrite ArrayList ç­‰ï¼Œå®ƒä»¬éƒ½æºè‡ªå…±åŒçš„çˆ¶ç±»ï¼Œå¹¶å„è‡ªæ·»åŠ äº†ä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ã€‚</p><p>å‡½æ•°å¼ç¼–ç¨‹åˆ™é‡‡ç”¨äº†ä¸åŒçš„æ–¹å¼ã€‚å®ƒä¸æ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ç±»å‹æ¥æ»¡è¶³ç‰¹å®šçš„éœ€æ±‚ï¼Œè€Œæ˜¯ä½¿ç”¨å¦‚æ•°ç»„è¿™æ ·çš„æ™®é€šç±»å‹ï¼Œå¹¶æ–½åŠ åœ¨ä¸€å¥—ç²—ç²’åº¦çš„é«˜é˜¶æ“ä½œä¹‹ä¸Šï¼Œè¿™äº›æ“ä½œæ˜¯åº•å±‚æ•°æ®å½¢æ€æ‰€ä¸å¯è§çš„ã€‚</p><p>è¿™äº›æ“ä½œä¼šä½œå¦‚ä¸‹è®¾è®¡:</p><ul><li><p>æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä»¥ä¾¿èƒ½å¤Ÿæ³¨å…¥è§£å†³ç‰¹å®šä»»åŠ¡çš„ç‰¹å®šè¡Œä¸ºã€‚</p></li><li><p>ä»£æ›¿å……æ–¥ç€ä¸´æ—¶å˜é‡ä¸å‰¯ä½œç”¨çš„ä¼ ç»Ÿå¾ªç¯ç»“æ„ï¼Œä»è€Œå‡å°‘æ‰€è¦ç»´æŠ¤ä»¥åŠå¯èƒ½å‡ºé”™çš„ä»£ç ã€‚</p></li></ul><p>ç»§ç»­ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€äº›ä¸œè¥¿å¹¶æš‚æ—¶è®°ä½å®ƒ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Person class</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">firstname, lastname, ssn</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._firstname = firstname;</span><br><span class="line">    <span class="built_in">this</span>._lastname = lastname;</span><br><span class="line">    <span class="built_in">this</span>._ssn = ssn;</span><br><span class="line">    <span class="built_in">this</span>._address = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">this</span>._birthYear = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">ssn</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._ssn;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">firstname</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._firstname;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">lastname</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._lastname;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">address</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._address;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">birthYear</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._birthYear;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> <span class="title">birthYear</span>(<span class="params">year</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>._birthYear = year;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> <span class="title">address</span>(<span class="params">addr</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>._address = addr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Person(<span class="subst">$&#123;<span class="built_in">this</span>._firstname&#125;</span>, <span class="subst">$&#123;<span class="built_in">this</span>._lastname&#125;</span>)`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;Haskell&quot;</span>, <span class="string">&quot;Curry&quot;</span>, <span class="string">&quot;111-11-1111&quot;</span>);</span><br><span class="line">p1.address = <span class="keyword">new</span> Address(<span class="string">&quot;US&quot;</span>);</span><br><span class="line">p1.birthYear = <span class="number">1900</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> Person(<span class="string">&quot;Barkley&quot;</span>, <span class="string">&quot;Rosser&quot;</span>, <span class="string">&quot;222-22-2222&quot;</span>);</span><br><span class="line">p2.address = <span class="keyword">new</span> Address(<span class="string">&quot;Greece&quot;</span>);</span><br><span class="line">p2.birthYear = <span class="number">1907</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p3 = <span class="keyword">new</span> Person(<span class="string">&quot;John&quot;</span>, <span class="string">&quot;von Neumann&quot;</span>, <span class="string">&quot;333-33-3333&quot;</span>);</span><br><span class="line">p3.address = <span class="keyword">new</span> Address(<span class="string">&quot;Hungary&quot;</span>);</span><br><span class="line">p3.birthYear = <span class="number">1903</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p4 = <span class="keyword">new</span> Person(<span class="string">&quot;Alonzo&quot;</span>, <span class="string">&quot;Church&quot;</span>, <span class="string">&quot;444-44-4444&quot;</span>);</span><br><span class="line">p4.address = <span class="keyword">new</span> Address(<span class="string">&quot;US&quot;</span>);</span><br><span class="line">p4.birthYear = <span class="number">1903</span>;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/08/08/Guis8KPxqvYewbA.png"></p><h4 id="lambda-è¡¨è¾¾å¼"><a href="#lambda-è¡¨è¾¾å¼" class="headerlink" title="lambda è¡¨è¾¾å¼"></a>lambda è¡¨è¾¾å¼</h4><p>lambda è¡¨è¾¾å¼ï¼ˆåœ¨ JavaScript ä¸­ä¹Ÿè¢«ç§°ä¸ºç®­å¤´å‡½æ•°ï¼‰æºè‡ªå‡½æ•°å¼ç¼–ç¨‹ï¼Œæ¯”èµ·ä¼ ç»Ÿçš„å‡½æ•°å£°æ˜ï¼Œå®ƒå¯ä»¥é‡‡ç”¨ç›¸å¯¹ç®€æ´çš„è¯­æ³•å½¢å¼æ¥å£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚</p><p>å°½ç®¡ lambda å‡½æ•°ä¹Ÿå¯ä»¥å†™æˆå¤šè¡Œå½¢å¼ï¼Œä½†å•è¡Œæ˜¯æœ€æ™®éçš„å½¢å¼ã€‚ä½¿ç”¨ lambda è¡¨è¾¾å¼æˆ–æ™®é€šå‡½æ•°å£°æ˜è¯­æ³•ä¸€èˆ¬åªä¼šå½±å“åˆ°ä»£ç çš„å¯è¯»æ€§ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¯ç”¨äºæå–ä¸ªäººå§“åçš„ç¤ºä¾‹å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="function">(<span class="params">p</span>) =&gt;</span> p.fullname;</span><br><span class="line"><span class="built_in">console</span>.log(name(p1)); <span class="comment">//-&gt; &#x27;Haskell Curry&#x27;</span></span><br></pre></td></tr></table></figure><p><code>(P) =&gt; p.fullname</code> è¿™ç§ç®€æ´çš„è¯­æ³•ç³–è¡¨æ˜å®ƒåªæ¥æ”¶ä¸€ä¸ªå‚æ•° p å¹¶éšå¼åœ°è¿”å› p.fullnameã€‚</p><p>lambda è¡¨è¾¾å¼é€‚ç”¨äºå‡½æ•°å¼çš„å‡½æ•°å®šä¹‰ï¼Œå› ä¸ºå®ƒæ€»æ˜¯éœ€è¦è¿”å›ä¸€ä¸ªå€¼ã€‚å¯¹äºå•è¡Œè¡¨è¾¾å¼ï¼Œå…¶è¿”å›å€¼å°±æ˜¯å‡½æ•°ä½“çš„å€¼ã€‚</p><p>å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„æ˜¯ä¸€ç­‰å‡½æ•°ä¸ lambda è¡¨è¾¾å¼ä¹‹é—´çš„å…³ç³»ã€‚å‡½æ•°åä»£è¡¨çš„ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ï¼Œè€Œæ˜¯ä¸€ç§ï¼ˆæƒ°æ€§è®¡ç®—çš„ï¼‰å¯è·å–å…¶å€¼çš„æè¿°ã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°åæŒ‡å‘çš„æ˜¯ä»£è¡¨ç€å¦‚ä½•è®¡ç®—è¯¥æ•°æ®çš„ç®­å¤´å‡½æ•°ã€‚è¿™å°±æ˜¯åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å¯ä»¥å°†å‡½æ•°ä½œä¸ºæ•°å€¼ä½¿ç”¨çš„åŸå› ã€‚<br>ä¹‹åä¼šæ·±å…¥è®¨è®ºæƒ°æ€§è®¡ç®—å‡½æ•°ã€‚</p><p>å¾ˆå¤šå‡½æ•°å¼çš„ JavaScript ä»£ç éƒ½éœ€è¦å¤„ç†æ•°æ®åˆ—è¡¨ï¼Œè¿™ä¹Ÿå°±æ˜¯è¡ç”Ÿ JavaScript çš„å‡½æ•°å¼è¯­è¨€é¼»ç¥–èµ·åä¸º <code>LISP</code>ï¼ˆåˆ—è¡¨å¤„ç†ï¼‰çš„åŸå› ã€‚JavaScript 5.1 æœ¬èº«å°±æä¾›ç‰¹å®šç‰ˆæœ¬çš„è¯¥ç±»æ“ä½œâ€”â€”ç§°ä¸ºå‡½æ•°å¼<code>array extras</code>,ä¹Ÿå°±æ˜¯<code>forEach</code>ã€<code>map``reduce</code> ä»¥åŠ <code>filter</code> è¿™äº›å‡½æ•°ï¼Œå®ƒä»¬éƒ½èƒ½å¤Ÿä¸ <code>lambda</code> è¡¨è¾¾å¼è‰¯å¥½åœ°é…åˆä½¿ç”¨ã€‚</p><h3 id="ä»£ç æ¨ç†"><a href="#ä»£ç æ¨ç†" class="headerlink" title="ä»£ç æ¨ç†"></a>ä»£ç æ¨ç†</h3><p>â€œä»£ç æ¨ç†â€åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p><p>ä¹‹å‰çš„ç« èŠ‚ç”¨â€œæ¾æ•£â€è¿™ä¸ªè¯æ¥è¡¨å¾åˆ†æä¸€ä¸ªç¨‹åºä»»ä½•ä¸€ä¸ªéƒ¨åˆ†ï¼Œå¹¶å»ºç«‹ç›¸åº”å¿ƒæ™ºæ¨¡å‹çš„éš¾æ˜“ç¨‹åº¦ã€‚</p><p>è¯¥æ¨¡å‹åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šåŠ¨æ€éƒ¨åˆ†åŒ…æ‹¬æ‰€æœ‰å˜é‡çš„çŠ¶æ€å’Œå‡½æ•°çš„è¾“å‡ºï¼Œè€Œé™æ€éƒ¨åˆ†åŒ…å«å¯è¯»æ€§ä»¥åŠè®¾è®¡çš„è¡¨è¾¾æ°´å¹³ã€‚</p><p>ä¸¤ä¸ªéƒ¨åˆ†éƒ½å¾ˆé‡è¦ã€‚ä¸å¯å˜æ€§å’Œçº¯å‡½æ•°ä¼šä½¿å¾—è¯¥æ¨¡å‹çš„æ„å»ºæ›´åŠ å®¹æ˜“ã€‚ä¹‹å‰çš„å†…å®¹å¼ºè°ƒå°†é«˜é˜¶æ“ä½œé“¾æ¥èµ·æ¥æ„æˆç¨‹åºçš„ä»·å€¼ã€‚</p><p>å‘½ä»¤å¼çš„ç¨‹åºæµä¸å‡½æ•°å¼çš„ç¨‹åºæµæœ‰ç€æœ¬è´¨çš„ä¸åŒã€‚å‡½æ•°å¼çš„æ§åˆ¶æµèƒ½å¤Ÿåœ¨ä¸éœ€è¦ç ”ç©¶ä»»ä½•å†…éƒ¨ç»†èŠ‚çš„æ¡ä»¶ä¸‹æä¾›è¯¥ç¨‹åºæ„å›¾çš„æ¸…æ™°ç»“æ„ï¼Œè¿™æ ·å°±èƒ½æ›´æ·±åˆ»åœ°äº†è§£ä»£ç ï¼Œå¹¶è·çŸ¥æ•°æ®åœ¨ä¸åŒé˜¶æ®µæ˜¯å¦‚ä½•æµå…¥å’Œæµå‡ºçš„ã€‚</p><h4 id="å£°æ˜å¼æƒ°æ€§è®¡ç®—å‡½æ•°é“¾"><a href="#å£°æ˜å¼æƒ°æ€§è®¡ç®—å‡½æ•°é“¾" class="headerlink" title="å£°æ˜å¼æƒ°æ€§è®¡ç®—å‡½æ•°é“¾"></a>å£°æ˜å¼æƒ°æ€§è®¡ç®—å‡½æ•°é“¾</h4><p>ä¹‹å‰æåˆ°ï¼Œå‡½æ•°å¼ç¨‹åºæ˜¯ç”±ä¸€äº›ç®€å•å‡½æ•°ç»„æˆçš„ï¼Œå°½ç®¡æ¯ä¸ªå‡½æ•°åªå®Œæˆä¸€å°éƒ¨åˆ†åŠŸèƒ½ï¼Œä½†ç»„åˆåœ¨ä¸€èµ·å°±èƒ½å¤Ÿè§£å†³å¾ˆå¤šå¤æ‚çš„ä»»åŠ¡ã€‚</p><p>å‡½æ•°å¼ç¼–ç¨‹çš„å£°æ˜å¼æ¨¡å‹å°†ç¨‹åºè§†ä¸ºå¯¹ä¸€äº›ç‹¬ç«‹çš„çº¯å‡½æ•°çš„æ±‚å€¼ï¼Œä»è€Œåœ¨å¿…è¦çš„æŠ½è±¡å±‚æ¬¡ä¹‹ä¸Šæ„å»ºå‡ºæµç•…ä¸”è¡¨è¾¾æ¸…æ™°çš„ä»£ç ã€‚è¿™æ ·å°±å¯ä»¥æ„æˆä¸€ä¸ªèƒ½å¤Ÿæ¸…æ™°è¡¨è¾¾åº”ç”¨ç¨‹åºæ„å›¾çš„æœ¬ä½“æˆ–è¯æ±‡è¡¨ã€‚ä½¿ç”¨å¦‚<code>map</code>ã€<code>reduce</code> å’Œ <code>filter</code> è¿™æ ·çš„åŸºçŸ³æ¥æ­å»ºçº¯å‡½æ•°ï¼Œå¯ä½¿ä»£ç æ˜“äºæ¨ç†å¹¶ä¸€ç›®äº†ç„¶ã€‚</p><p>è¿™ä¸ªå±‚æ¬¡çš„æŠ½è±¡çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå®ƒä¼šä½¿å¼€å‘è€…å¼€å§‹è®¤è¯†åˆ°å„ç§æ“ä½œåº”è¯¥å¯¹æ‰€é‡‡ç”¨çš„åº•å±‚æ•°æ®ç»“æ„ä¸å¯è§ã€‚ä»ç†è®ºä¸Šè¯´ï¼Œæ— è®ºæ˜¯ä½¿ç”¨æ•°ç»„ã€é“¾è¡¨ã€äºŒå‰æ ‘è¿˜æ˜¯å…¶ä»–æ•°æ®ç»“æ„ï¼Œå®ƒéƒ½ä¸åº”è¯¥æ”¹å˜ç¨‹åºåŸæœ¬çš„è¯­ä¹‰ã€‚æ­£æ˜¯å‡ºäºè¿™ä¸ªåŸå› ï¼Œå‡½æ•°å¼ç¼–ç¨‹é€‰æ‹©æ›´å…³æ³¨äºæ“ä½œè€Œä¸æ˜¯æ•°æ®ç»“æ„ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾éœ€è¦å¯¹ä¸€ç»„å§“åè¿›è¡Œè¯»å–ã€è§„èŒƒåŒ–ã€å»é‡ï¼Œæœ€ç»ˆè¿›è¡Œæ’åºã€‚é¦–å…ˆå†™ä¸€ä¸ªå‘½ä»¤å¼çš„ç‰ˆæœ¬ï¼Œç„¶åå†é‡æ„æˆå‡½æ•°å¼çš„é£æ ¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> names = [</span><br><span class="line">  <span class="string">&quot;alonzo church&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Haskell curry&quot;</span>,</span><br><span class="line">  <span class="string">&quot;stephen_kleene&quot;</span>,</span><br><span class="line">  <span class="string">&quot;John Von Neumann&quot;</span>,</span><br><span class="line">  <span class="string">&quot;stephen_kleene&quot;</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</span><br><span class="line">  <span class="comment">//&lt;--- éå†æ•°ç»„ä¸­çš„æ‰€æœ‰åå­—</span></span><br><span class="line">  <span class="keyword">let</span> n = names[i];</span><br><span class="line">  <span class="keyword">if</span> (n !== <span class="literal">undefined</span> &amp;amp;&amp;amp; n !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">//&lt;--- æ£€æŸ¥æ‰€æœ‰è¯æ˜¯å¦éƒ½åˆæ³•</span></span><br><span class="line">    <span class="keyword">let</span> ns = n.replace(<span class="regexp">/_/</span>, <span class="string">&quot; &quot;</span>).split(<span class="string">&quot; &quot;</span>); <span class="comment">//&lt;--- æ•°ç»„åŒ…å«æ ¼å¼ä¸ä¸€è‡´çš„æ•°æ®ã€‚è¿™æ˜¯è§„èŒƒåŒ–ï¼ˆä¿®å¤ï¼‰å…ƒç´ çš„æ­¥éª¤</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; ns.length; j++) &#123;</span><br><span class="line">      <span class="keyword">let</span> p = ns[j];</span><br><span class="line">      p = p.charAt(<span class="number">0</span>).toUpperCase() + p.slice(<span class="number">1</span>);</span><br><span class="line">      ns[j] = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (result.indexOf(ns.join(<span class="string">&quot; &quot;</span>)) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//&lt;--- æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨äºç»“æœä¸­ï¼Œä»¥å»é™¤é‡å¤çš„å…ƒç´ </span></span><br><span class="line">      result.push(ns.join(<span class="string">&quot; &quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">result.sort(); <span class="comment">// &lt;--- æ•°ç»„æ’åº</span></span><br></pre></td></tr></table></figure><p>å‘½ä»¤å¼ä»£ç çš„ç¼ºç‚¹æ˜¯é™å®šäºé«˜æ•ˆåœ°è§£å†³æŸä¸ªç‰¹å®šçš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç ç”¨äºè§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚æ¯”èµ·å‡½æ•°å¼ä»£ç ï¼Œå…¶æŠ½è±¡æ°´å¹³è¦ä½å¾—å¤šã€‚æŠ½è±¡å±‚æ¬¡è¶Šä½ï¼Œä»£ç é‡ç”¨çš„æ¦‚ç‡å°±ä¼šè¶Šä½ï¼Œå‡ºç°é”™è¯¯çš„å¤æ‚æ€§å’Œå¯èƒ½æ€§å°±ä¼šè¶Šå¤§ã€‚æ­¤å¤–ï¼Œå‡½æ•°å¼çš„å®ç°ä¸è¿‡æ˜¯å°†å„ç§é»‘ç›’ç»„ä»¶è¿æ¥åœ¨ä¸€èµ·ï¼Œå°†é‡ä»»èµ‹äºˆå¦‚<code>map</code>ã€<code>reduce</code> å’Œ <code>filter</code>è¿™äº›æˆç†Ÿä¸”ç»è¿‡æµ‹è¯•çš„ APIã€‚è¯·æ³¨æ„ï¼Œçº§è”æ’åˆ—çš„å‡½æ•°è°ƒç”¨å¯ä»¥ä½¿è¯¥ä»£ç æ›´æ˜“é˜…è¯»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">_.chain(names) <span class="comment">//&lt;--- åˆå§‹åŒ–å‡½æ•°é“¾ï¼ˆåˆ›å»ºæƒ°æ€§è®¡ç®—å‡½æ•°é“¾æ¥å¤„ç†ç»™å®šçš„æ•°ç»„ï¼‰</span></span><br><span class="line">  .filter(isValid) <span class="comment">//&lt;--- å»é™¤éæ³•å€¼</span></span><br><span class="line">  .map(<span class="function">(<span class="params">s</span>) =&gt;</span> s.replace(<span class="regexp">/_/</span>, <span class="string">&quot; &quot;</span>)) <span class="comment">//&lt;--- è§„èŒƒåŒ–å€¼</span></span><br><span class="line">  .uniq() &lt;</span><br><span class="line">  ---å»æ‰é‡å¤å…ƒç´ </span><br><span class="line">    .map(_.startCase) <span class="comment">//&lt;--- å¤§å†™é¦–å­—æ¯</span></span><br><span class="line">    .sort()</span><br><span class="line">    .value(); <span class="comment">//&lt;--- æ‰§è¡Œå‡½æ•°é“¾ä¸­çš„æ‰€æœ‰å‡½æ•°</span></span><br><span class="line"><span class="comment">//-&gt; [&#x27;Alonzo Church&#x27;, &#x27;Haskell Curry&#x27;, &#x27;Jon Von Neumann&#x27;, &#x27;Stephen Kleene&#x27;]</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„ä»£ç çœ‹èµ·æ¥èˆ’æœå¾ˆå¤šï¼Œä¸ä»…æ˜¯å› ä¸ºä»£ç é‡çš„å‡å°‘ï¼Œè¿˜å› ä¸ºå…¶ç»“æ„ç®€å•æ˜äº†ã€‚</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ›´æ·±åˆ»æ˜ç™½ä¸ºä»€ä¹ˆå‡½æ•°å¼çš„ç¨‹åºæ˜¯å¦‚æ­¤ä¼˜è¶Šã€‚èƒ½å¤Ÿå†™å¾—å¦‚æ­¤æµç•…ä¸å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„çº¯æ€§ä»¥åŠæ— å‰¯ä½œç”¨çš„åŸºæœ¬åŸåˆ™æ¯æ¯ç›¸å…³ã€‚é“¾ä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½ä»¥ä¸€ç§ä¸å¯å˜çš„æ–¹å¼æ¥å¤„ç†ç”±ä¸Šä¸€ä¸ªå‡½æ•°æ„å»ºçš„æ–°æ•°ç»„ã€‚Lodash åˆ©ç”¨å‡½æ•°é“¾è¿™ç§æ¨¡å¼ï¼Œé€šè¿‡è°ƒç”¨_.chain()æä¾›äº†ä¸€ç§åŸºç¡€åŠŸèƒ½ï¼Œä»¥æ»¡è¶³å„ç§éœ€æ±‚ã€‚è¿™æœ‰åŠ©äºè¿‡æ¸¡åˆ°å¯¹ point-free ç¼–ç¨‹é£æ ¼çš„ç†è§£ã€‚pointfree æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹è‰²ï¼Œä¼šåœ¨ä¹‹ååˆ†äº«ã€‚</p><p>èƒ½å¤Ÿæƒ°æ€§åœ°å®šä¹‰ç¨‹åºçš„ç®¡é“ä¸æ­¢æœ‰å¯è¯»æ€§è¿™ä¸€ä¸ªå¥½å¤„ã€‚ç”±äºä»¥æƒ°æ€§è®¡ç®—æ–¹å¼ç¼–å†™çš„ç¨‹åºä¼šåœ¨è¿è¡Œå‰å®šä¹‰å¥½ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ•°æ®ç»“æ„é‡ç”¨æˆ–è€…æ–¹æ³•èåˆç­‰æŠ€æœ¯å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚è¿™äº›ä¼˜åŒ–ä¸ä¼šå‡å°‘æ‰§è¡Œå‡½æ•°æœ¬èº«æ‰€éœ€çš„æ—¶é—´ï¼Œä½†æœ‰åŠ©äºæ¶ˆé™¤ä¸å¿…è¦çš„è°ƒç”¨ã€‚ä¹‹åä¼šæ›´è¯¦ç»†è§£é‡Šã€‚</p><h4 id="ç±»-SQL-çš„æ•°æ®ï¼šå‡½æ•°å³æ•°æ®"><a href="#ç±»-SQL-çš„æ•°æ®ï¼šå‡½æ•°å³æ•°æ®" class="headerlink" title="ç±» SQL çš„æ•°æ®ï¼šå‡½æ•°å³æ•°æ®"></a>ç±» SQL çš„æ•°æ®ï¼šå‡½æ•°å³æ•°æ®</h4><p>æ¯”å¦‚<code>map</code>ã€<code>reduce</code>ã€<code>filter</code>ç­‰ã€‚å°†è¿™äº›å‡½æ•°ç»„æˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯ç”¨æ¥æ¢³ç†æ•°æ®ç›¸å…³çš„ä¿¡æ¯ã€‚å¦‚æœåœ¨æ›´é«˜å±‚é¢ç»†ç»†æ€è€ƒï¼Œå°±ä¼šå‘ç°è¿™äº›å‡½æ•°ä¸<code>SQL</code>ç›¸ä¼¼ï¼Œè¿™ä¸æ˜¯å¶ç„¶çš„ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> p.firstname, p.birthYear <span class="keyword">FROM</span> Person p</span><br><span class="line"><span class="keyword">WHERE</span> p.birthYear <span class="operator">&gt;</span> <span class="number">1903</span> <span class="keyword">and</span> p.country <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="string">&#x27;US&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> p.firstname, p.birthYear</span><br></pre></td></tr></table></figure><p>äº‹å®è¯æ˜ï¼Œåœ¨æ„å»ºç¨‹åºæ—¶ï¼Œä½¿ç”¨æŸ¥è¯¢è¯­è¨€æ¥æ€è€ƒä¸å‡½æ•°å¼ç¼–ç¨‹ä¸­æ“ä½œæ•°ç»„ç±»ä¼¼â€”â€”ä½¿ç”¨é€šç”¨å…³é”®å­—è¡¨æˆ–ä»£æ•°æ–¹æ³•æ¥å¢å¼ºå¯¹æ•°æ®åŠå…¶ç»“æ„çš„æ·±å±‚æ¬¡æ€è€ƒã€‚</p><p>Lodash æ”¯æŒä¸€ç§ç§°ä¸º mixins çš„åŠŸèƒ½ï¼Œå¯ä»¥ç”¨æ¥ä¸ºæ ¸å¿ƒåº“æ‰©å±•æ–°çš„å‡½æ•°ï¼Œå¹¶ä½¿å¾—å®ƒä»¬å¯ä»¥ä»¥ç›¸åŒçš„æ–¹å¼è¿æ¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_.mixin(&#123;</span><br><span class="line">  <span class="attr">select</span>: _.pluck,</span><br><span class="line">  <span class="attr">from</span>: _.chain,</span><br><span class="line">  <span class="attr">where</span>: _.filter,</span><br><span class="line">  <span class="attr">groupBy</span>: _.sortByOrder,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ç¼–å†™ç±»ä¼¼ SQL çš„ JavaScript ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">_.from(persons)</span><br><span class="line">  .where(<span class="function">(<span class="params">p</span>) =&gt;</span> p.birthYear &gt; <span class="number">1900</span> &amp;amp;&amp;amp; p.address.country !== <span class="string">&quot;US&quot;</span>)</span><br><span class="line">  .groupBy([<span class="string">&quot;firstname&quot;</span>, <span class="string">&quot;birthYear&quot;</span>])</span><br><span class="line">  .select(<span class="string">&quot;firstname&quot;</span>, <span class="string">&quot;birthYear&quot;</span>)</span><br><span class="line">  .value();</span><br><span class="line"><span class="comment">//-&gt; [&#x27;Alan&#x27;, &#x27;Barkley&#x27;, &#x27;John&#x27;]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ª SQL å…³é”®å­—åˆ°å¯¹åº”åˆ«åå‡½æ•°çš„æ˜ å°„ï¼Œä»è€Œå¯ä»¥æ›´æ·±åˆ»åœ°ç†è§£ä¸€ä¸ªæŸ¥è¯¢è¯­è¨€çš„å‡½æ•°å¼ç‰¹æ€§ã€‚</p><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>å¦ä¸€ç§ç”¨äºæ›¿æ¢å¾ªç¯çš„å¸¸è§æŠ€æœ¯æ˜¯é€’å½’ï¼Œå°¤å…¶å½“å¤„ç†ä¸€äº›â€œè‡ªç›¸ä¼¼â€çš„é—®é¢˜æ—¶ï¼Œå¯ä»¥ç”¨å…¶æ¥æŠ½è±¡è¿­ä»£ã€‚å¯¹äºè¿™äº›ç±»å‹çš„é—®é¢˜ï¼Œåºåˆ—å‡½æ•°é“¾ä¼šæ˜¾å¾—æ•ˆç‡ä½ä¸‹æˆ–ä¸é€‚ç”¨ã€‚è€Œé€’å½’å®ç°äº†è‡ªå·±çš„å¤„ç†æ•°æ®çš„æ–¹å¼ï¼Œä»è€Œå¤§å¤§ç¼©çŸ­äº†æ ‡å‡†å¾ªç¯çš„æ‰§è¡Œæ—¶é—´ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œé€’å½’å…·æœ‰è®¸å¤šåº”ç”¨åœºæ™¯ï¼Œä¾‹å¦‚è§£æ XMLã€HTML æ–‡æ¡£æˆ–å›¾å½¢ç­‰ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ</h4><p>é€’å½’æ˜¯ä¸€ç§æ—¨åœ¨é€šè¿‡å°†é—®é¢˜åˆ†è§£æˆè¾ƒå°çš„è‡ªç›¸ä¼¼é—®é¢˜æ¥è§£å†³é—®é¢˜æœ¬èº«çš„æŠ€æœ¯ï¼Œå°†è¿™äº›å°çš„è‡ªç›¸ä¼¼é—®é¢˜ç»“åˆåœ¨ä¸€èµ·ï¼Œå°±å¯ä»¥å¾—åˆ°æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆã€‚é€’å½’å‡½æ•°åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ã€‚</p><ul><li>åŸºä¾‹ï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰</li><li>é€’å½’æ¡ä»¶</li></ul><p>åŸºä¾‹æ˜¯èƒ½å¤Ÿä»¤é€’å½’å‡½æ•°è®¡ç®—å‡ºå…·ä½“ç»“æœçš„ä¸€ç»„è¾“å…¥ï¼Œè€Œä¸å¿…å†é‡å¤ä¸‹å»ã€‚é€’å½’æ¡ä»¶åˆ™å¤„ç†å‡½æ•°è°ƒç”¨è‡ªèº«çš„ä¸€ç»„è¾“å…¥ï¼ˆå¿…é¡»å°äºåŸå§‹å€¼ï¼‰ã€‚å¦‚æœè¾“å…¥ä¸å˜å°ï¼Œé‚£ä¹ˆé€’å½’å°±ä¼šæ— é™æœŸåœ°è¿è¡Œï¼Œç›´è‡³ç¨‹åºå´©æºƒã€‚</p><p>éšç€å‡½æ•°çš„é€’å½’ï¼Œè¾“å…¥ä¼šæ— æ¡ä»¶åœ°å˜å°ï¼Œæœ€ç»ˆåˆ°è¾¾è§¦å‘åŸºä¾‹çš„æ¡ä»¶ï¼Œä»¥ä¸€ä¸ªå€¼ä½œä¸ºé€’å½’è¿‡ç¨‹çš„ç»ˆæ­¢ã€‚</p><p>æ —å­ï¼šé€’å½’æ±‚å’Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(_.isEmpty(arr)) &#123; <span class="xml">&lt;---//  åŸºä¾‹ï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰</span></span><br><span class="line"><span class="xml">        return 0;</span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">    return _.first(arr) + sum(_.rest(arr)); //&lt;--- é€’å½’æ¡ä»¶ï¼šä½¿ç”¨æ›´å°ä¸€äº›çš„è¾“å…¥é›†è°ƒç”¨è‡ªèº«ã€‚è¿™é‡Œé€šè¿‡_.firstå’Œ_.restç¼©å‡è¾“å…¥é›†</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">sum([]); //-&gt; 0</span></span><br><span class="line"><span class="xml">sum([1,2,3,4,5,6,7,8,9]); //-&gt;</span><span class="number">45</span></span><br></pre></td></tr></table></figure><h4 id="é€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„"><a href="#é€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„" class="headerlink" title="é€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„"></a>é€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„</h4><p>person å¯¹è±¡ç¤ºä¾‹æ•°æ®ä¸­çš„é‚£äº›åå­—ã€‚20 ä¸–çºª 20 å¹´ä»£ï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆlambda æ¼”ç®—ã€èŒƒç•´è®ºç­‰ï¼‰èƒŒåçš„æ•°å­¦ç¤¾åŒºéå¸¸æ´»è·ƒã€‚å¤§éƒ¨åˆ†å‘è¡¨çš„ç ”ç©¶æˆæœéƒ½æ˜¯èåˆä¸€äº›ç”± Alonzo Church è¿™æ ·çš„çŸ¥åå¤§å­¦æ•™æˆæå‡ºçš„æ€æƒ³å’Œå®šç†ã€‚äº‹å®ä¸Šï¼Œè®¸å¤šæ•°å­¦å®¶ï¼Œå¦‚ Barkley Rosserã€Alan Turing å’Œ Stephen Kleene ç­‰ï¼Œéƒ½æ˜¯ Church çš„åšå£«ç”Ÿã€‚åæ¥ä»–ä»¬ä¹Ÿæœ‰äº†è‡ªå·±çš„åšå£«ç”Ÿã€‚ä¸‹å›¾ä¸ºè¿™ç§å¸ˆå¾’å…³ç³»ï¼ˆçš„ä¸€éƒ¨åˆ†ï¼‰çš„ç¤ºæ„å›¾ã€‚</p><p><img src="https://i.loli.net/2021/08/08/2z79CousSLvyHqc.png"></p><p>è¿™ç§ç»“æ„åœ¨è½¯ä»¶ä¸­æ˜¯å¾ˆå¯»å¸¸çš„ï¼Œå®ƒå¯ç”¨äºå»ºæ¨¡ XML æ–‡æ¡£ã€æ–‡ä»¶ç³»ç»Ÿã€åˆ†ç±»æ³•ã€ç§åˆ«ã€èœå•éƒ¨ä»¶ã€é€çº§å¯¼èˆªã€ç¤¾äº¤å›¾è°±ç­‰ï¼Œæ‰€ä»¥å­¦ä¹ å¦‚ä½•å¤„ç†å®ƒä»¬è‡³å…³é‡è¦ã€‚å›¾ 3.8 æ˜¾ç¤ºäº†ä¸€ç»„èŠ‚ç‚¹ï¼Œå…¶è¿çº¿è¡¨ç¤ºäº†å¯¼å¸ˆ-å­¦ç”Ÿè¿™ä¸€å…³ç³»ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ©ç”¨å‡½æ•°å¼æŠ€æœ¯è§£æè¿‡ä¸€äº›æ‰å¹³åŒ–çš„æ•°æ®ç»“æ„ï¼Œå¦‚æ•°ç»„ã€‚ä½†è¿™äº›æ“ä½œå¯¹æ ‘å½¢æ•°æ®æ˜¯æ— æ•ˆçš„ã€‚å› ä¸º JavaScript æ²¡æœ‰å†…ç½®çš„æ ‘å‹å¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦åŸºäºèŠ‚ç‚¹åˆ›å»ºä¸€ç§ç®€å•çš„æ•°æ®ç»“æ„ã€‚èŠ‚ç‚¹æ˜¯ä¸€ç§åŒ…å«äº†å½“å‰å€¼ã€çˆ¶èŠ‚ç‚¹å¼•ç”¨ä»¥åŠå­èŠ‚ç‚¹æ•°ç»„çš„å¯¹è±¡ã€‚</p><p>èŠ‚ç‚¹å¯¹è±¡çš„å®šä¹‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>._val = val;</span><br><span class="line">        <span class="built_in">this</span>._parent = <span class="literal">null</span>;</span><br><span class="line">        <span class="built_in">this</span>._children = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">isRoot</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> isValid(<span class="built_in">this</span>._parent); &lt;--- ä¹‹å‰åˆ›å»ºçš„å‡½æ•°</span><br><span class="line">    &#125;</span><br><span class="line">    get children() &#123;</span><br><span class="line">        return this._children;</span><br><span class="line">    &#125;</span><br><span class="line">    hasChildren() &#123;</span><br><span class="line">        return this._children.length &gt; 0;</span><br><span class="line">    &#125;</span><br><span class="line">    get value() &#123;</span><br><span class="line">        return this._val;</span><br><span class="line">    &#125;</span><br><span class="line">    set value(val) &#123;</span><br><span class="line">        this._val = val;</span><br><span class="line">    &#125;</span><br><span class="line">    append(child) &#123;</span><br><span class="line">        child._parent = this; //&lt;--- è®¾ç½®çˆ¶èŠ‚ç‚¹</span><br><span class="line">        this._children.push(child); //&lt;--- å°†å­©å­èŠ‚ç‚¹åŠ å…¥å­©å­åˆ—è¡¨ä¸­</span><br><span class="line">        return this; //&lt;--- è¿”å›è¯¥èŠ‚ç‚¹ï¼ˆä¾¿äºæ–¹æ³•çº§è”ï¼‰</span><br><span class="line">    &#125;</span><br><span class="line">    toString() &#123;</span><br><span class="line">        return `Node (val: $&#123;this._val&#125;, children: $&#123;this._children.length&#125;)`;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥è¿™æ ·åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> church = <span class="keyword">new</span> Node(<span class="keyword">new</span> Person(<span class="string">&quot;Alonzo&quot;</span>, <span class="string">&quot;Church&quot;</span>, <span class="string">&quot;111-11-1111&quot;</span>)); <span class="comment">// &lt;--- é‡å¤æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹</span></span><br></pre></td></tr></table></figure><p>æ ‘æ˜¯åŒ…å«äº†ä¸€ä¸ªæ ¹èŠ‚ç‚¹çš„é€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tree</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">root</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._root = root;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">map</span>(<span class="params">node, fn, tree = <span class="literal">null</span></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//&lt;--- ä½¿ç”¨é™æ€æ–¹æ³•ä»¥å…ä¸Array.prototype.map æ··æ·†ã€‚é™æ€æ–¹æ³•ä¹Ÿèƒ½åƒå•ä¾‹å‡½æ•°ä¸€æ ·é«˜æ•ˆ</span></span><br><span class="line">    node.value = fn(node.value); <span class="comment">//&lt;--- è°ƒç”¨éå†å™¨å‡½æ•°ï¼Œå¹¶æ›´æ–°æ ‘ä¸­çš„èŠ‚ç‚¹å€¼</span></span><br><span class="line">    <span class="keyword">if</span> (tree === <span class="literal">null</span>) &#123;</span><br><span class="line">      tree = <span class="keyword">new</span> Tree(node); <span class="comment">//&lt;--- ä¸ Array.prototype.map ç±»ä¼¼ã€‚ç»“æœæ˜¯ä¸€ä¸ªæ–°çš„ç»“æ„</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (node.hasChildren()) &#123;</span><br><span class="line">      <span class="comment">//&lt;--- å¦‚æœèŠ‚ç‚¹æ²¡æœ‰å­©å­ï¼Œåˆ™è¿”å›ï¼ˆåŸºä¾‹ï¼‰</span></span><br><span class="line">      _.map(node.children, <span class="function"><span class="keyword">function</span> (<span class="params">child</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//&lt;--- å°†å‡½æ•°åº”ç”¨åˆ°æ¯ä¸€ä¸ªå­©å­èŠ‚ç‚¹</span></span><br><span class="line">        Tree.map(child, fn, tree); <span class="comment">//&lt;--- é€’å½’åœ°è°ƒç”¨æ¯ä¸€ä¸ªå­©å­èŠ‚ç‚¹</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tree;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">root</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._root;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èŠ‚ç‚¹çš„ä¸»è¦é€»è¾‘åœ¨äº <code>append</code> æ–¹æ³•ã€‚è¦ç»™ä¸€ä¸ªèŠ‚ç‚¹è¿½åŠ ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œéœ€è¦å°†è¯¥èŠ‚ç‚¹è®¾ç½®ä¸ºå­èŠ‚ç‚¹çš„ parent å¼•ç”¨ï¼Œå¹¶æŠŠå­èŠ‚ç‚¹æ·»åŠ è‡³è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åˆ—è¡¨ä¸­ã€‚é€šè¿‡ä»æ ¹éƒ¨ä¸æ–­åœ°å°†èŠ‚ç‚¹é“¾æ¥åˆ°å…¶ä»–å­èŠ‚ç‚¹æ¥å¡«å……ä¸€æ£µæ ‘ï¼Œç”± church å¼€å§‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">church.append(rosser).append(turing).append(kleene);</span><br><span class="line">kleene.append(nelson).append(constable);</span><br><span class="line">rosser.append(mendelson).append(sacks);</span><br><span class="line">turing.append(gandy);</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…è£¹ç€ä¸€ä¸ª person å¯¹è±¡ã€‚é€’å½’ç®—æ³•æ‰§è¡Œæ•´ä¸ªæ ‘çš„å…ˆåºéå†ï¼Œä»æ ¹å¼€å§‹å¹¶ä¸”ä¸‹é™åˆ°æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ç”±äºå…¶è‡ªç›¸ä¼¼æ€§ï¼Œä»æ ¹èŠ‚ç‚¹éå†æ ‘å’Œä»ä»»ä½•èŠ‚ç‚¹éå†å­æ ‘æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¿™å°±æ˜¯é€’å½’å®šä¹‰ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸ Array.prototype.map è¯­ä¹‰ç±»ä¼¼çš„é«˜é˜¶å‡½æ•° Tree.mapâ€”â€”å®ƒæ¥æ”¶ä¸€ä¸ªå¯¹æ¯ä¸ªèŠ‚ç‚¹æ±‚å€¼çš„å‡½æ•°ã€‚å¯ä»¥çœ‹å‡ºï¼Œæ— è®ºç”¨ä»€ä¹ˆæ•°æ®ç»“æ„æ¥å»ºæ¨¡ï¼ˆè¿™é‡Œæ˜¯æ ‘å½¢æ•°æ®ç»“æ„ï¼‰ï¼Œè¯¥å‡½æ•°çš„è¯­ä¹‰åº”è¯¥ä¿æŒä¸å˜ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œä»»ä½•æ•°æ®ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ map å¹¶ä¿æŒå…¶ç»“æ„ä¸å˜ã€‚</p><p>æ ‘çš„å…ˆåºéå†æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚</p><ul><li>æ˜¾ç¤ºæ ¹å…ƒç´ çš„æ•°æ®éƒ¨åˆ†ã€‚</li><li>é€šè¿‡é€’å½’åœ°è°ƒç”¨å…ˆåºå‡½æ•°æ¥éå†å·¦å­æ ‘ã€‚</li><li>ä»¥ç›¸åŒçš„æ–¹å¼éå†å³å­æ ‘ã€‚</li></ul><p>ä¸‹å›¾æ˜¾ç¤ºäº†ç®—æ³•é‡‡ç”¨çš„è·¯å¾„ï¼š<br><img src="/tdl/tfl/pictures/202101/tapd_20278041_1610076259_80.png" alt="5.png"></p><p>å‡½æ•° Tree.map æœ‰ä¸¤ä¸ªå¿…éœ€çš„è¾“å…¥ï¼šæ ¹èŠ‚ç‚¹ï¼ˆå³æ ‘çš„å¼€å§‹ï¼‰ä»¥åŠè½¬æ¢æ¯ä¸ªèŠ‚ç‚¹æ•°å€¼çš„è¿­ä»£å‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Tree.map(church, <span class="function">(<span class="params">p</span>) =&gt;</span> p.fullname);</span><br></pre></td></tr></table></figure><p>å®ƒä»¥å…ˆåºæ–¹å¼éå†æ ‘ï¼Œå¹¶å°†ç»™å®šçš„å‡½æ•°åº”ç”¨äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œè¾“å‡ºä»¥ä¸‹ç»“æœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;Alonzo Church&#x27;</span>, <span class="string">&#x27;Barkley Rosser&#x27;</span>, <span class="string">&#x27;Elliot Mendelson&#x27;</span>, <span class="string">&#x27;Gerald Sacks&#x27;</span>, <span class="string">&#x27;Alan</span></span><br><span class="line"><span class="string">Turing&#x27;</span>, <span class="string">&#x27;Robin Gandy&#x27;</span>, <span class="string">&#x27;Stephen Kleene&#x27;</span>, <span class="string">&#x27;Nels Nelson&#x27;</span>, <span class="string">&#x27;Robert Constable&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>ä½¿ç”¨<code>map</code>ã€<code>reduce</code>å’Œ<code>filter</code>ç­‰é«˜é˜¶å‡½æ•°æ¥ç¼–å†™é«˜å¯æ‰©å±•çš„ä»£ç ã€‚</li><li>ä½¿ç”¨ Lodash è¿›è¡Œæ•°æ®å¤„ç†ï¼Œé€šè¿‡æ§åˆ¶é“¾åˆ›å»ºæ§åˆ¶æµä¸æ•°æ®å˜æ¢æ˜ç¡®åˆ†ç¦»çš„ç¨‹åºã€‚</li><li>ä½¿ç”¨å£°æ˜å¼çš„å‡½æ•°å¼ç¼–ç¨‹èƒ½å¤Ÿæ„å»ºå‡ºæ›´æ˜“ç†è§£çš„ç¨‹åºã€‚</li><li>å°†é«˜é˜¶æŠ½è±¡æ˜ å°„åˆ° SQL è¯­å¥ï¼Œä»è€Œæ·±åˆ»åœ°è®¤è¯†æ•°æ®ã€‚</li><li>é€’å½’èƒ½å¤Ÿè§£å†³è‡ªç›¸ä¼¼é—®é¢˜ï¼Œå¹¶è§£æé€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä»Šæ—¥åˆ†äº«: å¦‚ä½•åˆ›å»ºæ˜“äºæ¨æ–­çš„ä»£ç &lt;/p&gt;
&lt;h2 id=&quot;è½»æ•°æ®ç»“æ„ï¼Œé‡æ“ä½œ&quot;&gt;&lt;a </summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦ç¬”è®°:Javascriptå‡½æ•°å¼ç¼–ç¨‹æŒ‡å—ï¼ˆä¸€ï¼‰</title>
    <link href="http://example.com/2020/11/20/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://example.com/2020/11/20/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0:Javascript%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%80%EF%BC%89/</id>
    <published>2020-11-20T09:49:02.000Z</published>
    <updated>2021-08-08T03:12:08.293Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><p>&gt; é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOï¼‰é€šè¿‡å°è£…å˜åŒ–æ˜¯çš„ä»£ç æ›´æ˜“ç†è§£ã€‚<br>&gt; å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰é€šè¿‡æœ€å°åŒ–å˜åŒ–ä½¿å¾—ä»£ç æ›´æ˜“ç†è§£ã€‚</p><p>Michael Feathers æ˜¯ä¸–ç•Œçº§é¢å‘å¯¹è±¡æŠ€æœ¯ä¸“å®¶ï¼Œä»¥ä¸°å¯Œçš„è½¯ä»¶é¡¹ç›®å¼€å‘ç»éªŒè‘—ç§°ã€‚</p><p>ç®€æ˜æ‰¼è¦ï¼Œå¯è§å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ</h2><p>ç®€å•æ¥è¯´ï¼šå‡½æ•°å¼æ˜¯ä¸€ç§å¼ºè°ƒä»¥å‡½æ•°ä½¿ç”¨ä¸ºä¸»çš„è½¯ä»¶å¼€å‘é£æ ¼ã€‚</p><p>è¿™å¬èµ·æ¥å¾ˆå¹³å¸¸ï¼Œå¥½åƒæˆ‘ä»¬å¹³å¸¸ä¹Ÿéƒ½æ˜¯è¿™ä¹ˆåšçš„ã€‚</p><p>å…ˆè®²æ¦‚å¿µï¼šå‡½æ•°å¼ç¼–ç¨‹çš„ç›®æ ‡æ˜¯ä½¿ç”¨å‡½æ•°æ¥<strong>æŠ½è±¡ä½œç”¨åœ¨æ•°æ®ä¹‹ä¸Šçš„æ§åˆ¶æµä¸æ“ä½œ</strong>ï¼Œä»è€Œåœ¨ç³»ç»Ÿä¸­<strong>æ¶ˆé™¤å‰¯ä½œç”¨</strong>å¹¶<strong>å‡å°‘å¯¹çŠ¶æ€çš„æ”¹å˜</strong>ã€‚</p><p>æ²¡æœ‰æ —å­å°±æ˜¯åœ¨è€æµæ°“:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&quot;#msg&quot;</span>).innerHTML = <span class="string">&quot;&amp;lt;h1&amp;gt;Hello world&amp;lt;/h1&amp;gt;&quot;</span>;</span><br></pre></td></tr></table></figure><p>ä»£ç å¾ˆç®€å•ï¼Œä½†æ˜¯å†™æ­»äº†ï¼Œä¹Ÿå°±ä¸èƒ½åŠ¨æ€æ˜¾ç¤ºæ¶ˆæ¯ã€‚</p><p>å¦‚æœæƒ³æ”¹å˜æ¶ˆæ¯çš„æ ¼å¼ï¼Œå†…å®¹æˆ–è€…ç›®æ ‡ DOM å…ƒç´ ï¼Œéœ€è¦é‡å†™æ•´ä¸ªè¡¨è¾¾å¼ã€‚</p><p>æˆ‘ä»¬ç»™å®ƒæ”¹è¿›ä¸€ä¸‹:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> printMessage = (elementId, NodeType, message) &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(elementId).innerHTML = <span class="string">`&amp;lt;<span class="subst">$&#123;NodeType&#125;</span>&amp;gt;<span class="subst">$&#123;message&#125;</span>&amp;lt;/<span class="subst">$&#123;NodeType&#125;</span>&amp;gt;`</span>;</span><br><span class="line">&#125;</span><br><span class="line">printMessage(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;h1&quot;</span>, <span class="string">&quot;Hello world&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¥½ä¸€ç‚¹ï¼Œä½†æ˜¯é‡ç”¨æ€§ä»ç„¶ä¸é«˜ï¼Œæ¥ä¸‹æ¥æ”¹æˆå‡½æ•°å¼:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å®šä¹‰</span></span><br><span class="line"><span class="keyword">const</span> printMessage = run(addToDOM(<span class="string">&quot;msg&quot;</span>), h1, echo);</span><br><span class="line"></span><br><span class="line">printMessage(<span class="string">&quot;Hello world&quot;</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç ä¸ä¹‹å‰çš„å®Œå…¨ä¸åŒ: <code>h1</code>ä¸å†æ˜¯ä¸€ä¸ªé‡å€¼ï¼Œå®ƒä¸<code>addToDOM</code>,<code>echo</code>éƒ½æ˜¯å‡½æ•°ï¼Œè¿™æ ·çœ‹ä¸Šå»åƒæ˜¯ç”¨ä¸€äº›è¾ƒå°çš„å‡½æ•°æ„å»ºæˆä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚</p><p>ä»£ç å†™æˆè¿™æ ·çš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>å°†ä»£ç åˆ†è§£æˆä¸€äº›æ›´å¯é‡ç”¨ï¼Œæ›´å¯é ä¸”æ˜“äºç†è§£çš„éƒ¨åˆ†ï¼Œå†å°†å…¶ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ›´æ˜“æ¨ç†çš„ç¨‹åºæ•´ä½“ã€‚</p><p>ä¸Šé¢çš„ä»£ç æœ‰ä¸€ä¸ªç¥å¥‡çš„å‡½æ•°<code>run</code>ï¼Œå®ƒåºåˆ—åœ°è°ƒç”¨ä¸€ç³»åˆ—å‡½æ•°ã€‚</p><p>åœ¨åå°ï¼Œ<code>run</code>å‡½æ•°åŸºæœ¬ä¸Šæ˜¯é€šè¿‡å°†ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºä¸‹ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ï¼Œä»¥è¿™å¼ æ–¹å¼å°†å„ä¸ªå‡½æ•°è¿æ¥èµ·æ¥ã€‚è¿™æ ·ï¼Œç”±<code>echo</code>è¿”å›å­—ç¬¦ä¸²ï¼Œè¢«ä¼ é€’åˆ°<code>h1</code>ä¸­ï¼Œå…¶ç»“æœæœ€ç»ˆåˆè¢«ä¼ é€’åˆ°<code>addToDOM</code>ã€‚<code>run</code>å‡½æ•°çš„ç»†èŠ‚ä¹‹åä¼šè§£é‡Šã€‚</p><p>ä¸Šé¢æ¯”è¾ƒäº†å‡½æ•°å¼å’Œéå‡½æ•°å¼çš„ç¼–ç¨‹æ–¹æ¡ˆï¼Œå°½ç®¡ä»–ä»¬ç»“æœç›¸åŒï¼Œä½†æ˜¯å®ç°è¿‡ç¨‹æˆªç„¶ä¸åŒã€‚è¿™æ˜¯æºäºå‡½æ•°å¼ç¼–ç¨‹å¼€å‘ä¸­å›ºæœ‰çš„å£°æ˜æ¨¡å¼ï¼Œä¸ºäº†å……åˆ†ç†è§£å‡½æ•°å¼ç¼–ç¨‹ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€äº›åŸºæœ¬æ¦‚å¿µ:</p><ul><li>å£°æ˜å¼ç¼–ç¨‹</li><li>çº¯å‡½æ•°</li><li>å¼•ç”¨é€æ˜</li><li>ä¸å¯å˜æ€§</li></ul><h3 id="å£°æ˜å¼ç¼–ç¨‹"><a href="#å£°æ˜å¼ç¼–ç¨‹" class="headerlink" title="å£°æ˜å¼ç¼–ç¨‹"></a>å£°æ˜å¼ç¼–ç¨‹</h3><p>å‡½æ•°å¼ç¼–ç¨‹å±äº<strong>å£°æ˜å¼</strong>ç¼–ç¨‹èŒƒå¼:è¿™ç§èŒƒå¼ä¼šæè¿°ä¸€ç³»åˆ—çš„æ“ä½œï¼Œä½†å¹¶ä¸ä¼šæš´éœ²å®ƒä»¬æ˜¯å¦‚ä½•å®ç°çš„æˆ–æ˜¯æ•°æ®æµå¦‚ä½•ç©¿è¿‡å®ƒä»¬ã€‚</p><p>ç›®å‰æ›´åŠ ä¸»æµçš„æ˜¯<strong>å‘½ä»¤å¼</strong>æˆ–è€…<strong>è¿‡ç¨‹å¼</strong>çš„ç¼–ç¨‹èŒƒå¼ï¼Œå¦‚ Javaã€C#ã€C++å’Œå…¶ä»–å¤§å¤šæ•°ç»“æ„åŒ–è¯­è¨€å’Œé¢å‘å¯¹è±¡è¯­è¨€éƒ½å¯¹å…¶æä¾›æ”¯æŒã€‚</p><p>å‘½ä»¤å¼ç¼–ç¨‹å°†è®¡ç®—æœºè§†ä¸ºä¸€ç³»åˆ—è‡ªä¸Šè€Œä¸‹çš„æ–­è¨€ï¼Œé€šè¿‡ä¿®æ”¹ç³»ç»Ÿçš„çš„å„ä¸ªçŠ¶æ€æ¥è®¡ç®—æœ€ç»ˆçš„ç»“æœã€‚</p><p>çœ‹ä¸ªæ —å­:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &amp;lt; array.length; i++) &#123;</span><br><span class="line">  array[i] = <span class="built_in">Math</span>.pow(array[i], <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// [ 0,  1,  4, 9, 16, 25, 36]</span></span><br></pre></td></tr></table></figure><p>å‘½ä»¤å¼ç¼–ç¨‹å¾ˆå…·ä½“åœ°å‘Šè¯‰è®¡ç®—æœºå¦‚ä½•æ‰§è¡ŒæŸä¸ªä»»åŠ¡ã€‚</p><p>è€Œå£°æ˜å¼ç¼–ç¨‹å°†ç¨‹åºçš„æè¿°ä¸æ±‚å€¼åˆ†ç¦»å¼€æ¥ã€‚å®ƒå…³æ³¨äºå¦‚ä½•ç”¨å„ç§è¡¨è¾¾å¼æ¥æè¿°ç¨‹åºé€»è¾‘ï¼Œè€Œä¸ä¸€å®šè¦æŒ‡æ˜å…¶æ§åˆ¶æµæˆ–è€…çŠ¶æ€çš„å˜åŒ–ã€‚</p><p>å‡½æ•°å¼:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">array.map((num) =&amp;gt; <span class="built_in">Math</span>.pow(num, <span class="number">2</span>));</span><br></pre></td></tr></table></figure><p>å‡½æ•°å¼ç¼–ç¨‹åªéœ€è¦å¯¹åº”ç”¨åœ¨æ¯ä¸ªæ•°ç»„å…ƒç´ ä¸Šçš„è¡Œä¸ºäºˆä»¥å…³æ³¨ï¼Œå°†å¾ªç¯äº¤ç»™ç³»ç»Ÿçš„å…¶ä»–å…¶ä»–éƒ¨åˆ†å»æ§åˆ¶ã€‚</p><h3 id="å‰¯ä½œç”¨å¸¦æ¥é—®é¢˜å’Œçº¯å‡½æ•°"><a href="#å‰¯ä½œç”¨å¸¦æ¥é—®é¢˜å’Œçº¯å‡½æ•°" class="headerlink" title="å‰¯ä½œç”¨å¸¦æ¥é—®é¢˜å’Œçº¯å‡½æ•°"></a>å‰¯ä½œç”¨å¸¦æ¥é—®é¢˜å’Œçº¯å‡½æ•°</h3><p>å‡½æ•°å¼ç¼–ç¨‹åŸºäºä¸€ä¸ªå‰æ:å³ä½¿ç”¨çº¯å‡½æ•°æ„å»ºå…·æœ‰ä¸å˜æ€§çš„ç¨‹åºã€‚</p><p>å®ƒå…·æœ‰ä»¥ä¸‹æ€§è´¨:</p><ul><li>ä»…å–å†³äºæä¾›çš„è¾“å…¥ï¼Œè€Œä¸ä¾èµ–äºä»»ä½•åœ¨å‡½æ•°æ±‚å€¼æœŸé—´æˆ–è°ƒç”¨é—´éš”æ—¶å¯èƒ½å˜åŒ–çš„éšè—çŠ¶æ€æˆ–å¤–éƒ¨çŠ¶æ€</li><li>ä¸ä¼šé€ æˆè¶…å‡ºå…¶ä½œç”¨åŸŸçš„å˜åŒ–ï¼Œä¾‹å¦‚ä¿®æ”¹å…¨å±€å¯¹è±¡æˆ–å¼•ç”¨ä¼ é€’çš„å‚æ•°</li></ul><p>æ —å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> add = () =&amp;gt; ++counter;</span><br><span class="line"></span><br><span class="line">add(); <span class="comment">// 1</span></span><br><span class="line">counter++; <span class="comment">// 2</span></span><br><span class="line">add(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°æ˜¯ä¸çº¯çš„ï¼Œå› ä¸ºå®ƒè¯»å–å¹¶ä¿®æ”¹äº†ä¸€ä¸ªå¤–éƒ¨å˜é‡ï¼Œå³å‡½æ•°ä½œç”¨åŸŸå¤–çš„ counterã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œå‡½æ•°åœ¨è¯»å–æˆ–å†™å…¥å¤–éƒ¨èµ„æºæ—¶éƒ½ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œä¾‹å¦‚ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>counter</code>å¯ä»¥åœ¨è°ƒç”¨é—´éš”çš„ä»»ä½•æ—¶é—´å‘ç”Ÿæ”¹å˜ã€‚</p><p>å¦ä¸€ä¸ªå¸¸è§çš„å‡½æ•°æ˜¯<code>Date.now()</code>,å®ƒçš„è¾“å‡ºæ˜¯ä¸å¯é¢„è§çš„ï¼Œå¹¶ä¸”ä¸ä¸€è‡´ï¼Œå› ä¸ºå®ƒä¾èµ–äºä¸€ä¸ªä¸æ–­å˜åŒ–çš„å› ç´ â€“æ—¶é—´ã€‚</p><p>å¸¸è§çš„å‰¯ä½œç”¨:</p><ul><li>æ”¹å˜ä¸€ä¸ªå…¨å±€çš„å˜é‡ã€å±æ€§æˆ–æ•°æ®ç»“æ„</li><li>æ”¹å˜ä¸€ä¸ªå‚æ•°çš„åŸå§‹å€¼</li><li>å¤„ç†ç”¨æˆ·è¾“å…¥</li><li>å±å¹•æ‰“å°</li><li>æŸ¥è¯¢ cookie</li></ul><p>å¦‚æœæ²¡æœ‰è¿™äº›æ“ä½œï¼Œé‚£ç¨‹åºä¼šæœ‰ä»€ä¹ˆå®ç”¨ä»·å€¼ï¼Ÿ</p><p>äº‹å®ä¸Šï¼Œåœ¨ä¸€ä¸ªå……æ»¡äº†åŠ¨æ€è¡Œä¸ºä¸å˜åŒ–çš„ä¸–ç•Œé‡Œï¼Œçº¯å‡½æ•°ç¡®å®å¾ˆéš¾ä½¿ç”¨ã€‚</p><p>ä½†æ˜¯ï¼Œå‡½æ•°å¼ç¼–ç¨‹åœ¨å®è·µä¸Šå¹¶ä¸é™åˆ¶ä¸€åˆ‡çŠ¶æ€çš„æ”¹å˜ï¼Œå®ƒåªæ˜¯æä¾›äº†ä¸€ä¸ªæ¡†æ¶æ¥å¸®åŠ©ç®¡ç†å’Œå‡å°‘å¯å˜çŠ¶æ€ï¼ŒåŒæ—¶è®©ä½ èƒ½å¤Ÿå°†çº¯å‡½æ•°ä»ä¸çº¯çš„éƒ¨åˆ†ä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p><p>æ —å­:<br>å‡è®¾æœ‰ä¸€æ®µç¨‹åºï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡èº«ä»½è¯(ID)æ¥æ‰¾åˆ°ä¸€ä¸ªäººçš„è®°å½•å¹¶æ¸²æŸ“åœ¨æµè§ˆå™¨ä¸­</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> showPerson = (ID) =&amp;gt; &#123;</span><br><span class="line">  <span class="comment">// æŸ¥è¯¢æ•°æ®åº“</span></span><br><span class="line">  <span class="keyword">const</span> person = db.get(ID);</span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ªäºº</span></span><br><span class="line">  <span class="keyword">if</span> (person !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// æ¸²æŸ“æ“ä½œ</span></span><br><span class="line">    <span class="built_in">document</span>.getElementById(</span><br><span class="line">      <span class="string">`<span class="subst">$&#123;elementId&#125;</span>`</span></span><br><span class="line">    ).innerHTML = <span class="string">`<span class="subst">$&#123;person.ID&#125;</span>:<span class="subst">$&#123;person.name&#125;</span>`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;404&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">showPerson(<span class="number">123</span>);</span><br></pre></td></tr></table></figure><p>åˆ†æä»£ç :</p><ul><li>è¯¥å‡½æ•°è®¿é—®æ•°æ®ï¼Œä¸å¤–éƒ¨å˜é‡<code>db</code>è¿›è¡Œäº†äº¤äº’ï¼Œå› ä¸ºè¯¥å‡½æ•°ç­¾åä¸­å¹¶æ²¡æœ‰å£°æ˜è¯¥å‚æ•°ï¼Œåœ¨ä»»æ„æ—¶é—´ï¼Œè¿™ä¸ªå¼•ç”¨å¯èƒ½ä¸º<code>null</code>,æˆ–åœ¨è°ƒç”¨é—´éš”å†…æ”¹å˜ï¼Œä»è€Œå¯¼è‡´å®Œå…¨ä¸åŒçš„ç»“æœå¹¶ç ´åäº†ç¨‹åºçš„å®Œæ•´æ€§</li><li>å…¨å±€å˜é‡<code>elementId</code>å¯èƒ½éšæ—¶æ”¹å˜ï¼Œéš¾ä»¥æ§åˆ¶</li><li>HTML å…ƒç´ è¢«ç›´æ¥ä¿®æ”¹äº†ï¼ŒHTML æ–‡æ¡£ï¼ˆDOMï¼‰æœ¬èº«æ˜¯ä¸€ä¸ªå¯å˜çš„ã€å…±äº«çš„å…¨å±€èµ„æº</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°è®°å½•ï¼Œè¯¥å‡½æ•°å¯èƒ½ä¸ºæŠ›å‡ºå¼‚å¸¸ï¼Œå¯¼è‡´æ•´ä¸ªç¨‹åºçš„æ ˆå›é€€å¹¶çªç„¶ç»“æŸ</li></ul><p>ç”¨å‡½æ•°å¼æ€æƒ³æ”¹è¿›:</p><ul><li>å°†è¿™ä¸ªé•¿å‡½æ•°åˆ†ç¦»æˆå¤šä¸ªå…·æœ‰å•ä¸€èŒè´£çš„çŸ­å‡½æ•°</li><li>é€šè¿‡æ˜¾ç¤ºåœ°å°†å®ŒæˆåŠŸèƒ½æ‰€éœ€çš„ä¾èµ–éƒ½å®šä¹‰ä¸ºå‡½æ•°å‚æ•°æ¥å‡å°‘å‰¯ä½œç”¨çš„æ•°é‡</li></ul><p>é¦–å…ˆé€šè¿‡åˆ†ç¦»æ˜¾ç¤ºä¸è·å–æ•°æ®çš„è¡Œä¸ºã€‚</p><p>å½“ç„¶ï¼Œä¸å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿå’Œ DOM äº¤äº’æ‰€äº§ç”Ÿçš„å‰¯ä½œç”¨æ˜¯ä¸å¯é¿å…çš„ï¼Œä½†è‡³å°‘å¯ä»¥é€šè¿‡å°†å…¶ä»ä¸»é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥çš„æ–¹å¼ä½¿å®ƒä»¬æ›´æ˜“äºç®¡ç†ã€‚</p><p>è¿™é‡Œéœ€è¦å¼•å…¥ä¸€ç§å¸¸è§çš„å‡½æ•°å¼ç¼–ç¨‹æŠ€å·§â€“<strong>æŸ¯é‡ŒåŒ–</strong>ï¼Œä½¿ç”¨å®ƒï¼Œå¯ä»¥å…è®¸éƒ¨åˆ†åœ°ä¼ é€’å‡½æ•°å‚æ•°ï¼Œä»¥ä¾¿å°†å‡½æ•°çš„å‚æ•°å‡å°‘ä¸ºä¸€ä¸ªï¼Œä¹‹åä¼šå†ä»‹ç»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†ç¦»å‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> find = () =&amp;gt; &#123;</span><br><span class="line">  curry((db, id) =&amp;gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> obj = db.get(id);</span><br><span class="line">    <span class="keyword">if</span> (obj === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;404&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> message = (person) =&amp;gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;person.ID&#125;</span>:<span class="subst">$&#123;person.name&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> append = () =&amp;gt; &#123;</span><br><span class="line">  curry((elementId, info) =&amp;gt; &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(elementId).innerHTML = info;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showPerson = run(append(<span class="string">&quot;msg&quot;</span>), message, find(db));</span><br><span class="line"></span><br><span class="line">showPerson(<span class="number">123</span>);</span><br></pre></td></tr></table></figure><p>å°½ç®¡è¿™ä¸ªç¨‹åºåªæœ‰äº›è®¸æ”¹è¿›ï¼Œä½†æ˜¯å®ƒå¼€å§‹å±•ç°å‡ºè®¸å¤šä¼˜åŠ¿:</p><ul><li>çµæ´»å¾ˆå¤šï¼Œå› ä¸ºæœ‰äº†ä¸‰ä¸ªå¯ä»¥è¢«å¤ç”¨çš„ç»„ä»¶</li><li>è¿™ç§ç»†ç²’åº¦å‡½æ•°çš„é‡ç”¨æ˜¯æé«˜å·¥ä½œæ•ˆç‡çš„ä¸€ç§æ‰‹æ®µï¼Œå› ä¸ºå¯ä»¥å¤§å¤§å‡å°‘éœ€è¦ä¸»åŠ¨ç»´æŠ¤çš„ä»£ç é‡</li><li>å£°æ˜å¼ä»£ç é£æ ¼æä¾›äº†ç¨‹åºéœ€è¦æ‰§è¡Œçš„é‚£äº›é«˜é˜¶æ­¥éª¤çš„ä¸€ä¸ªæ¸…æ™°è¯•å›¾ï¼Œå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§</li><li>å°†çº¯å‡½æ•°ä»ä¸çº¯çš„è¡Œä¸ºä¸­åˆ†ç¦»å‡ºæ¥</li></ul><p>ç”±äºä¸€äº›æˆ‘ä»¬ä¼šåœ¨åç»­äº†è§£åˆ°çš„åŸå› ï¼Œèƒ½å¤Ÿç¡®ä¿ä¸€ä¸ªå‡½æ•°æœ‰ç›¸åŒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªä¼˜ç‚¹ï¼Œå®ƒä½¿å¾—å‡½æ•°çš„ç»“æœæ˜¯ä¸€è‡´çš„å’Œå¯é¢„æµ‹çš„ã€‚è¿™æ˜¯çº¯å‡½æ•°çš„ä¸€ä¸ªç‰¹è´¨ï¼Œç§°ä¸ºå¼•ç”¨é€æ˜</p><h3 id="å¼•ç”¨é€æ˜å’Œå¯ç½®æ¢æ€§"><a href="#å¼•ç”¨é€æ˜å’Œå¯ç½®æ¢æ€§" class="headerlink" title="å¼•ç”¨é€æ˜å’Œå¯ç½®æ¢æ€§"></a>å¼•ç”¨é€æ˜å’Œå¯ç½®æ¢æ€§</h3><p>å¼•ç”¨é€æ˜æ˜¯å®šä¹‰ä¸€ä¸ªçº¯å‡½æ•°æ­£ç¡®çš„æ–¹å¼ã€‚çº¯åº¦åœ¨è¿™ä¸ªæ„ä¹‰ä¸Šè¡¨æ˜äº†ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ä¹‹å‰æ˜ å°„çš„çº¯çš„å…³ç³»ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å¯¹äºç›¸åŒè¾“å…¥å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆå°±è¯´å®ƒæ˜¯<strong>å¼•ç”¨é€æ˜</strong>çš„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> counter = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> add = () =&amp;gt; ++counter;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‡½æ•°ä¸æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œå› ä¸ºå…¶è¿”å›å€¼ä¸¥é‡ä¾èµ–å¤–éƒ¨å˜é‡ counterã€‚æ”¹é€ :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> add = (counter) =&amp;gt; ++counter;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†å¼•ç”¨é€æ˜ï¼Œéœ€è¦åˆ é™¤å…¶ä¾èµ–çš„å¤–éƒ¨å˜é‡è¿™ä¸€çŠ¶æ€ï¼Œä½¿å…¶æˆä¸ºå‡½æ•°ç­¾åä¸­æ˜¾ç¤ºå®šä¹‰çš„å‚æ•°ã€‚</p><p>ç°åœ¨è¿™ä¸ªå‡½æ•°æ˜¯ç¨³å®šçš„ï¼Œå¯¹äºç›¸åŒè¾“å…¥æ¯æ¬¡éƒ½è¿”å›ç›¸åŒçš„è¾“å‡ºç»“æœã€‚</p><p>ä¹‹æ‰€ä»¥è¿½æ±‚è¿™ç§å‡½æ•°çš„ç‰¹è´¨ï¼Œæ˜¯å› ä¸ºå®ƒä¸ä»…èƒ½è®©ä»£ç æ›´æ˜“äºæµ‹è¯•ï¼Œè¿˜å¯ä»¥è®©å¼€å‘äººå‘˜æ›´å®¹æ˜“<strong>æ¨ç†æ•´ä¸ªç¨‹åº</strong>ã€‚</p><p>å‡è®¾ç°åœ¨è¦æ±‚ä¸€ä¸ªæ•°ç»„ä¸­çš„å¹³å‡å€¼:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> input = [<span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = (total, current) =&amp;gt; total + current;</span><br><span class="line"><span class="keyword">const</span> total = (arr) =&amp;gt; arr.reduce(sum);</span><br><span class="line"><span class="keyword">const</span> size = (arr) =&amp;gt; arr.length;</span><br><span class="line"><span class="keyword">const</span> divide = (a, b) =&amp;gt; a / b;</span><br><span class="line"><span class="keyword">const</span> average = (arr) =&amp;gt; divide(sum(arr), size(arr));</span><br><span class="line"></span><br><span class="line">average(input);</span><br></pre></td></tr></table></figure><p>ç”±äºå‡½æ•°<code>sum</code>å’Œ<code>size</code>éƒ½æ˜¯å¼•ç”¨é€æ˜çš„ï¼Œå¯¹äºå¦‚ä¸‹ç»™å®šè¾“å…¥ï¼Œå¯ä»¥å¾ˆå®¹æ˜“é‡å†™è¿™ä¸ªè¡¨è¾¾å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">divide(<span class="number">90</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="number">90</span> / <span class="number">3</span> = <span class="number">30</span>;</span><br></pre></td></tr></table></figure><h3 id="å­˜å‚¨ä¸å¯å˜æ•°æ®"><a href="#å­˜å‚¨ä¸å¯å˜æ•°æ®" class="headerlink" title="å­˜å‚¨ä¸å¯å˜æ•°æ®"></a>å­˜å‚¨ä¸å¯å˜æ•°æ®</h3><p><strong>ä¸å¯å˜æ•°æ®</strong>æ˜¯æŒ‡é‚£äº›è¢«åˆ›å»ºåä¸èƒ½æ›´æ”¹çš„æ•°æ®ã€‚</p><p>ä¸è®¸å¤šå…¶ä»–è¯­è¨€ä¸€æ ·ï¼ŒJavaScript ä¸­çš„æ‰€æœ‰åŸºæœ¬ç±»å‹ï¼ˆStringã€Number ç­‰ï¼‰ä»æœ¬è´¨ä¸Šæ˜¯ä¸å¯å˜çš„ã€‚ä½†æ˜¯å…¶ä»–å¯¹è±¡ï¼Œä¾‹å¦‚æ•°ç»„ï¼Œéƒ½æ˜¯å¯å˜çš„â€”â€”å³ä½¿ä»–ä»¬ä½œä¸ºè¾“å…¥ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œä»ç„¶å¯ä»¥é€šè¿‡æ”¹å˜åŸæœ‰å†…å®¹çš„æ–¹å¼äº§ç”Ÿå‰¯ä½œç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortDesc = (arr) =&amp;gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.sort((a, b) =&amp;gt; b - a);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> input = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">let</span> output = sortDesc(input);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(input); <span class="comment">// [7, 6, 5, 4, 3, 2, 1]</span></span><br><span class="line"><span class="built_in">console</span>.log(output); <span class="comment">// [7, 6, 5, 4, 3, 2, 1]</span></span><br></pre></td></tr></table></figure><p>æ’åºçš„ç›®çš„è¾¾åˆ°äº†ï¼Œä½†æ˜¯äº§ç”Ÿäº†å‰¯ä½œç”¨ï¼Œå³æ”¹å˜äº†è¾“å…¥ã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›åŸºæœ¬åŸåˆ™ï¼ˆå¦‚å£°æ˜å¼çš„ã€çº¯çš„å’Œä¸å¯å˜çš„ï¼‰ï¼Œé‚£å¯ä»¥è¿™ä¹ˆæè¿°å®ƒ:</p><p>å‡½æ•°å¼ç¼–ç¨‹æ˜¯æŒ‡ä¸ºåˆ›å»ºä¸å¯å˜çš„ç¨‹åºï¼Œé€šè¿‡æ¶ˆé™¤å¤–éƒ¨å¯è§çš„å‰¯ä½œç”¨ï¼Œæ¥å¯¹çº¯å‡½æ•°çš„å£°æ˜å¼çš„æ±‚å€¼è¿‡ç¨‹ã€‚</p><h2 id="å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹"><a href="#å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹"></a>å‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹</h2><ul><li>ä¿ƒä½¿å¼€å‘äººå‘˜å°†ä»»åŠ¡åˆ†è§£æˆæ›´å°çš„ä»»åŠ¡(å‡½æ•°)</li><li>ä½¿ç”¨æµå¼çš„è°ƒç”¨é“¾æ¥å¤„ç†æ•°æ®</li><li>é€šè¿‡å“åº”å¼èŒƒå¼é™ä½æ˜¯å°†é©±åŠ¨ä»£ç çš„å¤æ‚æ€§</li></ul><h3 id="å¤æ‚ä»»åŠ¡çš„åˆ†è§£"><a href="#å¤æ‚ä»»åŠ¡çš„åˆ†è§£" class="headerlink" title="å¤æ‚ä»»åŠ¡çš„åˆ†è§£"></a>å¤æ‚ä»»åŠ¡çš„åˆ†è§£</h3><p>ä»å®è§‚ä¸Šè®²ï¼Œå‡½æ•°å¼ç¼–ç¨‹å®é™…ä¸Šæ˜¯åˆ†è§£ï¼ˆå°†ç¨‹åºæ‹†åˆ†æˆå°ç‰‡æ®µï¼‰å’Œç»„åˆï¼ˆå°†å°ç‰‡æ®µè¿æ¥åˆ°ä¸€èµ·ï¼‰ä¹‹é—´çš„ç›¸äº’ä½œç”¨ã€‚æ­£æ˜¯è¿™ç§äºŒå…ƒæ€§ï¼Œä½¿å¾—å‡½æ•°å¼å¦‚æ­¤æ¨¡å—åŒ–å’Œé«˜æ•ˆã€‚</p><p>è¿™é‡Œçš„æ¨¡å—åŒ–å°±æ˜¯å‡½æ•°æœ¬èº«ï¼Œå‡½æ•°å¼æ€ç»´çš„å­¦ä¹ é€šå¸¸å§‹äºå°†ç‰¹å®šä»»åŠ¡åˆ†è§£ä¸ºé€»è¾‘å­ä»»åŠ¡ï¼ˆå‡½æ•°ï¼‰çš„è¿‡ç¨‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> find = () =&amp;gt; &#123;</span><br><span class="line">  curry((db, id) =&amp;gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> obj = db.get(id);</span><br><span class="line">    <span class="keyword">if</span> (obj === <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&quot;404&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> obj;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> message = (person) =&amp;gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;person.ID&#125;</span>:<span class="subst">$&#123;person.name&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> append = () =&amp;gt; &#123;</span><br><span class="line">  curry((elementId, info) =&amp;gt; &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementById(elementId).innerHTML = info;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showPerson = run(append(<span class="string">&quot;msg&quot;</span>), message, find(db));</span><br><span class="line"></span><br><span class="line">showPerson(<span class="number">123</span>);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">                find</span><br><span class="line">showPerson  â†’   message</span><br><span class="line">                append</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ï¼Œè¿™äº›å­ä»»åŠ¡å¯ä»¥è¿›ä¸€æ­¥åˆ†è§£ï¼Œç›´åˆ°æˆä¸ºä¸€ä¸ªä¸ªç®€å•çš„ï¼Œç›¸äº’ç‹¬ç«‹çš„çº¯å‡½æ•°åŠŸèƒ½å•å…ƒã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„æ¨¡å—åŒ–æ¦‚å¿µä¸<strong>å•ä¸€èŒè´£</strong>åŸåˆ™æ¯æ¯ç›¸å…³ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°éƒ½åº”è¯¥æ‹¥æœ‰å•ä¸€çš„ç›®çš„ã€‚çº¯åº¦å’Œå¼•ç”¨é€æ˜ä¼šä¿ƒä½¿æˆ‘ä»¬è¿™æ ·æ€è€ƒé—®é¢˜ã€‚</p><p>è¿˜è®°å¾—ä¸Šé¢è¯´çš„é‚£ä¸ª<code>run</code>å‡½æ•°å—ï¼Ÿ</p><p>ç°åœ¨æ­ç§˜è¿™ä¸ªé»‘é­”æ³•:å®é™…ä¸Š<code>run</code>å‡½æ•°æ˜¯ä¸€ä¸ªæä¸ºé‡è¦çš„æŠ€æœ¯çš„åˆ«å â€”â€” <strong>ç»„åˆ</strong> ã€‚</p><p>ä¸¤ä¸ªå‡½æ•°çš„ç»„åˆæ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå®ƒæ‹¿åˆ°ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºï¼Œå¹¶ä¼ é€’åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸­ã€‚è®²è¿°æœ‰ä¸¤ä¸ªå‡½æ•°<code>f</code>å’Œ<code>g</code>ï¼Œå½¢å¼ä¸Šï¼Œç»„åˆå¯ä»¥å¦‚ä¸‹æè¿°:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f Â· g = f(g(x))</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå…¬å¼è¯»ä½œâ€œf ç»„åˆä¸Š gâ€,å®ƒåœ¨ g çš„è¿”å›å€¼ä¸ f çš„å‚æ•°ä¹‹é—´æ„å»ºäº†ä¸€ä¸ªæ¾è€¦åˆçš„ä¸”ç±»å‹å®‰å…¨çš„è”ç³»ã€‚</p><p>ä¸¤ä¸ªå‡½æ•°èƒ½å¤Ÿç»„åˆçš„æ¡ä»¶æ˜¯ï¼Œå®ƒä»¬å¿…é¡»åœ¨å‚æ•°æ•°ç›®åŠå‚æ•°ç±»å‹ä¸Šå½¢æˆä¸€è‡´ã€‚</p><p>ç°åœ¨ç”¨<code>compose</code>æ„å»ºç»„åˆå‡½æ•°<code>showPerson</code>:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> showPerson = compose(append(<span class="string">&quot;#msg&quot;</span>), message, find(db));</span><br><span class="line">showPerson(<span class="number">123</span>);</span><br></pre></td></tr></table></figure><p>å…³äºç»„åˆï¼Œå…ˆäº†è§£è¿™ä¹ˆå¤šã€‚</p><p>åˆ°æ­¤ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°:å‡½æ•°å¼çš„ç»„åˆæé«˜äº†æŠ½è±¡çš„å±‚æ¬¡ï¼Œå¯ä»¥æ¸…æ™°åœ°å¤Ÿå‹¾å‹’ä»£ç çš„æ‰€æœ‰æ­¥éª¤ï¼Œä½†åˆä¸æš´éœ²ä»»ä½•åº•å±‚ç»†èŠ‚åœ¨æ­¤ä»£ç æ‰§è¡Œçš„æ‰€æœ‰æ­¥éª¤ã€‚</p><p>ç”±äº<code>compose</code>æ¥å—å…¶ä»–å‡½æ•°ä¸ºå‚æ•°ï¼Œè¿™è¢«ç§°ä¸º<code>é«˜é˜¶å‡½æ•°</code>ï¼Œä½†ç»„åˆå¹¶ä¸æ˜¯æ„å»ºæµå¼çš„ã€æ¨¡å—åŒ–çš„ä»£ç çš„å”¯ä¸€æ–¹å¼ã€‚</p><h3 id="ä½¿ç”¨æµå¼é“¾æ¥å¤„ç†å‡½æ•°"><a href="#ä½¿ç”¨æµå¼é“¾æ¥å¤„ç†å‡½æ•°" class="headerlink" title="ä½¿ç”¨æµå¼é“¾æ¥å¤„ç†å‡½æ•°"></a>ä½¿ç”¨æµå¼é“¾æ¥å¤„ç†å‡½æ•°</h3><p>é™¤äº†<code>map</code>ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å¯¼å…¥ä¸€äº›å‡½æ•°å¼ç±»åº“æ¥è·å¾—æ›´å¤šé«˜é˜¶å‡½æ•°ï¼Œæ¯”æ–¹è¯´<code>lodash</code>ã€‚</p><p>å‡è®¾ä¸€ä¸ªåœºæ™¯:éœ€è¦è®¡ç®—é‚£äº›é€‰æ‹©å¤šé—¨è¯¾ç¨‹çš„å­¦ç”Ÿçš„å¹³å‡åˆ†</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">  &#123; <span class="attr">number</span>: <span class="number">2</span>, <span class="attr">grade</span>: <span class="number">100</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">number</span>: <span class="number">3</span>, <span class="attr">grade</span>: <span class="number">80</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">number</span>: <span class="number">1</span>, <span class="attr">grade</span>: <span class="number">89</span> &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p>å‘½ä»¤å¼ä»£ç å¯èƒ½æ˜¯è¿™æ ·çš„:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> totalGrade = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> totalStudentsFound = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &amp;lt; data.length; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> student = data[i];</span><br><span class="line">  <span class="keyword">if</span> (student !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (student.number &amp;gt; <span class="number">1</span>) &#123;</span><br><span class="line">      totalGrade += student.grade;</span><br><span class="line">      totalStudentsFound++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> average = totalGrade / totalStudentsFound;</span><br></pre></td></tr></table></figure><p>ç”¨å‡½æ•°å¼æ€ç»´æ¥åˆ†è§£è¿™ä¸ªé—®é¢˜:</p><ul><li>é€‰æ‹©åˆé€‚çš„å­¦ç”Ÿï¼ˆé€‰è¯¾æ•°é‡å¤§äº 1 çš„ï¼‰</li><li>è·å–ä»–ä»¬çš„æˆç»©</li><li>è®¡ç®—å¹³å‡å€¼</li></ul><p>é€šè¿‡<code>lodash</code>æŠŠè¿™äº›æ“ä½œè¿æ¥èµ·æ¥:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_.chain(data)</span><br><span class="line">  .filter((student) =&amp;gt; student.number &amp;gt; <span class="number">1</span>)</span><br><span class="line">  .pluck(<span class="string">&quot;grade&quot;</span>)</span><br><span class="line">  .average()</span><br><span class="line">  .value(); <span class="comment">// æ‰§è¡Œé“¾å¼é˜Ÿåˆ—å¹¶æå–è§£é“¾åçš„å€¼ã€‚</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆä¸ç”¨å¤ªåœ¨æ„å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä¸å‘½ä»¤å¼ç‰ˆæœ¬æ¯”è¾ƒï¼Œå¹¶æ³¨æ„å¦‚ä½•æ¶ˆé™¤å˜é‡çš„å£°æ˜å’Œå˜åŒ–ï¼Œä»¥åŠå¾ªç¯å’Œåˆ¤æ–­è¯­å¥ã€‚</p><p>è¯¸å¦‚å¾ªç¯å’Œé€»è¾‘åˆ†æ”¯è¿™æ ·çš„å¾ˆå¤šå‘½ä»¤å¼æ§åˆ¶æµæœºåˆ¶ï¼Œä¼šæé«˜å‡½æ•°çš„å¤æ‚ç¨‹åº¦ï¼Œå› ä¸ºå®ƒä»¬ä¼šæ ¹æ®æŸäº›æ¡ä»¶ä¸åŒè€Œæ‰§è¡Œä¸åŒçš„è¡Œä¸ºï¼Œéš¾ä»¥æµ‹è¯•ã€‚</p><p>ä¸Šé¢ä»£ç ç•¥è¿‡äº†ä¸€äº›é”™è¯¯å¤„ç†ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€äº›çº¯å‡½æ•°å¼çš„è®¾è®¡æ¨¡å¼æ¥å¤„ç†å®ƒï¼Œè¿™ä¸ªä»¥åå†è¯´ã€‚</p><h3 id="å¤æ‚å¼‚æ­¥åº”ç”¨ä¸­çš„å“åº”"><a href="#å¤æ‚å¼‚æ­¥åº”ç”¨ä¸­çš„å“åº”" class="headerlink" title="å¤æ‚å¼‚æ­¥åº”ç”¨ä¸­çš„å“åº”"></a>å¤æ‚å¼‚æ­¥åº”ç”¨ä¸­çš„å“åº”</h3><p>å¤§å®¶ç»å†è¿‡å›è°ƒåœ°ç‹±å—ï¼Ÿ</p><p>å®ƒæ‰“ç ´äº†çº¿æ€§çš„ä»£ç ç»“æ„ï¼Œä½¿ä»£ç å˜å¾—éš¾ä»¥é˜…è¯»ï¼Œå› ä¸ºå®ƒçš„æˆåŠŸå¤„ç†å’Œå¤±è´¥å¤„ç†çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ã€‚</p><p>æˆ‘ä»¬ç»å¸¸è¦å¤„ç†åœ¨æœåŠ¡ç«¯æˆ–è€…å®¢æˆ·ç«¯çš„å¼‚æ­¥å’Œäº‹ä»¶é©±åŠ¨ä»£ç ï¼Œå¯ä»¥ç”¨å“åº”å¼ç¼–ç¨‹æ¥å¤§å¹…é™ä½è¿™äº›ä»£ç çš„å¤æ‚æ€§</p><p>å“åº”å¼æ˜¯ä¸€ç§èŒƒå¼ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹åº”ç”¨ä¹‹ä¸€ï¼Œé‡‡ç”¨å®ƒçš„å¥½å¤„åœ¨äºèƒ½å¤Ÿæé«˜ä»£ç çš„æŠ½è±¡çº§åˆ«ï¼Œä»è€Œæ›´ä¸“æ³¨ä¸šåŠ¡é€»è¾‘ã€‚è¿™ç§èŒƒå¼èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å‡½æ•°å¼ç¼–ç¨‹ä¸­å‡½æ•°é“¾å’Œç»„åˆçš„æ ·å¼ã€‚</p><p>äº‹ä»¶æœ‰å¾ˆå¤šç§:é¼ æ ‡ç‚¹å‡»ã€æ–‡æœ¬å˜åŒ–ã€ç„¦ç‚¹å˜åŒ–ã€HTTP è¯·æ±‚å¤„ç†æˆ–è€…æ–‡ä»¶å†™å…¥ç­‰ç­‰ã€‚å‡è®¾ç°åœ¨æ ¹æ®è¾“å…¥çš„ ID å·ç æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œå‘½ä»¤å¼ä»£ç å¯èƒ½æ˜¯è¿™æ ·çš„:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> valid = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> element = <span class="built_in">document</span>.getElementById(<span class="string">&quot;#input&quot;</span>);</span><br><span class="line">element.onkeyup = (event) =&amp;gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> val = element.value;</span><br><span class="line">  <span class="keyword">if</span> (val !== <span class="literal">null</span> &amp;amp;&amp;amp; val.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// å¯èƒ½è¿›è¡Œçš„è£å‰ªæˆ–è€…æ¸…ç†è¾“å…¥ï¼Œç›´æ¥æ”¹å˜æ•°æ®</span></span><br><span class="line">    val = val.replace(<span class="regexp">/^[a-zA-Z0-9_-]&#123;4,16&#125;$/</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">// å¯èƒ½å­˜åœ¨çš„åµŒå¥—é€»è¾‘åˆ†æ”¯</span></span><br><span class="line">    <span class="keyword">if</span> (val.length === <span class="number">9</span>) &#123;</span><br><span class="line">      valid = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;404&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>æˆ‘åˆšå­¦ç¼–ç¨‹é‚£ä¼šå†™è¿‡ç±»ä¼¼ç»“æ„çš„ä»£ç ï¼Œä¸€å¤§æ®µé€»è¾‘å¡åœ¨ä¸€èµ·ã€‚ä½†æ˜¯å¯¹äºè¿™æ ·ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ï¼Œç¼–ç ä»ä¸€å¼€å§‹å°±å˜å¾—å¤æ‚ï¼Œè¿™æ ·é™¤äº†å¢åŠ å¿ƒæ™ºè´Ÿæ‹…ï¼Œä»£ç ä¹Ÿæ— æ³•é‡ç”¨ã€‚</p><p>æ¥åº·åº·å“åº”å¼ï¼Œè¿™ç§ç™½ç—´å—æ¨ªèŒƒå¼ä½¿ç”¨äº†ä¸€ä¸ªå«åš<code>observable</code>çš„æ¦‚å¿µï¼Œå®ƒèƒ½å¤Ÿè®¢é˜…ä¸€ä¸ªæ•°æ®æµï¼Œè®©å¼€å‘è€…é€šè¿‡ä½¿ç”¨ç»„åˆå’Œé“¾å¼æ“ä½œæ¥ä¼˜é›…åœ°å¤„ç†æ•°æ®ã€‚</p><p>ä»£ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Rx.Observable.fromEvent(<span class="built_in">document</span>.getElementById(<span class="string">&quot;#input&quot;</span>), <span class="string">&quot;keyup&quot;</span>)</span><br><span class="line">  .map((input) =&amp;gt; input.srcElement.value)</span><br><span class="line">  .filter((val) =&amp;gt; val !== <span class="literal">null</span> &amp;amp;&amp;amp; val.length !== <span class="number">0</span>)</span><br><span class="line">  .skipWhile((val) =&amp;gt; length === <span class="number">9</span>)</span><br><span class="line">  .subscribe(() =&amp;gt; <span class="built_in">console</span>.log(<span class="string">&quot;404&quot;</span>));</span><br></pre></td></tr></table></figure><p>å®ƒå’Œå‰é¢çš„ä¾‹å­ç›¸åƒï¼Œè¿™è¯´æ˜ï¼Œæ— è®ºæ˜¯å¤„ç†é›†åˆå…ƒç´ åºåˆ—æˆ–è€…ç”¨æˆ·è¾“å…¥åºåˆ—ï¼Œä¸€åˆ‡éƒ½è¢«æŠ½è±¡å‡ºæ¥ï¼Œè¿™ä½¿å¾—å¯ä»¥ç”¨ç›¸åŒçš„æ–¹å¼å»å¤„ç†æ•°æ®ã€‚</p><p>ä¸Šé¢çš„ä»£ç çš„æ“ä½œæ˜¯ä¸å¯å˜çš„ï¼Œå¹¶ä¸”æ‰€æœ‰ä¸šåŠ¡é€»è¾‘è¢«åˆ†å‰²æˆå•ç‹¬çš„å‡½æ•°ã€‚å¹¶ä¸æ˜¯å¿…é¡»è¦å“åº”å¼åœ°ä½¿ç”¨å‡½æ•°ï¼Œä½†å‡½æ•°å¼çš„æ€ç»´ä¼šè¿«ä½¿å¼€å‘è€…è¿™ä¹ˆåšã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>ä½¿ç”¨çº¯å‡½æ•°çš„ä»£ç ç»ä¸ä¼šæ›´æ”¹æˆ–ç ´åå…¨å±€çŠ¶æ€ï¼Œæœ‰åŠ©äºæé«˜ä»£ç çš„å¯æµ‹è¯•æ€§å’Œå¯ç»´æŠ¤æ€§</li><li>å‡½æ•°å¼ç¼–ç¨‹é‡‡ç”¨å£°æ˜å¼çš„é£æ ¼ï¼Œæ˜“äºæ¨ç†ã€‚è¿™æé«˜äº†åº”ç”¨ç¨‹åºçš„æ•´ä½“å¯è¯»æ€§ï¼Œé€šè¿‡ä½¿ç”¨ç»„åˆå’Œ lambda è¡¨è¾¾å¼ä½¿å‡½æ•°æ›´åŠ ç²¾ç®€</li><li>é›†åˆä¸­æ•°æ®å…ƒç´ å¯ä»¥é€šè¿‡é“¾æ¥å¦‚ map å’Œ reduce è¿™æ ·çš„å‡½æ•°æ¥å®ç°</li><li>å‡½æ•°å¼ç¼–ç¨‹å°†å‡½æ•°è§†ä¸ºç§¯æœ¨ï¼Œé€šè¿‡ä¸€ç­‰é«˜é˜¶å‡½æ•°æ¥æé«˜ä»£ç çš„æ¨¡å—åŒ–å’Œå¯é‡ç”¨æ€§</li><li>å¯ä»¥åˆ©ç”¨å“åº”å¼ç¼–ç¨‹ç»„åˆå„ä¸ªå‡½æ•°æ¥é™ä½é©±åŠ¨ç¨‹åºçš„å¤æ‚æ€§</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;gt; é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOï¼‰é€šè¿‡å°è£…å˜åŒ–æ˜¯çš„ä»£ç æ›´æ˜“ç†è§£ã€‚&lt;br&gt;&amp;gt; å‡½æ•°å¼ç¼–ç¨‹</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Promiseè§„èŒƒç¿»è¯‘</title>
    <link href="http://example.com/2020/11/09/PromisesA+%E8%A7%84%E8%8C%83%E7%BF%BB%E8%AF%91/"/>
    <id>http://example.com/2020/11/09/PromisesA+%E8%A7%84%E8%8C%83%E7%BF%BB%E8%AF%91/</id>
    <published>2020-11-09T13:30:40.000Z</published>
    <updated>2021-08-07T05:59:13.910Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><p><a href="https://promisesaplus.com/">åŸæ–‡</a></p><p>ä¸€ä¸ªå¼€æ”¾æ ‡å‡†,é€šç”¨çš„ JavaScript promise ,ç”±å¼€å‘è€…åˆ¶å®šï¼Œä¾›å¼€å‘è€…ä½¿ç”¨ã€‚</p><p>Promise ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœã€‚ä¸ Promise äº¤äº’çš„ä¸»è¦æ–¹å¼ä¸º<code>then</code>æ–¹æ³•,è¯¥æ–¹æ³•æ³¨å†Œå›è°ƒå‡½æ•°ä»¥æ¥æ”¶ promise çš„æˆåŠŸçš„ç»“æœæˆ–è€…å¤±è´¥çš„åŸå› ã€‚</p><p>è¯¥è§„èŒƒè¯¦ç»†è¯´æ˜äº†<code>then</code>æ–¹æ³•çš„è¡Œä¸º,æ‰€æœ‰åŸºäº Promise/A+è§„èŒƒå®ç°çš„ Promise éƒ½å¿…é¡»ä»¥æ­¤ä¸ºåŸºç¡€å®ç°ã€‚å› æ­¤è§„èŒƒåº”è¯¥éå¸¸ç¨³å®šã€‚å°½ç®¡ Promises/A+ç»„ç»‡å¯èƒ½ä¼šå¶å°”ä¿®æ”¹æ­¤è§„èŒƒä»¥å‘åå…¼å®¹,åªæœ‰ç»è¿‡ä»”ç»†è€ƒè™‘ï¼Œè®¨è®ºå’Œæµ‹è¯•åï¼Œæˆ‘ä»¬æ‰ä¼šé›†æˆå¤§å‹æˆ–ä¸å‘åå…¼å®¹çš„æ›´æ”¹ã€‚</p><p>ä»å…¶å‘å±•è¿‡ç¨‹æ¥çœ‹ï¼ŒPromises/A+å…¶å®æ˜¯æŠŠä¹‹å‰çš„<code>Promises/Aææ¡ˆ</code>å½’çº³æ€»ç»“ä¸ºæ ‡å‡†ã€‚æ‰©å±•äº†ä¸€äº›ç°æœ‰çš„è¡Œä¸ºè§„èŒƒï¼Œå¹¶åˆ é™¤äº†ä¸€äº›æœ‰é—®é¢˜çš„ã€æœªæ˜ç¡®çš„éƒ¨åˆ†ã€‚</p><p>æœ€ç»ˆï¼ŒPromises/A+è§„èŒƒæ ¸å¿ƒå†…å®¹ä¸åŒ…æ‹¬æ€æ ·å¤„ç† promises çš„åˆ›å»ºï¼ˆcreateï¼‰,å®Œæˆï¼ˆfulfillï¼‰å’Œæ‹’ç»ï¼ˆrejectï¼‰ï¼Œè€Œæ˜¯é€‰æ‹©ä¸“æ³¨äºæä¾›ä¸€ä¸ªé€šç”¨çš„ï¼Œå…·å¤‡å¯äº’æ“ä½œçš„<code>then</code>æ–¹æ³•ã€‚ä¸Šè¿°çš„æ“ä½œæ–¹æ³•å¯èƒ½ä¼šåœ¨æœªæ¥ä¿®æ”¹è¯¥è§„èŒƒæ—¶æåŠã€‚</p><h3 id="1-æœ¯è¯­"><a href="#1-æœ¯è¯­" class="headerlink" title="1. æœ¯è¯­"></a>1. æœ¯è¯­</h3><p>1.1 â€œpromiseâ€ æ˜¯ä¸€ä¸ªæ‹¥æœ‰<code>then</code>æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œå…¶è¡Œä¸ºç¬¦åˆæœ¬è§„èŒƒ<br>1.2 â€œthenableâ€ æ˜¯ä¸€ä¸ªå®šä¹‰äº†<code>then</code>æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°<br>1.3 â€œvalueâ€ å¯ä»¥æ˜¯ä»»ä½• JavaScript çš„åˆæ³•å€¼ï¼ˆåŒ…æ‹¬ undefined, thenable å’Œ promiseï¼‰<br>1.4 â€œexceptionâ€ æ˜¯ä¸€ä¸ªä½¿ç”¨<code>throw</code>è¯­å¥æŠ›å‡ºçš„å€¼ã€‚<br>1.5 â€œreasonâ€æ˜¯ä¸€ä¸ªè¡¨ç¤º promise å¤±è´¥çš„åŸå› </p><h3 id="2-è¦æ±‚"><a href="#2-è¦æ±‚" class="headerlink" title="2. è¦æ±‚"></a>2. è¦æ±‚</h3><h4 id="2-1-Promise-è¦æ±‚"><a href="#2-1-Promise-è¦æ±‚" class="headerlink" title="2.1 Promise è¦æ±‚"></a>2.1 Promise è¦æ±‚</h4><p>ä¸€ä¸ª Promise å¿…é¡»å¤„äºä»¥ä¸‹ä¸‰ç§çŠ¶æ€ä¸­çš„å…¶ä¸­ä¸€ç§: pendingï¼ˆç­‰å¾…ï¼‰, fulfilledï¼ˆå®Œæˆï¼‰, æˆ– rejectedï¼ˆæ‹’ç»ï¼‰ã€‚</p><p>2.1.1 å½“ promise å¤„äº pending çŠ¶æ€</p><ul><li><p>2.1.1.1. å¯ä»¥è½¬æ¢åˆ° fulfilled æˆ– rejected çš„çŠ¶æ€ã€‚</p><p>2.1.2 å½“ promise å¤„äº fulfilled çŠ¶æ€</p></li><li><p>2.1.2.1 ä¸èƒ½å†è½¬æ¢çŠ¶æ€ã€‚</p></li><li><p>2.1.2.2 å¿…é¡»æœ‰ä¸€ä¸ªå€¼(value),ä¸”ä¸å¯æ”¹å˜ã€‚</p><p>2.1.3 å½“ promise å¤„äº rejected çŠ¶æ€</p></li><li><p>2.1.3.1 ä¸èƒ½å†è½¬æ¢çŠ¶æ€ã€‚</p></li><li><p>2.1.3.2 å¿…é¡»æœ‰ä¸€ä¸ªåŸå› (reason),ä¸”ä¸å¯æ”¹å˜ã€‚</p></li></ul><p>è¿™é‡Œçš„ä¸å¯æ”¹å˜æŒ‡çš„æ˜¯æ’ç­‰ï¼ˆå³ <code>===</code> ï¼‰ï¼Œè€Œä¸æ˜¯æ„å‘³ç€å…¶å†…éƒ¨çš„ä¸å¯å˜ï¼ˆå³ä»…ä»…æ˜¯å…¶å¼•ç”¨åœ°å€ä¸å˜ï¼Œä½†å±æ€§å€¼å¯è¢«æ›´æ”¹ï¼‰ã€‚</p><h4 id="2-2-then-æ–¹æ³•"><a href="#2-2-then-æ–¹æ³•" class="headerlink" title="2.2 then æ–¹æ³•"></a>2.2 then æ–¹æ³•</h4><p>ä¸€ä¸ª promise å¿…é¡»æä¾›ä¸€ä¸ª<code>then</code>æ–¹æ³•ä»¥è¯»å–å…¶å½“å‰å€¼ã€ç»ˆå€¼å’Œå¤±è´¥åŸå› ã€‚<br>ä¸€ä¸ª promise çš„<code>then</code>æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">promise.then(onFullfilled, onRejected);</span><br></pre></td></tr></table></figure><p>2.2.1 <code>onFulfilled</code>å’Œ<code>onRejected</code>éƒ½æ˜¯å¯é€‰çš„å‚æ•°:</p><ul><li><p>2.2.1.1 å¦‚æœ<code>onFullfilled</code>ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™å®ƒä¼šè¢«å¿½ç•¥</p></li><li><p>2.2.1.2 å¦‚æœ<code>onRejected</code>ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™å®ƒä¼šè¢«å¿½ç•¥</p><p>2.2.2 å¦‚æœ<code>onFulfilled</code>æ˜¯ä¸€ä¸ªå‡½æ•°</p></li><li><p>2.2.2.1 å¿…é¡»åœ¨ <code>promise</code> æ‰§è¡Œç»“æŸåæ‰§è¡Œï¼Œ<code>promise</code>çš„ value ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</p></li><li><p>2.2.2.2 åœ¨ <code>promise</code> æ‰§è¡Œç»“æŸå‰ä¸å¯è¢«è°ƒç”¨</p></li><li><p>2.2.2.3 ä¸èƒ½è¢«å¤šæ¬¡è°ƒç”¨</p><p>2.2.3 å¦‚æœ<code>onRejected</code>æ˜¯ä¸€ä¸ªå‡½æ•°</p></li><li><p>2.2.3.1 å¿…é¡»åœ¨ <code>promise</code> è¢«æ‹’ç»åæ‰§è¡Œ,<code>promise</code>çš„ reason ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°</p></li><li><p>2.2.3.2 åœ¨ <code>promise</code> æ‰§è¡Œç»“æŸå‰ä¸å¯è¢«è°ƒç”¨</p></li><li><p>2.2.3.3 ä¸èƒ½è¢«å¤šæ¬¡è°ƒç”¨</p><p>2.2.4 <code>onFulfilled</code>å’Œ<code>onRejected</code>åªæœ‰åœ¨æ‰§è¡Œç¯å¢ƒå †æ ˆä»…åŒ…å«å¹³å°ä»£ç æ—¶æ‰å¯è¢«è°ƒç”¨ <a href="####3.1">3.1</a></p><p>2.2.5 <code>onFulfilled</code>å’Œ<code>onRejected</code>å¿…é¡»è¢«ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼ˆå³æ²¡æœ‰ this å€¼ï¼‰ <a href="####3.2">3.2</a></p><p>2.2.6 <code>then</code>æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡</p></li><li><p>2.2.6.1 å¦‚æœ/å½“ <code>promise</code>æ˜¯ fulfilled çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ç›¸åº”çš„<code>onFulfilled</code>å›è°ƒå¿…é¡»æŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œ<code>then</code>æ–¹æ³•</p></li><li><p>2.2.6.2 å¦‚æœ/å½“ <code>promise</code>æ˜¯ rejected çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ç›¸åº”çš„<code>onRejected</code>å›è°ƒå¿…é¡»æŒ‰æ³¨å†Œé¡ºåºæ‰§è¡Œ<code>then</code>æ–¹æ³•</p><p>2.2.7 <code>then</code>æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ª promise å¯¹è±¡<a href="####3.3">3.3</a></p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">promise2 = promise1.then(onFulfilled, onRejected);</span><br></pre></td></tr></table></figure><ul><li>2.2.7.1 å¦‚æœ<code>onFulfilled</code>æˆ–è€…<code>onRejected</code>è¿”å›ä¸€ä¸ªå€¼<code>x</code> ï¼Œåˆ™è¿è¡Œä¸‹é¢çš„ Promise è§£å†³è¿‡ç¨‹ï¼š<code>[[Resolve]](promise2, x)</code></li><li>2.2.7.2 å¦‚æœ<code>onFulfilled</code>æˆ–è€…<code>onRejected</code>æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸<code>e</code> ï¼Œåˆ™<code>promise2</code>å¿…é¡»æ‹’ç»æ‰§è¡Œï¼Œå¹¶å°†<code>e</code>ä½œä¸ºæ‹’ç»åŸå› </li><li>2.2.7.3 å¦‚æœ<code>onFulfilled</code>ä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¹¶ä¸”<code>promise1</code>å·²ç»å®Œæˆï¼Œåˆ™<code>promise2</code>å¿…é¡»ä½¿ç”¨ä¸<code>promise1</code>ç›¸åŒçš„ value æ¥ fulfilled</li><li>2.2.7.4 å¦‚æœ<code>onRejected</code>ä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¹¶ä¸”<code>promise1</code>å·²ç»å®Œæˆï¼Œåˆ™<code>promise2</code>å¿…é¡»ä½¿ç”¨ä¸<code>promise1</code>ç›¸åŒçš„ reason æ¥ rejected</li></ul><h4 id="2-3-Promise-è§£å†³è¿‡ç¨‹"><a href="#2-3-Promise-è§£å†³è¿‡ç¨‹" class="headerlink" title="2.3 Promise è§£å†³è¿‡ç¨‹"></a>2.3 Promise è§£å†³è¿‡ç¨‹</h4><p>Promise è§£å†³è¿‡ç¨‹æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ“ä½œ,å…¶éœ€è¾“å…¥ä¸€ä¸ª promise å’Œä¸€ä¸ªå€¼,æˆ‘ä»¬è¡¨ç¤ºä¸º<code>[[Resolve]](promise, x)</code>,å¦‚æœ x æ˜¯ä¸€ä¸ª thenable(promise),å®ƒä¼šå°è¯•é‡‡ç”¨ x çš„çŠ¶æ€,å‰ææ˜¯<code>x</code>è¡Œä¸ºè‡³å°‘æœ‰ç‚¹åƒ promiseã€‚å¦åˆ™ï¼Œå®ƒä½œä¸º<code>promise</code>çš„ fulfilled çš„ value è¿”å›ã€‚<br>å¯¹ thenables çš„è¿™ç§å¤„ç†å…è®¸ promise å®ç°è¿›è¡Œæ›´å…·æœ‰é€šç”¨æ€§ï¼šåªè¦å…¶æš´éœ²å‡ºä¸€ä¸ªéµå¾ª Promise/A+ åè®®çš„ then æ–¹æ³•å³å¯ï¼›è¿™åŒæ—¶ä¹Ÿä½¿éµå¾ª Promise/A+ è§„èŒƒçš„å®ç°å¯ä»¥ä¸ä¸å†²çªçš„å®ç°èƒ½è‰¯å¥½å…±å­˜ã€‚</p><p>è¦è¿è¡Œ<code>[[Resolve]](promise, x)</code>, éœ€éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p><ul><li>2.3.1 å¦‚æœ<code>promise</code>å’Œ<code>x</code>æŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œä»¥<code>TypeError</code>ä¸ºæ‹’ç»åŸå› æ‹’ç»æ‰§è¡Œ<code>promise</code></li><li>2.3.2 å¦‚æœ<code>x</code>ä¸º Promise,åˆ™ä½¿ promise æ¥å— x çš„çŠ¶æ€<a href="####3.4">3.4</a><ul><li>2.3.2.1 å¦‚æœ<code>x</code>å¤„äº pending,promise éœ€ä¿æŒ pending,ç›´è‡³<code>x</code>è¢«æ‰§è¡Œæˆ–æ‹’ç»</li><li>2.3.2.2 å¦‚æœ<code>x</code>æ‰§è¡Œå®Œæ¯•,ç”¨ç›¸åŒçš„å€¼æ‰§è¡Œ<code>promise</code></li><li>2.3.2.3 å¦‚æœ<code>x</code>è¢«æ‹’ç»,ç”¨ç›¸åŒçš„åŸå› æ‹’ç»<code>promise</code></li></ul></li><li>2.3.3 å¦‚æœ<code>x</code>ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°<ul><li>2.3.3.1 æŠŠ<code>x.then</code>èµ‹å€¼ç»™<code>then</code><a href="####3.5">3.5</a></li><li>2.3.3.2 å¦‚æœå–<code>x.then</code>çš„å€¼æ—¶æŠ›å‡ºé”™è¯¯<code>e</code>,åˆ™ç”¨<code>e</code>ä½œä¸º promise çš„æ‹’ç»åŸå› </li><li>2.3.3.3 å¦‚æœ<code>then</code>æ˜¯å‡½æ•°,å°†<code>x</code>ä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸ<code>this</code>è°ƒç”¨ä¹‹ã€‚ä¼ é€’ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°,ç¬¬ä¸€ä¸ªå‚æ•°å«åš<code>resolvePromise</code>,ç¬¬äºŒä¸ªå‚æ•°å«åš<code>rejectPromise</code>:<ul><li>2.3.3.3.1 å¦‚æœ<code>resolvePromise</code>ä»¥å€¼<code>y</code>ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™è¿è¡Œ <code>[[Resolve]](promise, y)</code></li><li>2.3.3.3.2 å¦‚æœ<code>rejectPromise</code>ä»¥æ‹’ç»åŸå› <code>r</code>ä¸ºå‚æ•°è¢«è°ƒç”¨,åˆ™ä»¥<code>r</code>æ‹’ç»<code>promise</code></li><li>2.3.3.3.3 å¦‚æœ<code>resolvePromise</code>å’Œ<code>rejectPromise</code>å‡è¢«è°ƒç”¨,æˆ–è€…è¢«åŒä¸€å‚æ•°è°ƒç”¨äº†å¤šæ¬¡,åˆ™ä¼˜å…ˆé‡‡ç”¨é¦–æ¬¡è°ƒç”¨å¹¶å¿½ç•¥å…¶ä½™è°ƒç”¨</li><li>2.3.3.3.4 å¦‚æœè°ƒç”¨<code>then</code>æ–¹æ³•æ—¶æŠ›å‡ºå¼‚å¸¸<code>e</code>,<ul><li>2.3.3.3.4.1 å¦‚æœ<code>resolvePromise</code>æˆ–<code>rejectPromise</code>å·²ç»è¢«è°ƒç”¨,å°±å¿½ç•¥å®ƒ</li><li>2.3.3.3.4.2 å¦åˆ™ä»¥<code>e</code>ä¸ºåŸå› æ‹’ç»<code>promise</code></li></ul></li></ul></li><li>2.3.3.4 å¦‚æœ<code>then</code>ä¸æ˜¯å‡½æ•°,ä»¥<code>x</code>ä¸ºå‚æ•°æ‰§è¡Œ<code>promise</code></li></ul></li><li>2.3.4 å¦‚æœ<code>x</code>ä¸ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°,ä»¥<code>x</code>ä¸ºå‚æ•°æ‰§è¡Œ<code>promise</code></li></ul><p>å¦‚æœä¸€ä¸ª promise è¢«ä¸€ä¸ªå¾ªç¯çš„ thenable é“¾ä¸­çš„å¯¹è±¡è§£å†³ï¼Œè€Œ<code>[[Resolve]](promise, thenable)</code>çš„é€’å½’æ€§è´¨å¯¼è‡´å…¶è¢«å†æ¬¡è°ƒç”¨,æ ¹æ®ä¸Šè¿°çš„ç®—æ³•å°†ä¼šé™·å…¥æ— é™é€’å½’ã€‚è§„èŒƒé¼“åŠ±æ–½è€…æ£€æµ‹è¿™æ ·çš„é€’å½’æ˜¯å¦å­˜åœ¨,ä½†ä¸å¼ºåˆ¶,å¦‚æœæ£€æµ‹åˆ°å­˜åœ¨åˆ™ä»¥ä¸€ä¸ªå¯è¯†åˆ«çš„<code>TypeError</code>ä¸ºåŸå› æ¥æ‹’ç» <code>promise</code>ã€‚<a href="####3.6">3.6</a></p><h3 id="3-å¤‡æ³¨"><a href="#3-å¤‡æ³¨" class="headerlink" title="3. å¤‡æ³¨"></a>3. å¤‡æ³¨</h3><h4 id="3-1"><a href="#3-1" class="headerlink" title="3.1"></a>3.1</h4><p>è¿™é‡Œçš„â€œå¹³å°ä»£ç â€æŒ‡çš„æ˜¯å¼•æ“,ç¯å¢ƒå’Œ promise å®ç°ä»£ç ã€‚å®è·µä¸­è¦ç¡®ä¿<code>onFulfilled</code>å’Œ<code>onRejected</code>æ–¹æ³•å¼‚æ­¥æ‰§è¡Œ,ä¸”åº”è¯¥åœ¨<code>then</code>æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚è¿™å¯ä»¥ç”¨â€œå®ä»»åŠ¡â€æœºåˆ¶å®ç°,ä¾‹å¦‚<code>setTimeout</code>æˆ–è€…<code>setImmediate</code>,æˆ–è€…ç”¨â€œå¾®ä»»åŠ¡â€æœºåˆ¶,ä¾‹å¦‚<code>MutationObserver</code>æˆ–<code>process.nextTick</code>ã€‚ç”±äº promise å®ç°è¢«è®¤ä¸ºæ˜¯å¹³å°ä»£ç ,å› æ­¤å®ƒæœ¬èº«å¯èƒ½åŒ…å«ä¸€ä¸ªä»»åŠ¡è°ƒåº¦é˜Ÿåˆ—æˆ–â€œtrampolineâ€çš„å¤„ç†ç¨‹åºã€‚</p><h4 id="3-2"><a href="#3-2" class="headerlink" title="3.2"></a>3.2</h4><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸¥æ ¼æ¨¡å¼ï¼ˆstrictï¼‰ä¸­ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code>;åœ¨éä¸¥æ ¼æ¨¡å¼ä¸­å…¶ä¸ºå…¨å±€å¯¹è±¡ã€‚</p><h4 id="3-3"><a href="#3-3" class="headerlink" title="3.3"></a>3.3</h4><p>ä»£ç å®ç°åœ¨æ»¡è¶³æ‰€æœ‰è¦æ±‚çš„æƒ…å†µä¸‹å¯ä»¥å…è®¸<code>promise2 === promise1</code>ã€‚æ¯ä¸ªå®ç°éƒ½è¦æ–‡æ¡£è¯´æ˜å…¶æ˜¯å¦å…è®¸ä»¥åŠåœ¨ä½•ç§æ¡ä»¶ä¸‹å…è®¸ p<code>romise2 === promise1</code>ã€‚</p><h4 id="3-4"><a href="#3-4" class="headerlink" title="3.4"></a>3.4</h4><p>ä¸€èˆ¬æ¥è¯´,<code>x</code>å¦‚æœå®ƒæ¥è‡ªå½“å‰çš„å®ç°,é‚£ä¹ˆå®ƒæ˜¯ä¸€ä¸ªçœŸæ­£çš„ promiseã€‚è¯¥å­å¥å…è®¸ä½¿ç”¨ç‰¹å®šäºå®ç°çš„æ–¹æ³•æ¥é‡‡ç”¨å·²çŸ¥ç¬¦åˆçš„ promise çš„çŠ¶æ€ã€‚</p><h4 id="3-5"><a href="#3-5" class="headerlink" title="3.5"></a>3.5</h4><p>æ­¤è¿‡ç¨‹é¦–å…ˆå­˜å‚¨å¼•ç”¨<code>x.then</code>,ç„¶åæµ‹è¯•,è°ƒç”¨è¯¥å¼•ç”¨,é¿å…å¤šæ¬¡è®¿é—®è¯¥<code>x.then</code>å±æ€§ã€‚è¿™ä¹ˆåšçš„åŸå› æ˜¯é˜²æ­¢æ¯æ¬¡è·å–è¯¥å€¼æ—¶,è¿”å›ä¸åŒçš„æƒ…å†µï¼ˆES5 çš„ getter ç‰¹æ€§å¯èƒ½ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼‰</p><h4 id="3-6"><a href="#3-6" class="headerlink" title="3.6"></a>3.6</h4><p>å®ç°ä¸åº”è¯¥å¯¹ thenable é“¾çš„æ·±åº¦è®¾é™,å¹¶å‡å®šè¶…å‡ºæœ¬é™åˆ¶çš„é€’å½’å°±æ˜¯æ— é™å¾ªç¯ã€‚åªæœ‰çœŸæ­£çš„å¾ªç¯é€’å½’æ‰åº”èƒ½å¯¼è‡´<code>TypeError</code>å¼‚å¸¸ï¼›å¦‚æœä¸€æ¡æ— é™é•¿çš„é“¾ä¸Š thenable å‡ä¸ç›¸åŒ,é‚£ä¹ˆé€’å½’ä¸‹å»æ°¸è¿œæ˜¯æ­£ç¡®çš„è¡Œä¸ºã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://promisesaplus.com/&quot;&gt;åŸæ–‡&lt;/a&gt;&lt;</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>margin åˆå¹¶</title>
    <link href="http://example.com/2020/10/26/margin%E5%90%88%E5%B9%B6/"/>
    <id>http://example.com/2020/10/26/margin%E5%90%88%E5%B9%B6/</id>
    <published>2020-10-26T10:42:31.000Z</published>
    <updated>2021-08-07T05:59:13.885Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="ä»€ä¹ˆæ˜¯-margin-åˆå¹¶"><a href="#ä»€ä¹ˆæ˜¯-margin-åˆå¹¶" class="headerlink" title="ä»€ä¹ˆæ˜¯ margin åˆå¹¶"></a>ä»€ä¹ˆæ˜¯ margin åˆå¹¶</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Box_Model/Mastering_margin_collapsing">MDN å®šä¹‰</a></p><p>å—çš„ä¸Šå¤–è¾¹è·(margin-top)å’Œä¸‹å¤–è¾¹è·(margin-bottom)æœ‰æ—¶åˆå¹¶(æŠ˜å )ä¸ºå•ä¸ªè¾¹è·,å…¶å¤§å°ä¸ºå•ä¸ªè¾¹è·çš„æœ€å¤§å€¼(æˆ–å¦‚æœå®ƒä»¬ç›¸ç­‰,åˆ™ä»…ä¸ºå…¶ä¸­ä¸€ä¸ª),è¿™ç§è¡Œä¸ºç§°ä¸ºè¾¹è·æŠ˜å .</p><p>ä¸¾ä¸ª ğŸŒ°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="css">        writing-mode: vertical-lr;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>å—çº§å…ƒç´ </strong>,ä½†ä¸åŒ…æ‹¬æµ®åŠ¨å’Œç»å¯¹å®šä½å…ƒç´ (ä»–ä»¬å¯ä»¥è®©å…ƒç´ å—çŠ¶åŒ–)</li><li>åªå‘ç”Ÿåœ¨å‚ç›´æ–¹å‘(ä¸è€ƒè™‘<strong>writing-mode</strong>çš„æƒ…å†µ,ä¸¥æ ¼æ¥è¯´åº”è¯¥æ˜¯åªå‘ç”Ÿåœ¨å’Œå½“å‰æ–‡æ¡£æµæ–¹å‘çš„ç›¸å‚ç›´æ–¹å‘ä¸Š,é»˜è®¤çš„æ–‡æ¡£æµæ˜¯æ°´å¹³æµ)</li></ul><h2 id="margin-åˆå¹¶ä¸‰ç§åœºæ™¯"><a href="#margin-åˆå¹¶ä¸‰ç§åœºæ™¯" class="headerlink" title="margin åˆå¹¶ä¸‰ç§åœºæ™¯"></a>margin åˆå¹¶ä¸‰ç§åœºæ™¯</h2><ul><li>ç›¸é‚»å…„å¼Ÿå…ƒç´  margin åˆå¹¶</li><li>çˆ¶çº§å’Œç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ </li><li>ç©ºçš„å—çº§å…ƒç´ çš„ margin åˆå¹¶</li></ul><h4 id="ç›¸é‚»å…„å¼Ÿå…ƒç´ -margin-åˆå¹¶"><a href="#ç›¸é‚»å…„å¼Ÿå…ƒç´ -margin-åˆå¹¶" class="headerlink" title="ç›¸é‚»å…„å¼Ÿå…ƒç´  margin åˆå¹¶"></a>ç›¸é‚»å…„å¼Ÿå…ƒç´  margin åˆå¹¶</h4><p>ä¾‹å­å¦‚ä¸Š</p><h4 id="çˆ¶çº§å’Œç¬¬ä¸€ä¸ª-æœ€åä¸€ä¸ªå­å…ƒç´ "><a href="#çˆ¶çº§å’Œç¬¬ä¸€ä¸ª-æœ€åä¸€ä¸ªå­å…ƒç´ " class="headerlink" title="çˆ¶çº§å’Œç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ "></a>çˆ¶çº§å’Œç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ </h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px;&quot;</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px;&quot;</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ"><a href="#å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ" class="headerlink" title="å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ?"></a>å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ?</h5><p>å¯ä»¥è¿›è¡Œçš„æ“ä½œ(æ»¡è¶³ä¸€ä¸ªæ¡ä»¶å³å¯):</p><ul><li>çˆ¶å…ƒç´ è®¾ç½®å—çŠ¶æ ¼å¼åŒ–ä¸Šä¸‹æ–‡å…ƒç´ </li><li>çˆ¶çº§å’Œç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ªå­å…ƒç´ ä¹‹é—´æ·»åŠ å†…è”å…ƒç´ è¿›è¡Œåˆ†éš”</li><li>çˆ¶å…ƒç´ è®¾ç½®<code>border</code></li><li>çˆ¶å…ƒç´ è®¾ç½®<code>padding</code></li></ul><h4 id="ç©ºçš„å—çº§å…ƒç´ çš„-margin-åˆå¹¶"><a href="#ç©ºçš„å—çº§å…ƒç´ çš„-margin-åˆå¹¶" class="headerlink" title="ç©ºçš„å—çº§å…ƒç´ çš„ margin åˆå¹¶"></a>ç©ºçš„å—çº§å…ƒç´ çš„ margin åˆå¹¶</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ-1"><a href="#å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ-1" class="headerlink" title="å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ?"></a>å¦‚ä½•é˜»æ­¢è¿™é‡Œmarginåˆå¹¶çš„å‘ç”Ÿ?</h5><p>å¯ä»¥è¿›è¡Œçš„æ“ä½œ(æ»¡è¶³ä¸€ä¸ªæ¡ä»¶å³å¯):</p><ul><li>è®¾ç½®<code>height</code>æˆ–è€…<code>min-height</code></li><li>æ·»åŠ å†…è”å…ƒç´ è¿›è¡Œåˆ†éš”</li><li>çˆ¶å…ƒç´ è®¾ç½®<code>border</code></li><li>çˆ¶å…ƒç´ è®¾ç½®<code>padding</code></li></ul><h2 id="margin-åˆå¹¶çš„è®¡ç®—è§„åˆ™"><a href="#margin-åˆå¹¶çš„è®¡ç®—è§„åˆ™" class="headerlink" title="margin åˆå¹¶çš„è®¡ç®—è§„åˆ™"></a>margin åˆå¹¶çš„è®¡ç®—è§„åˆ™</h2><ul><li>åŒå‘å–æå€¼<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 50px;&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span>b<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>æ­¤æ—¶ä¸¤ä¸ª<code>div</code>çš„é—´è·ä¸º50px</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 100px; background-color: antiquewhite;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: -50px;&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: -20px;&quot;</span>&gt;</span>b<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¸¤ä¸ª<code>div</code>çš„é—´è·ä¸º-50px,è§†è§‰ä¸Šé50px</p><ul><li>åå‘å–å·®å€¼<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 50px;&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: -20px;&quot;</span>&gt;</span>b<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>æ­¤æ—¶ä¸¤ä¸ª<code>div</code>çš„é—´è·ä¸º30px,å³ 50px+(-20px)</li></ul><h2 id="margin-åˆå¹¶çš„æ„ä¹‰"><a href="#margin-åˆå¹¶çš„æ„ä¹‰" class="headerlink" title="margin åˆå¹¶çš„æ„ä¹‰"></a>margin åˆå¹¶çš„æ„ä¹‰</h2><h4 id="ä¸ºä»€ä¹ˆä¼šæœ‰margin"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰margin" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰margin"></a>ä¸ºä»€ä¹ˆä¼šæœ‰margin</h4><p>æœ€åˆCSSçš„è®¾è®¡æœ¬æ„å°±æ˜¯ä¸ºäº†å›¾æ–‡ä¿¡æ¯çš„å±•ç¤º,æœ‰äº†é»˜è®¤çš„<code>margin</code>,å›¾æ–‡å°±ä¸ä¼šæŒ¤åœ¨ä¸€èµ·,å‚ç›´æ–¹å‘ä¸Šå°±å¯ä»¥å±‚æ¬¡åˆ†æ˜.<br>æ¯”å¦‚è¯´<code>&lt;p&gt;&lt;/p&gt;</code>,å…¶<code>margin</code>é»˜è®¤å•ä½ä¸ºem,ä¸ºä»€ä¹ˆä½¿ç”¨ç›¸å¯¹å•ä½?<br>æµè§ˆå™¨çš„å­—å·å¤§å°å¯ä»¥è‡ªå®šä¹‰,å½“æˆ‘ä»¬è‡ªå®šä¹‰ä¸ºè¾ƒå¤§å€¼æ—¶,marginè·Ÿéšå˜åŒ–,èƒ½å¤Ÿä¿æŒåˆé€‚çš„æ’ç‰ˆ.</p><h4 id="margin-åˆå¹¶çš„æ„ä¹‰-1"><a href="#margin-åˆå¹¶çš„æ„ä¹‰-1" class="headerlink" title="margin åˆå¹¶çš„æ„ä¹‰"></a>margin åˆå¹¶çš„æ„ä¹‰</h4><p>å¯¹äºå…„å¼Ÿå…ƒç´ çš„<code>margin</code>åˆå¹¶å…¶ä½œç”¨å’Œemç±»ä¼¼,éƒ½æ˜¯ä¸ºäº†è®©å›¾æ–‡ä¿¡æ¯æ‰“å¾—æ’ç‰ˆæ›´èˆ’æœè‡ªç„¶.</p><p>å¯¹äºçˆ¶å­å…ƒç´ çš„<code>margin</code>åˆå¹¶çš„æ„ä¹‰åœ¨äº:åœ¨é¡µé¢ä¸­ä»»ä½•åœ°æ–¹æ’å…¥å’ŒåµŒå¥—<code>&lt;div&gt;&lt;/div&gt;</code>éƒ½ä¸ä¼šå½±å“åŸæ¥çš„å—çŠ¶å¸ƒå±€.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨åœ¨è¯¥å…ƒç´ å¤–åµŒå¥—ä¸€å±‚<code>&lt;div&gt;&lt;/div&gt;</code>æ ‡ç­¾,å¦‚æœæ²¡æœ‰åˆå¹¶è§„åˆ™,è¯¥å…ƒç´ å’Œå…„å¼ŸèŠ‚ç‚¹çš„é—´è·å¯èƒ½å°±ä¼šå˜å¤§,ä¹Ÿå°±å½±å“äº†åŸæ¥çš„å¸ƒå±€.</p><p>å¯¹äºè‡ªèº«çš„<code>margin</code>åˆå¹¶çš„æ„ä¹‰åœ¨äºå¯ä»¥é¿å…ç©ºæ ‡ç­¾çš„å½±å“</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>a<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>b<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºè§„åˆ™çš„å­˜åœ¨,å®ƒå’Œåº•ä¸‹çš„ä»£ç æ˜¯ä¸€æ ·çš„æ•ˆæœ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>a<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>b<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-margin-åˆå¹¶&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-margin-åˆå¹¶&quot;</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="CSS" scheme="http://example.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Babelè½¬è¯‘ä¸‹çš„è£…é¥°å™¨</title>
    <link href="http://example.com/2020/08/16/Babel%E8%BD%AC%E8%AF%91%E4%B8%8B%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8/"/>
    <id>http://example.com/2020/08/16/Babel%E8%BD%AC%E8%AF%91%E4%B8%8B%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8/</id>
    <published>2020-08-16T11:40:50.000Z</published>
    <updated>2021-08-07T05:59:13.676Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h4 id="è£…é¥°å™¨æ¦‚å¿µ"><a href="#è£…é¥°å™¨æ¦‚å¿µ" class="headerlink" title="è£…é¥°å™¨æ¦‚å¿µ"></a>è£…é¥°å™¨æ¦‚å¿µ</h4><p>å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šé€šè¿‡è¿”å›ä¸€ä¸ªæ–°å‡½æ•°æ¥ä¿®æ”¹ä¼ å…¥çš„å‡½æ•°æˆ–æ–¹æ³•çš„è¡Œä¸º</p><h4 id="è£…é¥°å™¨ç”¨æ³•"><a href="#è£…é¥°å™¨ç”¨æ³•" class="headerlink" title="è£…é¥°å™¨ç”¨æ³•"></a>è£…é¥°å™¨ç”¨æ³•</h4><ul><li>è£…é¥°ç±»æ–¹æ³•æˆ–å±æ€§(ç±»æˆå‘˜)</li><li>è£…é¥°ç±»</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> log = <span class="function">(<span class="params">target, name, descriptor</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> oldValue = descriptor.value;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> descriptor.value === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">    descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">console</span>.log(oldValue.apply(<span class="built_in">this</span>, args));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(descriptor.value)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foodCategory = <span class="function">(<span class="params">target, name, descriptor</span>) =&gt;</span> &#123;</span><br><span class="line">  target.category = <span class="string">&quot;food&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@foodCategory</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cola</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @log</span><br><span class="line">  <span class="function"><span class="title">color</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`red`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cola = <span class="keyword">new</span> Cola(<span class="string">&quot;Coca Cola&quot;</span>);</span><br><span class="line">cola.color(); <span class="comment">// red</span></span><br><span class="line"><span class="built_in">console</span>.log(Cola.category); <span class="comment">// food</span></span><br></pre></td></tr></table></figure><p><strong>è£…é¥°æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯é€šè¿‡ <code>Object.defineProperty()</code> æ¥å®ç°çš„</strong></p><p>ç»è¿‡babelè½¬æ¢ä¹‹å(åº•ä¸‹æœ‰babelè¯¦ç»†æ“ä½œ):</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@function </span></span></span><br><span class="line"><span class="comment"> * è¯¥å‡½æ•°çš„ä½œç”¨å°±æ˜¯å°†æ•°ç»„ä¸­çš„æ–¹æ³•æ·»åŠ åˆ°æ„é€ å‡½æ•°æˆ–è€…æ„é€ å‡½æ•°çš„åŸå‹ä¸­</span></span><br><span class="line"><span class="comment"> * æœ€åè¿”å›è¿™ä¸ªæ„é€ å‡½æ•°ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> _createClass = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†propsæ•°ç»„ä¸Šçš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½é€šè¿‡Object.defineProperty()æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * å®šä¹‰åˆ°ç›®æ ‡å¯¹è±¡targetä¸Šå»</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">defineProperties</span>(<span class="params">target, props</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;</span><br><span class="line">            props.length; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> descriptor = props[i];</span><br><span class="line">            <span class="comment">// ç±»çš„å†…éƒ¨æ‰€æœ‰å®šä¹‰çš„æ–¹æ³•,éƒ½æ˜¯ä¸å¯æšä¸¾çš„</span></span><br><span class="line">            descriptor.enumerable = descriptor.enumerable || <span class="literal">false</span>;</span><br><span class="line">            descriptor.configurable = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;value&quot;</span> <span class="keyword">in</span> descriptor) descriptor.writable = <span class="literal">true</span>;</span><br><span class="line">            <span class="built_in">Object</span>.defineProperty(target, descriptor.key, descriptor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;protoProps&#125;</span> </span>åŸå‹å±æ€§æ•°ç»„</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;protoProps&#125;</span> </span>é™æ€å±æ€§æ•°ç»„</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">Constructor, protoProps, staticProps</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// ä¸ºæ„é€ å‡½æ•°prototypeæ·»åŠ å±æ€§</span></span><br><span class="line">        <span class="comment">// (å³ä¸ºç”¨æ„é€ å‡½æ•°ç”Ÿæˆçš„å®ä¾‹åŸå‹æ·»åŠ å±æ€§,å¯ä»¥è¢«å®ä¾‹é€šè¿‡åŸå‹é“¾è®¿é—®åˆ°)</span></span><br><span class="line">        <span class="keyword">if</span> (protoProps) defineProperties(Constructor.prototype, protoProps);</span><br><span class="line">        <span class="comment">// ä¸ºæ„é€ å‡½æ•°æ·»åŠ å±æ€§</span></span><br><span class="line">        <span class="keyword">if</span> (staticProps) defineProperties(Constructor, staticProps);</span><br><span class="line">        <span class="keyword">return</span> Constructor;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> _class, _desc, _value, _class2;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@function </span></span></span><br><span class="line"><span class="comment"> * ä½œç”¨æ˜¯æ£€æŸ¥ Person æ˜¯å¦æ˜¯é€šè¿‡ new çš„æ–¹å¼è°ƒç”¨</span></span><br><span class="line"><span class="comment"> * é˜²æ­¢æ„é€ å‡½æ•°è¢«å½“åšæ™®é€šå‡½æ•°æ‰§è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_classCallCheck</span>(<span class="params">instance, Constructor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(instance <span class="keyword">instanceof</span> Constructor)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Cannot call a class as a function&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_applyDecoratedDescriptor</span>(<span class="params">target, property, decorators, descriptor, context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> desc = &#123;&#125;;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¯¹ descriptor å±æ€§åšäº†ä¸€å±‚æ‹·è´</span></span><br><span class="line">    <span class="built_in">Object</span>[<span class="string">&#x27;keys&#x27;</span>](descriptor).forEach(<span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">        desc[key] = descriptor[key];</span><br><span class="line">    &#125;);</span><br><span class="line">    desc.enumerable = !!desc.enumerable;</span><br><span class="line">    desc.configurable = !!desc.configurable;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ²¡æœ‰ value æˆ–è€… initializer å±æ€§çš„,è¡¨æ˜æ˜¯ get å’Œ set æ–¹æ³•</span></span><br><span class="line">    <span class="comment">// initializeræ˜¯ Babel çš„ Class ä¸ºäº†ä¸ decorator é…åˆè€Œäº§ç”Ÿçš„ä¸€ä¸ªå±æ€§</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&#x27;value&#x27;</span> <span class="keyword">in</span> desc || desc.initializer) &#123;</span><br><span class="line">        desc.writable = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿™é‡Œå¤„ç†å¤šä¸ª decorator çš„æƒ…å†µ,ç”±ç±»å†…å‘ç±»å¤–æ‰§è¡Œ</span></span><br><span class="line">    desc = decorators.slice().reverse().reduce(<span class="function"><span class="keyword">function</span> (<span class="params">desc, decorator</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> decorator(target, property, desc) || desc;</span><br><span class="line">    &#125;, desc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// voidå…¶å®æ˜¯javascriptä¸­çš„ä¸€ä¸ªå‡½æ•°,æ¥å—ä¸€ä¸ªå‚æ•°,è¿”å›å€¼æ°¸è¿œæ˜¯undefined</span></span><br><span class="line">    <span class="keyword">if</span> (context &amp;&amp; desc.initializer !== <span class="keyword">void</span> <span class="number">0</span>) &#123;</span><br><span class="line">        desc.value = desc.initializer ? desc.initializer.call(context) : <span class="keyword">void</span> <span class="number">0</span>;</span><br><span class="line">        desc.initializer = <span class="literal">undefined</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (desc.initializer === <span class="keyword">void</span> <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">Object</span>[<span class="string">&#x27;defineProperty&#x27;</span>](target, property, desc);</span><br><span class="line">        desc = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> desc;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> log = <span class="function"><span class="keyword">function</span> <span class="title">log</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> oldValue = descriptor.value;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> descriptor.value === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> _len = <span class="built_in">arguments</span>.length, args = <span class="built_in">Array</span>(_len), _key = <span class="number">0</span>; _key &lt; _len; _key++) &#123;</span><br><span class="line">                args[_key] = <span class="built_in">arguments</span>[_key];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">console</span>.log(oldValue.apply(<span class="built_in">this</span>, args));</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(descriptor.value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foodCategory = <span class="function"><span class="keyword">function</span> <span class="title">foodCategory</span>(<span class="params">target, name, descriptor</span>) </span>&#123;</span><br><span class="line">    target.category = <span class="string">&quot;food&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Cola = foodCategory(_class = (_class2 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Cola</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">        _classCallCheck(<span class="built_in">this</span>, Cola);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _createClass(Cola, [&#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&quot;color&quot;</span>,</span><br><span class="line">        <span class="attr">value</span>: <span class="function"><span class="keyword">function</span> <span class="title">color</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;red&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Cola;</span><br><span class="line">&#125;(), (_applyDecoratedDescriptor(_class2.prototype, <span class="string">&quot;color&quot;</span>, [log], <span class="built_in">Object</span>.getOwnPropertyDescriptor(_class2.prototype, <span class="string">&quot;color&quot;</span>), _class2.prototype)), _class2)) || _class;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cola = <span class="keyword">new</span> Cola(<span class="string">&quot;Coca Cola&quot;</span>);</span><br><span class="line">cola.color();</span><br><span class="line"><span class="built_in">console</span>.log(Cola.category);</span><br></pre></td></tr></table></figure><h4 id="babelè¯¦ç»†æ“ä½œ"><a href="#babelè¯¦ç»†æ“ä½œ" class="headerlink" title="babelè¯¦ç»†æ“ä½œ"></a>babelè¯¦ç»†æ“ä½œ</h4><p>ä½¿ç”¨<code>npm init</code>åˆå§‹åŒ–é¡¹ç›®:<br>ç”Ÿæˆæ–‡ä»¶<code>pakeage.json</code>,å®ƒä¼šå°†è®°å½•é¡¹ç›®å¼€å‘ä¸­æ‰€è¦ç”¨åˆ°çš„åŒ…,ä»¥åŠé¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯</p><p>babel-cliæ˜¯ä¸€ç§åœ¨å‘½ä»¤è¡Œä¸‹ä½¿ç”¨Babelç¼–è¯‘æ–‡ä»¶çš„ç®€å•æ–¹æ³•,ä¸»è¦ç”¨äºæ–‡ä»¶çš„è¾“å…¥è¾“å‡º<br>å®‰è£…babelå‘½ä»¤è¡Œå·¥å…·:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --<span class="built_in">global</span> babel-cli</span><br></pre></td></tr></table></figure><p>å®‰è£…è£…é¥°å™¨ä¾èµ–:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save-dev babel-plugin-transform-decorators-legacy</span><br></pre></td></tr></table></figure><p>é¡¹ç›®ä¸­åˆ›å»º**.babelrc**æ–‡ä»¶:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;presets&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;es2015&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;transform-decorators-legacy&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶è¯´æ˜:</p><ul><li><p>.babelrc<br>babelæ‰€æœ‰çš„æ“ä½œåŸºæœ¬éƒ½ä¼šæ¥è¯»å–è¿™ä¸ªé…ç½®æ–‡ä»¶,é™¤äº†ä¸€äº›åœ¨å›è°ƒå‡½æ•°ä¸­è®¾ç½®optionså‚æ•°çš„,å¦‚æœæ²¡æœ‰è¿™ä¸ªé…ç½®æ–‡ä»¶,ä¼šä»package.jsonæ–‡ä»¶çš„babelå±æ€§ä¸­è¯»å–é…ç½®</p></li><li><p>presets<br>å¯ä»¥ç®€å•çš„æŠŠå®ƒè§†ä¸º Babel Plugin çš„é›†åˆ</p></li><li><p>plugins<br>babelä¸­çš„æ’ä»¶,é€šè¿‡é…ç½®ä¸åŒçš„æ’ä»¶å‘Šè¯‰babel,ä»£ç ä¸­æœ‰å“ªäº›æ˜¯éœ€è¦è½¬è¯‘çš„</p></li></ul><p>ä½¿ç”¨babelå‘½ä»¤è½¬ç :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">babel [fileName].js</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;è£…é¥°å™¨æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#è£…é¥°å™¨æ¦‚å¿µ&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­offsetã€clientã€scroll</title>
    <link href="http://example.com/2020/06/10/JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/"/>
    <id>http://example.com/2020/06/10/JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/</id>
    <published>2020-06-10T13:49:20.000Z</published>
    <updated>2021-08-07T05:59:13.848Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬åšå®¢ <a href="https://hjy-xh.github.io/">hjy-xh</a>ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„</p></blockquote><h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>åœ¨webå‰ç«¯å¼€å‘ä¸­ç»å¸¸ä¼šç¢°åˆ°offsetã€clientã€scroll,å®¹æ˜“æ··ä¹±,è¿™é‡Œè®°å½•ä¸€ç•ª.<br>å…ˆæ”¾ä¸¤å¼ å›¾,æœªæ¥å¥½æŸ¥é˜… :smile:<br><img src="JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/1.png" alt="JavaScriptä¸­offsetã€clientã€scroll.md"><br><img src="JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/2.png" alt="JavaScriptä¸­offsetã€clientã€scroll.md"></p><h2 id="offset"><a href="#offset" class="headerlink" title="offset"></a>offset</h2><p>offset: åç§»é‡<br>å®ƒåŒ…æ‹¬å…ƒç´ åœ¨å±å¹•ä¸Šå ç”¨çš„æ‰€æœ‰å¯è§çš„ç©ºé—´.å…ƒç´ çš„å¯è§å¤§å°ç”±å…¶é«˜åº¦ã€å®½åº¦å†³å®š,åŒ…æ‹¬æ‰€æœ‰çš„å†…è¾¹è·<code>padding</code>,æ»šåŠ¨æ¡å’Œè¾¹æ¡†<code>border</code>å¤§å°(æ³¨æ„:ä¸åŒ…æ‹¬å¤–è¾¹è·).</p><p>é€šè¿‡ä»¥ä¸‹4ä¸ªå±æ€§å¯ä»¥å–å¾—å…ƒç´ çš„åç§»é‡:</p><ul><li>offsetHeight: offsetHeight = border-width * 2 + padding-top + padding-bottom + height</li><li>offsetWidth: offsetWidth = border-width * 2 + padding-left + padding-right + width</li><li>offsetLeft: offsetLeft = offsetParent çš„padding-left + ä¸­é—´å…ƒç´ çš„offsetWidth + å½“å‰å…ƒç´ çš„margin-left</li><li>offsetTop: offsetParent çš„padding-top + ä¸­é—´å…ƒç´ çš„offsetHeight + å½“å‰å…ƒç´ çš„margin-top</li></ul><p><strong>å®ƒä»¬éƒ½æ˜¯åªè¯»å±æ€§,æ¯æ¬¡è®¿é—®éƒ½è¦é‡æ–°è®¡ç®—,å¦‚æœç»å¸¸è®¿é—®,å¯ä»¥ç”¨å˜é‡å­˜èµ·æ¥,ä»¥æé«˜æ€§èƒ½</strong></p><p><img src="JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/3.png" alt="JavaScriptä¸­offsetã€clientã€scroll.md"></p><h2 id="client"><a href="#client" class="headerlink" title="client"></a>client</h2><p>client: å®¢æˆ·åŒºå¤§å°<br>å®ƒåŒ…æ‹¬å…ƒç´ å†…å®¹åŠå…¶å†…è¾¹è·æ‰€å æ®çš„ç©ºé—´å¤§å°.</p><p>é€šè¿‡ä»¥ä¸‹2ä¸ªå±æ€§å¯ä»¥å–å¾—å…ƒç´ çš„å®¢æˆ·åŒº:</p><ul><li>clientHeight: padding-top + padding-bottom + height</li><li>clientWidth: padding-left + padding-right + width</li></ul><p><strong>å®ƒä»¬ä¹Ÿæ˜¯åªè¯»å±æ€§,æ¯æ¬¡è®¿é—®éƒ½è¦é‡æ–°è®¡ç®—</strong></p><p><img src="JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/4.png" alt="JavaScriptä¸­offsetã€clientã€scroll.md"></p><h2 id="scroll"><a href="#scroll" class="headerlink" title="scroll"></a>scroll</h2><p>scroll: æ»šåŠ¨å¤§å°<br>å®ƒæŒ‡çš„æ˜¯æ»šåŠ¨å†…å®¹çš„å…ƒç´ çš„å¤§å°.<br>æœ‰äº›å…ƒç´ (æ¯”å¦‚<code>&lt;html&gt;</code>),å³ä½¿æ²¡æœ‰æ‰§è¡Œä»»ä½•ä»£ç ä¹Ÿèƒ½è‡ªåŠ¨åœ°æ·»åŠ æ»šåŠ¨æ¡;æœ‰äº›å…ƒç´ éœ€è¦é€šè¿‡è®¾ç½®CSSçš„<code>overflow</code>å±æ€§æ‰èƒ½æ»šåŠ¨.</p><p>é€šè¿‡ä»¥ä¸‹4ä¸ªå±æ€§å¯ä»¥å–å¾—æ»šåŠ¨çš„ç›¸å…³å±æ€§:</p><ul><li>scrollHeight: åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹,å…ƒç´ å®é™…å†…å®¹çš„æ€»é«˜åº¦</li><li>scrollWidth: åœ¨æ²¡æœ‰æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹,å…ƒç´ å®é™…å†…å®¹çš„æ€»å®½åº¦</li><li>scrollLeft: è¢«éšè—åœ¨å†…å®¹åŒºåŸŸå·¦ä¾§çš„åƒç´ æ•°,è®¾ç½®è¯¥å±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®</li><li>scrollTop: è¢«éšè—åœ¨å†…å®¹åŒºåŸŸä¸Šæ–¹çš„åƒç´ æ•°,è®¾ç½®è¯¥å±æ€§å¯ä»¥æ”¹å˜å…ƒç´ çš„æ»šåŠ¨ä½ç½®</li></ul><p><strong>é€šå¸¸è®¤ä¸º<code>&lt;html&gt;</code>å…ƒç´ æ˜¯åœ¨webæµè§ˆå™¨çš„è§†å£ä¸­æ»šåŠ¨çš„å…ƒç´ ,æ‰€ä»¥å¸¦æœ‰å‚ç›´æ»šåŠ¨æ¡çš„é¡µé¢æ€»é«˜åº¦å°±æ˜¯<code>document.documentElement.scrollHeight</code>.</strong></p><p><img src="JavaScript%E4%B8%ADoffset%E3%80%81client%E3%80%81scroll/5.png" alt="JavaScriptä¸­offsetã€clientã€scroll.md"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬åšå®¢ &lt;a href=&quot;https://hjy-xh.github.io/&quot;&gt;hjy-xh&lt;/a&gt;ï¼Œè½¬è½½è¯·ç”³æ˜å‡ºå¤„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å†™åœ¨å‰é¢&quot;&gt;&lt;a href=&quot;#å†™åœ¨å‰é¢&quot; class=&quot;headerlink</summary>
      
    
    
    
    <category term="æŠ€æœ¯" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
</feed>
